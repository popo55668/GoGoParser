{"version":3,"sources":["node_modules/util/support/isBufferBrowser.js","node_modules/inherits/inherits_browser.js","node_modules/process/browser.js","node_modules/util/util.js","node_modules/pdfreader/lib/LOG.js","node_modules/events/events.js","node_modules/pdf2json/node_modules/underscore/underscore.js","node_modules/pdf2json/node_modules/xmldom/sax.js","node_modules/pdf2json/node_modules/xmldom/dom.js","node_modules/pdf2json/node_modules/xmldom/dom-parser.js","node_modules/pdf2json/lib/pdfunit.js","node_modules/pdf2json/lib/pdfline.js","node_modules/pdf2json/lib/pdffill.js","node_modules/pdf2json/lib/pdffont.js","node_modules/pdf2json/lib/pdfcanvas.js","node_modules/pdf2json/lib/pdffield.js","node_modules/pdf2json/lib/pdfanno.js","node_modules/base64-js/index.js","node_modules/ieee754/index.js","node_modules/isarray/index.js","node_modules/buffer/index.js","node_modules/pdf2json/lib/pdfimage.js","node_modules/pdf2json/lib/ptixmlinject.js","node_modules/pdf2json/lib/pdf.js","node_modules/pdf2json/node_modules/async/lib/async.js","node_modules/pdf2json/pdfparser.js","node_modules/pdfreader/PdfReader.js","node_modules/pdfreader/lib/parseColumns.js","node_modules/pdfreader/lib/parseTable.js","node_modules/pdfreader/Rule.js","node_modules/pdfreader/lib/SequentialParser.js","node_modules/pdfreader/lib/TableParser.js","node_modules/pdfreader/lib/ColumnsParser.js","node_modules/pdfreader/index.js","node_modules/moment/moment.js","src/parse.js"],"names":["process","module","exports","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","Error","defaultClearTimeout","setTimeout","e","clearTimeout","runTimeout","fun","call","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","length","concat","drainQueue","timeout","len","run","nextTick","args","Array","arguments","i","push","Item","array","prototype","apply","title","browser","env","argv","version","versions","noop","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","name","binding","cwd","chdir","dir","umask","formatRegExp","format","f","isString","objects","inspect","join","str","String","replace","x","Number","JSON","stringify","_","isNull","isObject","deprecate","fn","msg","isUndefined","global","noDeprecation","warned","deprecated","throwDeprecation","traceDeprecation","console","trace","error","debugs","debugEnviron","debuglog","set","toUpperCase","RegExp","test","pid","obj","opts","ctx","seen","stylize","stylizeNoColor","depth","colors","isBoolean","showHidden","_extend","customInspect","stylizeWithColor","formatValue","styles","styleType","style","arrayToHash","hash","forEach","val","idx","value","recurseTimes","isFunction","constructor","ret","primitive","formatPrimitive","keys","Object","visibleKeys","getOwnPropertyNames","isError","indexOf","formatError","isRegExp","toString","isDate","Date","base","braces","isArray","n","toUTCString","output","formatArray","map","key","formatProperty","pop","reduceToSingleString","simple","isNumber","l","hasOwnProperty","match","desc","getOwnPropertyDescriptor","get","split","line","substr","numLinesEst","reduce","prev","cur","ar","arg","isNullOrUndefined","isSymbol","re","objectToString","d","isPrimitive","isBuffer","require","o","pad","months","timestamp","time","getHours","getMinutes","getSeconds","getDate","getMonth","log","inherits","origin","add","prop","EventEmitter","_events","_maxListeners","undefined","defaultMaxListeners","setMaxListeners","isNaN","TypeError","type","er","handler","err","context","slice","listener","m","newListener","fired","g","list","position","splice","listenerCount","evlistener","emitter","nameStartChar","nameChar","source","tagNamePattern","S_TAG","S_ATTR","S_ATTR_S","S_EQ","S_V","S_E","S_S","S_C","XMLReader","parse","defaultNSMap","entityMap","domBuilder","startDocument","_copy","errorHandler","endDocument","defaultNSMapCopy","entityReplacer","a","k","charAt","fromCharCode","parseInt","appendText","end","xt","substring","start","locator","characters","endPos","linePattern","exec","startPos","index","lineNumber","columnNumber","parseStack","currentNSMap","closeMap","tagName","config","localNSMap","fatalError","endElement","uri","localName","prefix","endPrefixMapping","parseInstruction","parseDCC","el","ElementAttributes","parseElementStartPart","backup","copyLocator","offset","closed","fixSelfClosed","appendElement","parseHtmlSpecialContent","t","attrName","p","s","c","warning","setTagName","qName","nsp","nsPrefix","startPrefixMapping","ns","startElement","elStartEnd","elEndStart","text","pos","lastIndexOf","target","next","comment","startCDATA","endCDATA","matchs","pubid","sysid","lastMatch","startDTD","endDTD","processingInstruction","getLocalName","getOffset","getQName","getURI","getValue","_set_proto_","thiz","parent","__proto__","buf","reg","lastIndex","copy","src","dest","_extends","Class","Super","pt","create","ppt","htmlns","NodeType","ELEMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE","ExceptionCode","ExceptionMessage","INDEX_SIZE_ERR","DOMSTRING_SIZE_ERR","HIERARCHY_REQUEST_ERR","WRONG_DOCUMENT_ERR","INVALID_CHARACTER_ERR","NO_DATA_ALLOWED_ERR","NO_MODIFICATION_ALLOWED_ERR","NOT_FOUND_ERR","NOT_SUPPORTED_ERR","INUSE_ATTRIBUTE_ERR","INVALID_STATE_ERR","SYNTAX_ERR","INVALID_MODIFICATION_ERR","NAMESPACE_ERR","INVALID_ACCESS_ERR","DOMException","code","message","captureStackTrace","NodeList","item","LiveNodeList","node","refresh","_node","_refresh","_updateLiveList","inc","_inc","ownerDocument","ls","__set__","NamedNodeMap","_findNodeIndex","_addNamedNode","newAttr","oldAttr","ownerElement","doc","_onRemoveAttribute","_onAddAttribute","_removeNamedNode","attr","getNamedItem","nodeName","setNamedItem","_ownerElement","setNamedItemNS","getNamedItemNS","namespaceURI","removeNamedItem","removeNamedItemNS","DOMImplementation","features","_features","feature","hasFeature","toLowerCase","createDocument","qualifiedName","doctype","Document","appendChild","implementation","childNodes","root","createElementNS","createDocumentType","publicId","systemId","DocumentType","Node","firstChild","lastChild","previousSibling","nextSibling","attributes","parentNode","nodeValue","insertBefore","newChild","refChild","_insertBefore","replaceChild","oldChild","removeChild","_removeChild","hasChildNodes","cloneNode","deep","normalize","child","nodeType","appendData","data","isSupported","hasAttributes","lookupPrefix","_nsMap","lookupNamespaceURI","isDefaultNamespace","_xmlEncoder","charCodeAt","_visitNode","callback","remove","_onUpdateChild","cs","previous","nextChild","cp","newFirst","newLast","pre","_appendSingleChild","documentElement","importNode","importedNode","getElementById","id","rtv","getAttribute","createElement","Element","attrs","createDocumentFragment","DocumentFragment","createTextNode","Text","createComment","Comment","createCDATASection","CDATASection","createProcessingInstruction","ProcessingInstruction","createAttribute","Attr","specified","createEntityReference","EntityReference","pl","createAttributeNS","hasAttribute","getAttributeNode","setAttribute","setAttributeNode","removeAttribute","removeAttributeNode","setAttributeNodeNS","removeAttributeNS","old","getAttributeNodeNS","hasAttributeNS","getAttributeNS","setAttributeNS","getElementsByTagName","getElementsByTagNameNS","CharacterData","substringData","count","insertData","replaceData","deleteData","splitText","newText","newNode","Notation","Entity","XMLSerializer","serializeToString","isHTML","sub","internalSubset","node2","v","attrs2","object","defineProperty","$$length","getTextContent","DOMParser","options","parseFromString","mimeType","sax","DOMHandler","setDocumentLocator","buildErrorHandler","nbsp","document","errorImpl","isCallback","Function","build","_locator","cdata","documentURI","currentElement","current","ins","ignorableWhitespace","ch","chars","_toString","charNode","skippedEntity","comm","impl","dt","warn","java","lang","hander","nodeUtil","PDFUnit","PFPUnitClosure","_nextId","_name","dpi","gridXPerInch","gridYPerInch","_pixelXPerGrid","_pixelYPerGrid","_pixelPerPoint","kColors","cls","_id","get_id","get_name","get_nextId","toFixedFloat","fNum","parseFloat","toFixed","colorCount","toPixelX","formX","Math","round","toPixelY","formY","pointToPixel","point","getColorByIndex","clrId","toFormPoint","viewportX","viewportY","toFormX","toFormY","findColorIndex","color","PDFLine","PFPLineClosure","x1","y1","x2","y2","lineWidth","dashed","_setStartPoint","oneLine","y","processLine","targetData","xDelta","abs","yDelta","minDelta","w","extend","oc","clr","dsh","p2jinfo","HLines","VLines","PDFFill","width","height","processFill","oneFill","h","Fills","PDFFont","PFPFontClosure","_boldSubNames","_stdFonts","_kFontFaces","_kFontStyles","fontObj","typeName","fallbackName","subType","nameArray","bold","subName","isSymbolicFont","mFonts","filter","oneName","fontSize","faceIdx","italic","fontStyleId","_setFaceIndex","isSerifFont","isMonospace","_getFontStyleIndex","fsa","retVal","each","element","_processSymbolicFont","_textRotationAngle","matrix2D","r1","atan","r2","PI","processText","maxWidth","TS","oneText","A","R","T","flash_encode","S","rAngle","RA","Texts","encodeURIComponent","clean","mr","ms","sin","mc","cos","sqrt","dec2hex","j","createMatrixIdentity","matrixMultiply","m1","m2","result","sum","z","copyState","o1","o2","fillStyle","lineCap","lineJoin","miterLimit","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","strokeStyle","globalAlpha","arcScaleX_","arcScaleY_","lineScale_","dashArray","processStyle","styleString","alpha","guts","processLineCap","CanvasRenderingContext2D_","canvasTarget","scaledWidth","scaledHeight","m_","mStack_","aStack_","currentPath_","has","canvas","currentFont","_drawPDFLine","p1","p2","dashedLine","pL","_drawPDFFill","min","max","pF","_needRemoveRect","contextPrototype","getContext","ctxType","setLineDash","lineDash","getLineDash","fillText","trim","getCoords_","strokeText","setFont","clearRect","beginPath","moveTo","aX","aY","currentX_","currentY_","lineTo","bezierCurveTo","aCP1x","aCP1y","aCP2x","aCP2y","cp1","cp2","self","cp1x","cp1y","cp2x","cp2y","quadraticCurveTo","aCPx","aCPy","arc","aRadius","aStartAngle","aEndAngle","aClockwise","arcType","xStart","yStart","xEnd","yEnd","pStart","pEnd","radius","rect","aWidth","aHeight","closePath","strokeRect","oldPath","stroke","fillRect","fill","createLinearGradient","aX0","aY0","aX1","aY1","gradient","CanvasGradient_","x0_","y0_","x1_","y1_","createRadialGradient","aR0","aR1","r0_","r1_","drawImage","image","var_args","getImageData","Uint8Array","aFill","save","restore","matrixIsFinite","isFinite","setM","updateLineScale","det","translate","rotate","aRot","scale","transform","m11","m12","m21","m22","dx","dy","setTransform","clip","arcTo","createPattern","CanvasPattern_","aType","type_","colors_","addColorStop","aOffset","aColor","PDFField","PDFFieldClosure","_tabIndex","kFBANotOverridable","kFBARequired","kMinHeight","field","viewport","Fields","Boxsets","_normalizeRect","r","isWidgetSupported","fieldType","fieldFlags","p2jwarn","isFormElement","subtype","_getFieldPosition","viewPort","fieldRect","convertToViewportRectangle","_getFieldBaseData","attributeMask","anData","Id","fullName","EN","TI","AM","alternativeText","TU","_addAlpha","Name","TName","TypeInfo","MV","fieldValue","V","_addCheckBox","box","boxes","_addRadioButton","checked","rdGroup","find","boxset","_addLinkButton","FL","form","_addSelect","PL","D","ele","processField","getAllFieldsTypes","isFieldReadOnly","getFieldBase","calc","Pages","page","boxsets","PDFAnno","PDFAnnoClosure","setupRadioButton","annotation","asName","po","ap","nVal","setupPushButton","mk","sp","setupCheckBox","setupDropDown","setupFieldAttributes","aa","processFieldAttribute","AFSpecial_Format","jsFuncName","vParts","funcName","funcParam","maskValue","processAnnotation","PDFImage","_src","_onload","__defineSetter__","__defineGetter__","btoa","window","Buffer","nodeEvents","fs","PDFCanvas","Image","pkInfo","xmlData","PTIXmlParser","ptiPageArray","parseXml","filePath","readFile","parser","dom","xmlFields","fields","xPos","yPos","fontName","rectLeft","rectTop","rectRight","rectBottom","getFields","pageNum","_pdfjsFiles","createScratchCanvas","PDFJS","globalScope","_fileContent","eval","PDFPageParser","RenderingStates","INITIAL","RUNNING","PAUSED","FINISHED","_addField","oneField","pdfPage","ptiParser","getViewport","renderingState","enumerable","destroy","getPagePoint","convertToPdfPoint","parsePage","errorCallBack","pageViewDrawCallback","errMsg","stack","extraFields","stats","renderContext","canvasContext","render","then","pdfPageRenderCallback","getAnnotations","pdfPageRenderError","PDFJSClass","_sufInfo","_getMetaDataString","metadata","_getMetaDataInt","needRawText","pdfDocument","pages","pageWidth","rawTextContents","parsePDFData","arrayBuffer","parameters","password","getDocument","getDocumentCallback","load","getDocumentError","exception","getDocumentProgress","progressData","loaded","total","tryLoadFieldInfoXML","pdfFilePath","fieldInfoXMLPath","existsSync","bind","pagesCount","numPages","pagePromises","getPage","pagesPromise","Promise","all","promisedPages","getMetadata","documentInfo","info","parseMetaData","pdfTile","formAttr","AgencyId","MC","Max","Parent","Transcoder","Agency","pageParser","continueOnNextPage","Width","Height","textContent","getRawTextContent","bidiTexts","textObj","async","PDFParser","_binBuffer","_maxBinBufferCount","parsePropCount","processFieldInfoXML","_onPDFJSParseDataReady","_onPDFJSParserDataError","startParsingPDF","buffer","processBinaryCache","allKeys","processPDFContent","fq","task","path","loadPDF","verbosity","parseBuffer","pdfBuffer","pdfreader","PdfReader","resolve","reject","columnTitles","items","fileReader","FileReader","onload","event","state","isGoodRow","checksum","column","ad","date","isValid","acc","payment","shift","pdf","readAsArrayBuffer"],"mappings":"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,GAAuC,UAASd,IAAT,EAAe;AACpD,MAAI,KAAKP,OAAT,EAAkB;AAChB,QAAIsB,aAAa,KAAKtB,OAAL,CAAaO,IAAb,CAAjB;;AAEA,QAAI5E,WAAW2F,UAAX,CAAJ,EACE,OAAO,CAAP,CADF,KAEK,IAAIA,UAAJ,EACH,OAAOA,WAAWhM,MAAlB;AACH;AACD,SAAO,CAAP;AACD,CAVD;;AAYAyK,aAAasB,aAAb,GAA6B,UAASE,OAAT,EAAkBhB,IAAlB,EAAwB;AACnD,SAAOgB,QAAQF,aAAR,CAAsBd,IAAtB,CAAP;AACD,CAFD;;AAIA,SAAS5E,UAAT,CAAoB4C,GAApB,EAAyB;AACvB,SAAO,OAAOA,GAAP,KAAe,UAAtB;AACD;;AAED,SAASf,QAAT,CAAkBe,GAAlB,EAAuB;AACrB,SAAO,OAAOA,GAAP,KAAe,QAAtB;AACD;;AAED,SAAS1F,QAAT,CAAkB0F,GAAlB,EAAuB;AACrB,SAAO,OAAOA,GAAP,KAAe,QAAf,IAA2BA,QAAQ,IAA1C;AACD;;AAED,SAAStF,WAAT,CAAqBsF,GAArB,EAA0B;AACxB,SAAOA,QAAQ,KAAK,CAApB;AACD;;;;AC7SD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1sCA;AACA;AACA;AACA,IAAIiD,gBAAgB,kJAApB,EAAsK;AACtK,IAAIC,WAAW,IAAIzH,MAAJ,CAAW,eAAawH,cAAcE,MAAd,CAAqBd,KAArB,CAA2B,CAA3B,EAA6B,CAAC,CAA9B,CAAb,GAA8C,qCAAzD,CAAf;AACA,IAAIe,iBAAiB,IAAI3H,MAAJ,CAAW,MAAIwH,cAAcE,MAAlB,GAAyBD,SAASC,MAAlC,GAAyC,QAAzC,GAAkDF,cAAcE,MAAhE,GAAuED,SAASC,MAAhF,GAAuF,MAAlG,CAArB;AACA;AACA;;AAEA;AACA;AACA,IAAIE,QAAQ,CAAZ,EAAc;AACd,IAAIC,SAAS,CAAb,EAAe;AACf,IAAIC,WAAS,CAAb,EAAe;AACf,IAAIC,OA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lBD;;AAoBA,WAAO6M,GAAP;AACH,CAnMa,EAAd;;AAqMA5jB,OAAOC,OAAP,GAAiB24B,OAAjB;;ACzMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpFA;AACA;AACA;AACA;AACA;AACA;;;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC7vDA;AACA,IAAIuB,WAAY,YAAW;AAC1B;;AAEA,KAAIC,OAAO,EAAX;AACA,KAAIC,UAAU,IAAd;;AAEA,MAAKC,gBAAL,CAAsB,QAAtB,EAAgC,UAASjzB,GAAT,EAAc;AAC7CgzB,YAAUhzB,GAAV;AACA,EAFD;;AAIA,MAAKkzB,gBAAL,CAAsB,QAAtB,EAAgC,YAAW;AAC1C,SAAOF,OAAP;AACA,EAFD;;AAIA,MAAKC,gBAAL,CAAsB,KAAtB,EAA6B,UAASjzB,GAAT,EAAc;AAC1C+yB,SAAO/yB,GAAP;AACA,MAAIgzB,OAAJ,EAAaA;AACb,EAHD;;AAKA,MAAKE,gBAAL,CAAsB,KAAtB,EAA6B,YAAW;AACvC,SAAOH,IAAP;AACA,EAFD;;AAIG,MAAKI,IAAL,GAAY,UAASnzB,GAAT,EAAc;AACtB,MAAI,OAAOozB,MAAP,KAAkB,WAAtB,EAAmC;AAC/B,UAAQ,IAAIC,MAAJ,CAAWrzB,GAAX,EAAgB,OAAhB,CAAD,CAA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ACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A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IAAb;;AAEA,aAAK8F,cAAL,GAAsB,CAAtB;AACH,KAhBD;;AAkBA,WAAOve,GAAP;AACH,CA/Ie,EAAhB;;AAiJA5jB,OAAOC,OAAP,GAAiB+hC,SAAjB;;ACxJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;AC15IA;;;;AACA;;;;;;AACA,IAAM1G,SAAS,IAAI6H,oBAAUC,SAAd,EAAf;;AAEA,IAAMj1B,QAAQ,SAARA,KAAQ;AAAA,SAAO,IAAIqyB,OAAJ,CAAY,UAAC6C,OAAD,EAAUC,MAAV,EAAqB;AACpD,QAAIC,eAAe,CACjB,EAAEnhC,OAAO,KAAT,EAAgBiC,GAAG,CAAnB,EADiB,EAEjB,EAAEjC,OAAO,OAAT,EAAkBiC,GAAG,CAArB,EAFiB,EAGjB,EAAEjC,OAAO,MAAT,EAAiBiC,GAAG,CAApB,EAHiB,EAIjB,EAAEjC,OAAO,OAAT,EA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","file":"parse.2a9f8ec0.map","sourceRoot":"..","sourcesContent":["module.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  // Allow for deprecating things in the process of starting up.\n  if (isUndefined(global.process)) {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  if (process.noDeprecation === true) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n","/**\n * Minimal logger\n * @author Adrien Joly, http://github.com/adrienjoly\n * This content is released under the MIT License.\n **/\n\nvar util = require(\"util\");\n\nvar nullLog = function LOG(){};\n\nvar realLog = function LOG(){\n  for (var i in arguments)\n    if (arguments[i] instanceof Object || arguments[i] instanceof Array)\n      arguments[i] = util.inspect(arguments[i]);\n  console.log(\"[DEBUG] \" + Array.prototype.join.call(arguments, \" \"));\n};\n\nvar LOG = nullLog;\n\nmodule.exports = function(){\n  LOG.apply(null, arguments);\n};\n\nmodule.exports.toggle = function(enabled){\n  LOG = !enabled ? nullLog : realLog;\n  return module.exports;\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n","//     Underscore.js 1.4.4\n//     http://underscorejs.org\n//     (c) 2009-2013 Jeremy Ashkenas, DocumentCloud Inc.\n//     Underscore may be freely distributed under the MIT license.\n\n(function() {\n\n  // Baseline setup\n  // --------------\n\n  // Establish the root object, `window` in the browser, or `global` on the server.\n  var root = this;\n\n  // Save the previous value of the `_` variable.\n  var previousUnderscore = root._;\n\n  // Establish the object that gets returned to break out of a loop iteration.\n  var breaker = {};\n\n  // Save bytes in the minified (but not gzipped) version:\n  var ArrayProto = Array.prototype, ObjProto = Object.prototype, FuncProto = Function.prototype;\n\n  // Create quick reference variables for speed access to core prototypes.\n  var push             = ArrayProto.push,\n      slice            = ArrayProto.slice,\n      concat           = ArrayProto.concat,\n      toString         = ObjProto.toString,\n      hasOwnProperty   = ObjProto.hasOwnProperty;\n\n  // All **ECMAScript 5** native function implementations that we hope to use\n  // are declared here.\n  var\n    nativeForEach      = ArrayProto.forEach,\n    nativeMap          = ArrayProto.map,\n    nativeReduce       = ArrayProto.reduce,\n    nativeReduceRight  = ArrayProto.reduceRight,\n    nativeFilter       = ArrayProto.filter,\n    nativeEvery        = ArrayProto.every,\n    nativeSome         = ArrayProto.some,\n    nativeIndexOf      = ArrayProto.indexOf,\n    nativeLastIndexOf  = ArrayProto.lastIndexOf,\n    nativeIsArray      = Array.isArray,\n    nativeKeys         = Object.keys,\n    nativeBind         = FuncProto.bind;\n\n  // Create a safe reference to the Underscore object for use below.\n  var _ = function(obj) {\n    if (obj instanceof _) return obj;\n    if (!(this instanceof _)) return new _(obj);\n    this._wrapped = obj;\n  };\n\n  // Export the Underscore object for **Node.js**, with\n  // backwards-compatibility for the old `require()` API. If we're in\n  // the browser, add `_` as a global object via a string identifier,\n  // for Closure Compiler \"advanced\" mode.\n  if (typeof exports !== 'undefined') {\n    if (typeof module !== 'undefined' && module.exports) {\n      exports = module.exports = _;\n    }\n    exports._ = _;\n  } else {\n    root._ = _;\n  }\n\n  // Current version.\n  _.VERSION = '1.4.4';\n\n  // Collection Functions\n  // --------------------\n\n  // The cornerstone, an `each` implementation, aka `forEach`.\n  // Handles objects with the built-in `forEach`, arrays, and raw objects.\n  // Delegates to **ECMAScript 5**'s native `forEach` if available.\n  var each = _.each = _.forEach = function(obj, iterator, context) {\n    if (obj == null) return;\n    if (nativeForEach && obj.forEach === nativeForEach) {\n      obj.forEach(iterator, context);\n    } else if (obj.length === +obj.length) {\n      for (var i = 0, l = obj.length; i < l; i++) {\n        if (iterator.call(context, obj[i], i, obj) === breaker) return;\n      }\n    } else {\n      for (var key in obj) {\n        if (_.has(obj, key)) {\n          if (iterator.call(context, obj[key], key, obj) === breaker) return;\n        }\n      }\n    }\n  };\n\n  // Return the results of applying the iterator to each element.\n  // Delegates to **ECMAScript 5**'s native `map` if available.\n  _.map = _.collect = function(obj, iterator, context) {\n    var results = [];\n    if (obj == null) return results;\n    if (nativeMap && obj.map === nativeMap) return obj.map(iterator, context);\n    each(obj, function(value, index, list) {\n      results[results.length] = iterator.call(context, value, index, list);\n    });\n    return results;\n  };\n\n  var reduceError = 'Reduce of empty array with no initial value';\n\n  // **Reduce** builds up a single result from a list of values, aka `inject`,\n  // or `foldl`. Delegates to **ECMAScript 5**'s native `reduce` if available.\n  _.reduce = _.foldl = _.inject = function(obj, iterator, memo, context) {\n    var initial = arguments.length > 2;\n    if (obj == null) obj = [];\n    if (nativeReduce && obj.reduce === nativeReduce) {\n      if (context) iterator = _.bind(iterator, context);\n      return initial ? obj.reduce(iterator, memo) : obj.reduce(iterator);\n    }\n    each(obj, function(value, index, list) {\n      if (!initial) {\n        memo = value;\n        initial = true;\n      } else {\n        memo = iterator.call(context, memo, value, index, list);\n      }\n    });\n    if (!initial) throw new TypeError(reduceError);\n    return memo;\n  };\n\n  // The right-associative version of reduce, also known as `foldr`.\n  // Delegates to **ECMAScript 5**'s native `reduceRight` if available.\n  _.reduceRight = _.foldr = function(obj, iterator, memo, context) {\n    var initial = arguments.length > 2;\n    if (obj == null) obj = [];\n    if (nativeReduceRight && obj.reduceRight === nativeReduceRight) {\n      if (context) iterator = _.bind(iterator, context);\n      return initial ? obj.reduceRight(iterator, memo) : obj.reduceRight(iterator);\n    }\n    var length = obj.length;\n    if (length !== +length) {\n      var keys = _.keys(obj);\n      length = keys.length;\n    }\n    each(obj, function(value, index, list) {\n      index = keys ? keys[--length] : --length;\n      if (!initial) {\n        memo = obj[index];\n        initial = true;\n      } else {\n        memo = iterator.call(context, memo, obj[index], index, list);\n      }\n    });\n    if (!initial) throw new TypeError(reduceError);\n    return memo;\n  };\n\n  // Return the first value which passes a truth test. Aliased as `detect`.\n  _.find = _.detect = function(obj, iterator, context) {\n    var result;\n    any(obj, function(value, index, list) {\n      if (iterator.call(context, value, index, list)) {\n        result = value;\n        return true;\n      }\n    });\n    return result;\n  };\n\n  // Return all the elements that pass a truth test.\n  // Delegates to **ECMAScript 5**'s native `filter` if available.\n  // Aliased as `select`.\n  _.filter = _.select = function(obj, iterator, context) {\n    var results = [];\n    if (obj == null) return results;\n    if (nativeFilter && obj.filter === nativeFilter) return obj.filter(iterator, context);\n    each(obj, function(value, index, list) {\n      if (iterator.call(context, value, index, list)) results[results.length] = value;\n    });\n    return results;\n  };\n\n  // Return all the elements for which a truth test fails.\n  _.reject = function(obj, iterator, context) {\n    return _.filter(obj, function(value, index, list) {\n      return !iterator.call(context, value, index, list);\n    }, context);\n  };\n\n  // Determine whether all of the elements match a truth test.\n  // Delegates to **ECMAScript 5**'s native `every` if available.\n  // Aliased as `all`.\n  _.every = _.all = function(obj, iterator, context) {\n    iterator || (iterator = _.identity);\n    var result = true;\n    if (obj == null) return result;\n    if (nativeEvery && obj.every === nativeEvery) return obj.every(iterator, context);\n    each(obj, function(value, index, list) {\n      if (!(result = result && iterator.call(context, value, index, list))) return breaker;\n    });\n    return !!result;\n  };\n\n  // Determine if at least one element in the object matches a truth test.\n  // Delegates to **ECMAScript 5**'s native `some` if available.\n  // Aliased as `any`.\n  var any = _.some = _.any = function(obj, iterator, context) {\n    iterator || (iterator = _.identity);\n    var result = false;\n    if (obj == null) return result;\n    if (nativeSome && obj.some === nativeSome) return obj.some(iterator, context);\n    each(obj, function(value, index, list) {\n      if (result || (result = iterator.call(context, value, index, list))) return breaker;\n    });\n    return !!result;\n  };\n\n  // Determine if the array or object contains a given value (using `===`).\n  // Aliased as `include`.\n  _.contains = _.include = function(obj, target) {\n    if (obj == null) return false;\n    if (nativeIndexOf && obj.indexOf === nativeIndexOf) return obj.indexOf(target) != -1;\n    return any(obj, function(value) {\n      return value === target;\n    });\n  };\n\n  // Invoke a method (with arguments) on every item in a collection.\n  _.invoke = function(obj, method) {\n    var args = slice.call(arguments, 2);\n    var isFunc = _.isFunction(method);\n    return _.map(obj, function(value) {\n      return (isFunc ? method : value[method]).apply(value, args);\n    });\n  };\n\n  // Convenience version of a common use case of `map`: fetching a property.\n  _.pluck = function(obj, key) {\n    return _.map(obj, function(value){ return value[key]; });\n  };\n\n  // Convenience version of a common use case of `filter`: selecting only objects\n  // containing specific `key:value` pairs.\n  _.where = function(obj, attrs, first) {\n    if (_.isEmpty(attrs)) return first ? null : [];\n    return _[first ? 'find' : 'filter'](obj, function(value) {\n      for (var key in attrs) {\n        if (attrs[key] !== value[key]) return false;\n      }\n      return true;\n    });\n  };\n\n  // Convenience version of a common use case of `find`: getting the first object\n  // containing specific `key:value` pairs.\n  _.findWhere = function(obj, attrs) {\n    return _.where(obj, attrs, true);\n  };\n\n  // Return the maximum element or (element-based computation).\n  // Can't optimize arrays of integers longer than 65,535 elements.\n  // See: https://bugs.webkit.org/show_bug.cgi?id=80797\n  _.max = function(obj, iterator, context) {\n    if (!iterator && _.isArray(obj) && obj[0] === +obj[0] && obj.length < 65535) {\n      return Math.max.apply(Math, obj);\n    }\n    if (!iterator && _.isEmpty(obj)) return -Infinity;\n    var result = {computed : -Infinity, value: -Infinity};\n    each(obj, function(value, index, list) {\n      var computed = iterator ? iterator.call(context, value, index, list) : value;\n      computed >= result.computed && (result = {value : value, computed : computed});\n    });\n    return result.value;\n  };\n\n  // Return the minimum element (or element-based computation).\n  _.min = function(obj, iterator, context) {\n    if (!iterator && _.isArray(obj) && obj[0] === +obj[0] && obj.length < 65535) {\n      return Math.min.apply(Math, obj);\n    }\n    if (!iterator && _.isEmpty(obj)) return Infinity;\n    var result = {computed : Infinity, value: Infinity};\n    each(obj, function(value, index, list) {\n      var computed = iterator ? iterator.call(context, value, index, list) : value;\n      computed < result.computed && (result = {value : value, computed : computed});\n    });\n    return result.value;\n  };\n\n  // Shuffle an array.\n  _.shuffle = function(obj) {\n    var rand;\n    var index = 0;\n    var shuffled = [];\n    each(obj, function(value) {\n      rand = _.random(index++);\n      shuffled[index - 1] = shuffled[rand];\n      shuffled[rand] = value;\n    });\n    return shuffled;\n  };\n\n  // An internal function to generate lookup iterators.\n  var lookupIterator = function(value) {\n    return _.isFunction(value) ? value : function(obj){ return obj[value]; };\n  };\n\n  // Sort the object's values by a criterion produced by an iterator.\n  _.sortBy = function(obj, value, context) {\n    var iterator = lookupIterator(value);\n    return _.pluck(_.map(obj, function(value, index, list) {\n      return {\n        value : value,\n        index : index,\n        criteria : iterator.call(context, value, index, list)\n      };\n    }).sort(function(left, right) {\n      var a = left.criteria;\n      var b = right.criteria;\n      if (a !== b) {\n        if (a > b || a === void 0) return 1;\n        if (a < b || b === void 0) return -1;\n      }\n      return left.index < right.index ? -1 : 1;\n    }), 'value');\n  };\n\n  // An internal function used for aggregate \"group by\" operations.\n  var group = function(obj, value, context, behavior) {\n    var result = {};\n    var iterator = lookupIterator(value || _.identity);\n    each(obj, function(value, index) {\n      var key = iterator.call(context, value, index, obj);\n      behavior(result, key, value);\n    });\n    return result;\n  };\n\n  // Groups the object's values by a criterion. Pass either a string attribute\n  // to group by, or a function that returns the criterion.\n  _.groupBy = function(obj, value, context) {\n    return group(obj, value, context, function(result, key, value) {\n      (_.has(result, key) ? result[key] : (result[key] = [])).push(value);\n    });\n  };\n\n  // Counts instances of an object that group by a certain criterion. Pass\n  // either a string attribute to count by, or a function that returns the\n  // criterion.\n  _.countBy = function(obj, value, context) {\n    return group(obj, value, context, function(result, key) {\n      if (!_.has(result, key)) result[key] = 0;\n      result[key]++;\n    });\n  };\n\n  // Use a comparator function to figure out the smallest index at which\n  // an object should be inserted so as to maintain order. Uses binary search.\n  _.sortedIndex = function(array, obj, iterator, context) {\n    iterator = iterator == null ? _.identity : lookupIterator(iterator);\n    var value = iterator.call(context, obj);\n    var low = 0, high = array.length;\n    while (low < high) {\n      var mid = (low + high) >>> 1;\n      iterator.call(context, array[mid]) < value ? low = mid + 1 : high = mid;\n    }\n    return low;\n  };\n\n  // Safely convert anything iterable into a real, live array.\n  _.toArray = function(obj) {\n    if (!obj) return [];\n    if (_.isArray(obj)) return slice.call(obj);\n    if (obj.length === +obj.length) return _.map(obj, _.identity);\n    return _.values(obj);\n  };\n\n  // Return the number of elements in an object.\n  _.size = function(obj) {\n    if (obj == null) return 0;\n    return (obj.length === +obj.length) ? obj.length : _.keys(obj).length;\n  };\n\n  // Array Functions\n  // ---------------\n\n  // Get the first element of an array. Passing **n** will return the first N\n  // values in the array. Aliased as `head` and `take`. The **guard** check\n  // allows it to work with `_.map`.\n  _.first = _.head = _.take = function(array, n, guard) {\n    if (array == null) return void 0;\n    return (n != null) && !guard ? slice.call(array, 0, n) : array[0];\n  };\n\n  // Returns everything but the last entry of the array. Especially useful on\n  // the arguments object. Passing **n** will return all the values in\n  // the array, excluding the last N. The **guard** check allows it to work with\n  // `_.map`.\n  _.initial = function(array, n, guard) {\n    return slice.call(array, 0, array.length - ((n == null) || guard ? 1 : n));\n  };\n\n  // Get the last element of an array. Passing **n** will return the last N\n  // values in the array. The **guard** check allows it to work with `_.map`.\n  _.last = function(array, n, guard) {\n    if (array == null) return void 0;\n    if ((n != null) && !guard) {\n      return slice.call(array, Math.max(array.length - n, 0));\n    } else {\n      return array[array.length - 1];\n    }\n  };\n\n  // Returns everything but the first entry of the array. Aliased as `tail` and `drop`.\n  // Especially useful on the arguments object. Passing an **n** will return\n  // the rest N values in the array. The **guard**\n  // check allows it to work with `_.map`.\n  _.rest = _.tail = _.drop = function(array, n, guard) {\n    return slice.call(array, (n == null) || guard ? 1 : n);\n  };\n\n  // Trim out all falsy values from an array.\n  _.compact = function(array) {\n    return _.filter(array, _.identity);\n  };\n\n  // Internal implementation of a recursive `flatten` function.\n  var flatten = function(input, shallow, output) {\n    each(input, function(value) {\n      if (_.isArray(value)) {\n        shallow ? push.apply(output, value) : flatten(value, shallow, output);\n      } else {\n        output.push(value);\n      }\n    });\n    return output;\n  };\n\n  // Return a completely flattened version of an array.\n  _.flatten = function(array, shallow) {\n    return flatten(array, shallow, []);\n  };\n\n  // Return a version of the array that does not contain the specified value(s).\n  _.without = function(array) {\n    return _.difference(array, slice.call(arguments, 1));\n  };\n\n  // Produce a duplicate-free version of the array. If the array has already\n  // been sorted, you have the option of using a faster algorithm.\n  // Aliased as `unique`.\n  _.uniq = _.unique = function(array, isSorted, iterator, context) {\n    if (_.isFunction(isSorted)) {\n      context = iterator;\n      iterator = isSorted;\n      isSorted = false;\n    }\n    var initial = iterator ? _.map(array, iterator, context) : array;\n    var results = [];\n    var seen = [];\n    each(initial, function(value, index) {\n      if (isSorted ? (!index || seen[seen.length - 1] !== value) : !_.contains(seen, value)) {\n        seen.push(value);\n        results.push(array[index]);\n      }\n    });\n    return results;\n  };\n\n  // Produce an array that contains the union: each distinct element from all of\n  // the passed-in arrays.\n  _.union = function() {\n    return _.uniq(concat.apply(ArrayProto, arguments));\n  };\n\n  // Produce an array that contains every item shared between all the\n  // passed-in arrays.\n  _.intersection = function(array) {\n    var rest = slice.call(arguments, 1);\n    return _.filter(_.uniq(array), function(item) {\n      return _.every(rest, function(other) {\n        return _.indexOf(other, item) >= 0;\n      });\n    });\n  };\n\n  // Take the difference between one array and a number of other arrays.\n  // Only the elements present in just the first array will remain.\n  _.difference = function(array) {\n    var rest = concat.apply(ArrayProto, slice.call(arguments, 1));\n    return _.filter(array, function(value){ return !_.contains(rest, value); });\n  };\n\n  // Zip together multiple lists into a single array -- elements that share\n  // an index go together.\n  _.zip = function() {\n    var args = slice.call(arguments);\n    var length = _.max(_.pluck(args, 'length'));\n    var results = new Array(length);\n    for (var i = 0; i < length; i++) {\n      results[i] = _.pluck(args, \"\" + i);\n    }\n    return results;\n  };\n\n  // Converts lists into objects. Pass either a single array of `[key, value]`\n  // pairs, or two parallel arrays of the same length -- one of keys, and one of\n  // the corresponding values.\n  _.object = function(list, values) {\n    if (list == null) return {};\n    var result = {};\n    for (var i = 0, l = list.length; i < l; i++) {\n      if (values) {\n        result[list[i]] = values[i];\n      } else {\n        result[list[i][0]] = list[i][1];\n      }\n    }\n    return result;\n  };\n\n  // If the browser doesn't supply us with indexOf (I'm looking at you, **MSIE**),\n  // we need this function. Return the position of the first occurrence of an\n  // item in an array, or -1 if the item is not included in the array.\n  // Delegates to **ECMAScript 5**'s native `indexOf` if available.\n  // If the array is large and already in sort order, pass `true`\n  // for **isSorted** to use binary search.\n  _.indexOf = function(array, item, isSorted) {\n    if (array == null) return -1;\n    var i = 0, l = array.length;\n    if (isSorted) {\n      if (typeof isSorted == 'number') {\n        i = (isSorted < 0 ? Math.max(0, l + isSorted) : isSorted);\n      } else {\n        i = _.sortedIndex(array, item);\n        return array[i] === item ? i : -1;\n      }\n    }\n    if (nativeIndexOf && array.indexOf === nativeIndexOf) return array.indexOf(item, isSorted);\n    for (; i < l; i++) if (array[i] === item) return i;\n    return -1;\n  };\n\n  // Delegates to **ECMAScript 5**'s native `lastIndexOf` if available.\n  _.lastIndexOf = function(array, item, from) {\n    if (array == null) return -1;\n    var hasIndex = from != null;\n    if (nativeLastIndexOf && array.lastIndexOf === nativeLastIndexOf) {\n      return hasIndex ? array.lastIndexOf(item, from) : array.lastIndexOf(item);\n    }\n    var i = (hasIndex ? from : array.length);\n    while (i--) if (array[i] === item) return i;\n    return -1;\n  };\n\n  // Generate an integer Array containing an arithmetic progression. A port of\n  // the native Python `range()` function. See\n  // [the Python documentation](http://docs.python.org/library/functions.html#range).\n  _.range = function(start, stop, step) {\n    if (arguments.length <= 1) {\n      stop = start || 0;\n      start = 0;\n    }\n    step = arguments[2] || 1;\n\n    var len = Math.max(Math.ceil((stop - start) / step), 0);\n    var idx = 0;\n    var range = new Array(len);\n\n    while(idx < len) {\n      range[idx++] = start;\n      start += step;\n    }\n\n    return range;\n  };\n\n  // Function (ahem) Functions\n  // ------------------\n\n  // Create a function bound to a given object (assigning `this`, and arguments,\n  // optionally). Delegates to **ECMAScript 5**'s native `Function.bind` if\n  // available.\n  _.bind = function(func, context) {\n    if (func.bind === nativeBind && nativeBind) return nativeBind.apply(func, slice.call(arguments, 1));\n    var args = slice.call(arguments, 2);\n    return function() {\n      return func.apply(context, args.concat(slice.call(arguments)));\n    };\n  };\n\n  // Partially apply a function by creating a version that has had some of its\n  // arguments pre-filled, without changing its dynamic `this` context.\n  _.partial = function(func) {\n    var args = slice.call(arguments, 1);\n    return function() {\n      return func.apply(this, args.concat(slice.call(arguments)));\n    };\n  };\n\n  // Bind all of an object's methods to that object. Useful for ensuring that\n  // all callbacks defined on an object belong to it.\n  _.bindAll = function(obj) {\n    var funcs = slice.call(arguments, 1);\n    if (funcs.length === 0) funcs = _.functions(obj);\n    each(funcs, function(f) { obj[f] = _.bind(obj[f], obj); });\n    return obj;\n  };\n\n  // Memoize an expensive function by storing its results.\n  _.memoize = function(func, hasher) {\n    var memo = {};\n    hasher || (hasher = _.identity);\n    return function() {\n      var key = hasher.apply(this, arguments);\n      return _.has(memo, key) ? memo[key] : (memo[key] = func.apply(this, arguments));\n    };\n  };\n\n  // Delays a function for the given number of milliseconds, and then calls\n  // it with the arguments supplied.\n  _.delay = function(func, wait) {\n    var args = slice.call(arguments, 2);\n    return setTimeout(function(){ return func.apply(null, args); }, wait);\n  };\n\n  // Defers a function, scheduling it to run after the current call stack has\n  // cleared.\n  _.defer = function(func) {\n    return _.delay.apply(_, [func, 1].concat(slice.call(arguments, 1)));\n  };\n\n  // Returns a function, that, when invoked, will only be triggered at most once\n  // during a given window of time.\n  _.throttle = function(func, wait) {\n    var context, args, timeout, result;\n    var previous = 0;\n    var later = function() {\n      previous = new Date;\n      timeout = null;\n      result = func.apply(context, args);\n    };\n    return function() {\n      var now = new Date;\n      var remaining = wait - (now - previous);\n      context = this;\n      args = arguments;\n      if (remaining <= 0) {\n        clearTimeout(timeout);\n        timeout = null;\n        previous = now;\n        result = func.apply(context, args);\n      } else if (!timeout) {\n        timeout = setTimeout(later, remaining);\n      }\n      return result;\n    };\n  };\n\n  // Returns a function, that, as long as it continues to be invoked, will not\n  // be triggered. The function will be called after it stops being called for\n  // N milliseconds. If `immediate` is passed, trigger the function on the\n  // leading edge, instead of the trailing.\n  _.debounce = function(func, wait, immediate) {\n    var timeout, result;\n    return function() {\n      var context = this, args = arguments;\n      var later = function() {\n        timeout = null;\n        if (!immediate) result = func.apply(context, args);\n      };\n      var callNow = immediate && !timeout;\n      clearTimeout(timeout);\n      timeout = setTimeout(later, wait);\n      if (callNow) result = func.apply(context, args);\n      return result;\n    };\n  };\n\n  // Returns a function that will be executed at most one time, no matter how\n  // often you call it. Useful for lazy initialization.\n  _.once = function(func) {\n    var ran = false, memo;\n    return function() {\n      if (ran) return memo;\n      ran = true;\n      memo = func.apply(this, arguments);\n      func = null;\n      return memo;\n    };\n  };\n\n  // Returns the first function passed as an argument to the second,\n  // allowing you to adjust arguments, run code before and after, and\n  // conditionally execute the original function.\n  _.wrap = function(func, wrapper) {\n    return function() {\n      var args = [func];\n      push.apply(args, arguments);\n      return wrapper.apply(this, args);\n    };\n  };\n\n  // Returns a function that is the composition of a list of functions, each\n  // consuming the return value of the function that follows.\n  _.compose = function() {\n    var funcs = arguments;\n    return function() {\n      var args = arguments;\n      for (var i = funcs.length - 1; i >= 0; i--) {\n        args = [funcs[i].apply(this, args)];\n      }\n      return args[0];\n    };\n  };\n\n  // Returns a function that will only be executed after being called N times.\n  _.after = function(times, func) {\n    if (times <= 0) return func();\n    return function() {\n      if (--times < 1) {\n        return func.apply(this, arguments);\n      }\n    };\n  };\n\n  // Object Functions\n  // ----------------\n\n  // Retrieve the names of an object's properties.\n  // Delegates to **ECMAScript 5**'s native `Object.keys`\n  _.keys = nativeKeys || function(obj) {\n    if (obj !== Object(obj)) throw new TypeError('Invalid object');\n    var keys = [];\n    for (var key in obj) if (_.has(obj, key)) keys[keys.length] = key;\n    return keys;\n  };\n\n  // Retrieve the values of an object's properties.\n  _.values = function(obj) {\n    var values = [];\n    for (var key in obj) if (_.has(obj, key)) values.push(obj[key]);\n    return values;\n  };\n\n  // Convert an object into a list of `[key, value]` pairs.\n  _.pairs = function(obj) {\n    var pairs = [];\n    for (var key in obj) if (_.has(obj, key)) pairs.push([key, obj[key]]);\n    return pairs;\n  };\n\n  // Invert the keys and values of an object. The values must be serializable.\n  _.invert = function(obj) {\n    var result = {};\n    for (var key in obj) if (_.has(obj, key)) result[obj[key]] = key;\n    return result;\n  };\n\n  // Return a sorted list of the function names available on the object.\n  // Aliased as `methods`\n  _.functions = _.methods = function(obj) {\n    var names = [];\n    for (var key in obj) {\n      if (_.isFunction(obj[key])) names.push(key);\n    }\n    return names.sort();\n  };\n\n  // Extend a given object with all the properties in passed-in object(s).\n  _.extend = function(obj) {\n    each(slice.call(arguments, 1), function(source) {\n      if (source) {\n        for (var prop in source) {\n          obj[prop] = source[prop];\n        }\n      }\n    });\n    return obj;\n  };\n\n  // Return a copy of the object only containing the whitelisted properties.\n  _.pick = function(obj) {\n    var copy = {};\n    var keys = concat.apply(ArrayProto, slice.call(arguments, 1));\n    each(keys, function(key) {\n      if (key in obj) copy[key] = obj[key];\n    });\n    return copy;\n  };\n\n   // Return a copy of the object without the blacklisted properties.\n  _.omit = function(obj) {\n    var copy = {};\n    var keys = concat.apply(ArrayProto, slice.call(arguments, 1));\n    for (var key in obj) {\n      if (!_.contains(keys, key)) copy[key] = obj[key];\n    }\n    return copy;\n  };\n\n  // Fill in a given object with default properties.\n  _.defaults = function(obj) {\n    each(slice.call(arguments, 1), function(source) {\n      if (source) {\n        for (var prop in source) {\n          if (obj[prop] == null) obj[prop] = source[prop];\n        }\n      }\n    });\n    return obj;\n  };\n\n  // Create a (shallow-cloned) duplicate of an object.\n  _.clone = function(obj) {\n    if (!_.isObject(obj)) return obj;\n    return _.isArray(obj) ? obj.slice() : _.extend({}, obj);\n  };\n\n  // Invokes interceptor with the obj, and then returns obj.\n  // The primary purpose of this method is to \"tap into\" a method chain, in\n  // order to perform operations on intermediate results within the chain.\n  _.tap = function(obj, interceptor) {\n    interceptor(obj);\n    return obj;\n  };\n\n  // Internal recursive comparison function for `isEqual`.\n  var eq = function(a, b, aStack, bStack) {\n    // Identical objects are equal. `0 === -0`, but they aren't identical.\n    // See the Harmony `egal` proposal: http://wiki.ecmascript.org/doku.php?id=harmony:egal.\n    if (a === b) return a !== 0 || 1 / a == 1 / b;\n    // A strict comparison is necessary because `null == undefined`.\n    if (a == null || b == null) return a === b;\n    // Unwrap any wrapped objects.\n    if (a instanceof _) a = a._wrapped;\n    if (b instanceof _) b = b._wrapped;\n    // Compare `[[Class]]` names.\n    var className = toString.call(a);\n    if (className != toString.call(b)) return false;\n    switch (className) {\n      // Strings, numbers, dates, and booleans are compared by value.\n      case '[object String]':\n        // Primitives and their corresponding object wrappers are equivalent; thus, `\"5\"` is\n        // equivalent to `new String(\"5\")`.\n        return a == String(b);\n      case '[object Number]':\n        // `NaN`s are equivalent, but non-reflexive. An `egal` comparison is performed for\n        // other numeric values.\n        return a != +a ? b != +b : (a == 0 ? 1 / a == 1 / b : a == +b);\n      case '[object Date]':\n      case '[object Boolean]':\n        // Coerce dates and booleans to numeric primitive values. Dates are compared by their\n        // millisecond representations. Note that invalid dates with millisecond representations\n        // of `NaN` are not equivalent.\n        return +a == +b;\n      // RegExps are compared by their source patterns and flags.\n      case '[object RegExp]':\n        return a.source == b.source &&\n               a.global == b.global &&\n               a.multiline == b.multiline &&\n               a.ignoreCase == b.ignoreCase;\n    }\n    if (typeof a != 'object' || typeof b != 'object') return false;\n    // Assume equality for cyclic structures. The algorithm for detecting cyclic\n    // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.\n    var length = aStack.length;\n    while (length--) {\n      // Linear search. Performance is inversely proportional to the number of\n      // unique nested structures.\n      if (aStack[length] == a) return bStack[length] == b;\n    }\n    // Add the first object to the stack of traversed objects.\n    aStack.push(a);\n    bStack.push(b);\n    var size = 0, result = true;\n    // Recursively compare objects and arrays.\n    if (className == '[object Array]') {\n      // Compare array lengths to determine if a deep comparison is necessary.\n      size = a.length;\n      result = size == b.length;\n      if (result) {\n        // Deep compare the contents, ignoring non-numeric properties.\n        while (size--) {\n          if (!(result = eq(a[size], b[size], aStack, bStack))) break;\n        }\n      }\n    } else {\n      // Objects with different constructors are not equivalent, but `Object`s\n      // from different frames are.\n      var aCtor = a.constructor, bCtor = b.constructor;\n      if (aCtor !== bCtor && !(_.isFunction(aCtor) && (aCtor instanceof aCtor) &&\n                               _.isFunction(bCtor) && (bCtor instanceof bCtor))) {\n        return false;\n      }\n      // Deep compare objects.\n      for (var key in a) {\n        if (_.has(a, key)) {\n          // Count the expected number of properties.\n          size++;\n          // Deep compare each member.\n          if (!(result = _.has(b, key) && eq(a[key], b[key], aStack, bStack))) break;\n        }\n      }\n      // Ensure that both objects contain the same number of properties.\n      if (result) {\n        for (key in b) {\n          if (_.has(b, key) && !(size--)) break;\n        }\n        result = !size;\n      }\n    }\n    // Remove the first object from the stack of traversed objects.\n    aStack.pop();\n    bStack.pop();\n    return result;\n  };\n\n  // Perform a deep comparison to check if two objects are equal.\n  _.isEqual = function(a, b) {\n    return eq(a, b, [], []);\n  };\n\n  // Is a given array, string, or object empty?\n  // An \"empty\" object has no enumerable own-properties.\n  _.isEmpty = function(obj) {\n    if (obj == null) return true;\n    if (_.isArray(obj) || _.isString(obj)) return obj.length === 0;\n    for (var key in obj) if (_.has(obj, key)) return false;\n    return true;\n  };\n\n  // Is a given value a DOM element?\n  _.isElement = function(obj) {\n    return !!(obj && obj.nodeType === 1);\n  };\n\n  // Is a given value an array?\n  // Delegates to ECMA5's native Array.isArray\n  _.isArray = nativeIsArray || function(obj) {\n    return toString.call(obj) == '[object Array]';\n  };\n\n  // Is a given variable an object?\n  _.isObject = function(obj) {\n    return obj === Object(obj);\n  };\n\n  // Add some isType methods: isArguments, isFunction, isString, isNumber, isDate, isRegExp.\n  each(['Arguments', 'Function', 'String', 'Number', 'Date', 'RegExp'], function(name) {\n    _['is' + name] = function(obj) {\n      return toString.call(obj) == '[object ' + name + ']';\n    };\n  });\n\n  // Define a fallback version of the method in browsers (ahem, IE), where\n  // there isn't any inspectable \"Arguments\" type.\n  if (!_.isArguments(arguments)) {\n    _.isArguments = function(obj) {\n      return !!(obj && _.has(obj, 'callee'));\n    };\n  }\n\n  // Optimize `isFunction` if appropriate.\n  if (typeof (/./) !== 'function') {\n    _.isFunction = function(obj) {\n      return typeof obj === 'function';\n    };\n  }\n\n  // Is a given object a finite number?\n  _.isFinite = function(obj) {\n    return isFinite(obj) && !isNaN(parseFloat(obj));\n  };\n\n  // Is the given value `NaN`? (NaN is the only number which does not equal itself).\n  _.isNaN = function(obj) {\n    return _.isNumber(obj) && obj != +obj;\n  };\n\n  // Is a given value a boolean?\n  _.isBoolean = function(obj) {\n    return obj === true || obj === false || toString.call(obj) == '[object Boolean]';\n  };\n\n  // Is a given value equal to null?\n  _.isNull = function(obj) {\n    return obj === null;\n  };\n\n  // Is a given variable undefined?\n  _.isUndefined = function(obj) {\n    return obj === void 0;\n  };\n\n  // Shortcut function for checking if an object has a given property directly\n  // on itself (in other words, not on a prototype).\n  _.has = function(obj, key) {\n    return hasOwnProperty.call(obj, key);\n  };\n\n  // Utility Functions\n  // -----------------\n\n  // Run Underscore.js in *noConflict* mode, returning the `_` variable to its\n  // previous owner. Returns a reference to the Underscore object.\n  _.noConflict = function() {\n    root._ = previousUnderscore;\n    return this;\n  };\n\n  // Keep the identity function around for default iterators.\n  _.identity = function(value) {\n    return value;\n  };\n\n  // Run a function **n** times.\n  _.times = function(n, iterator, context) {\n    var accum = Array(n);\n    for (var i = 0; i < n; i++) accum[i] = iterator.call(context, i);\n    return accum;\n  };\n\n  // Return a random integer between min and max (inclusive).\n  _.random = function(min, max) {\n    if (max == null) {\n      max = min;\n      min = 0;\n    }\n    return min + Math.floor(Math.random() * (max - min + 1));\n  };\n\n  // List of HTML entities for escaping.\n  var entityMap = {\n    escape: {\n      '&': '&amp;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '\"': '&quot;',\n      \"'\": '&#x27;',\n      '/': '&#x2F;'\n    }\n  };\n  entityMap.unescape = _.invert(entityMap.escape);\n\n  // Regexes containing the keys and values listed immediately above.\n  var entityRegexes = {\n    escape:   new RegExp('[' + _.keys(entityMap.escape).join('') + ']', 'g'),\n    unescape: new RegExp('(' + _.keys(entityMap.unescape).join('|') + ')', 'g')\n  };\n\n  // Functions for escaping and unescaping strings to/from HTML interpolation.\n  _.each(['escape', 'unescape'], function(method) {\n    _[method] = function(string) {\n      if (string == null) return '';\n      return ('' + string).replace(entityRegexes[method], function(match) {\n        return entityMap[method][match];\n      });\n    };\n  });\n\n  // If the value of the named property is a function then invoke it;\n  // otherwise, return it.\n  _.result = function(object, property) {\n    if (object == null) return null;\n    var value = object[property];\n    return _.isFunction(value) ? value.call(object) : value;\n  };\n\n  // Add your own custom functions to the Underscore object.\n  _.mixin = function(obj) {\n    each(_.functions(obj), function(name){\n      var func = _[name] = obj[name];\n      _.prototype[name] = function() {\n        var args = [this._wrapped];\n        push.apply(args, arguments);\n        return result.call(this, func.apply(_, args));\n      };\n    });\n  };\n\n  // Generate a unique integer id (unique within the entire client session).\n  // Useful for temporary DOM ids.\n  var idCounter = 0;\n  _.uniqueId = function(prefix) {\n    var id = ++idCounter + '';\n    return prefix ? prefix + id : id;\n  };\n\n  // By default, Underscore uses ERB-style template delimiters, change the\n  // following template settings to use alternative delimiters.\n  _.templateSettings = {\n    evaluate    : /<%([\\s\\S]+?)%>/g,\n    interpolate : /<%=([\\s\\S]+?)%>/g,\n    escape      : /<%-([\\s\\S]+?)%>/g\n  };\n\n  // When customizing `templateSettings`, if you don't want to define an\n  // interpolation, evaluation or escaping regex, we need one that is\n  // guaranteed not to match.\n  var noMatch = /(.)^/;\n\n  // Certain characters need to be escaped so that they can be put into a\n  // string literal.\n  var escapes = {\n    \"'\":      \"'\",\n    '\\\\':     '\\\\',\n    '\\r':     'r',\n    '\\n':     'n',\n    '\\t':     't',\n    '\\u2028': 'u2028',\n    '\\u2029': 'u2029'\n  };\n\n  var escaper = /\\\\|'|\\r|\\n|\\t|\\u2028|\\u2029/g;\n\n  // JavaScript micro-templating, similar to John Resig's implementation.\n  // Underscore templating handles arbitrary delimiters, preserves whitespace,\n  // and correctly escapes quotes within interpolated code.\n  _.template = function(text, data, settings) {\n    var render;\n    settings = _.defaults({}, settings, _.templateSettings);\n\n    // Combine delimiters into one regular expression via alternation.\n    var matcher = new RegExp([\n      (settings.escape || noMatch).source,\n      (settings.interpolate || noMatch).source,\n      (settings.evaluate || noMatch).source\n    ].join('|') + '|$', 'g');\n\n    // Compile the template source, escaping string literals appropriately.\n    var index = 0;\n    var source = \"__p+='\";\n    text.replace(matcher, function(match, escape, interpolate, evaluate, offset) {\n      source += text.slice(index, offset)\n        .replace(escaper, function(match) { return '\\\\' + escapes[match]; });\n\n      if (escape) {\n        source += \"'+\\n((__t=(\" + escape + \"))==null?'':_.escape(__t))+\\n'\";\n      }\n      if (interpolate) {\n        source += \"'+\\n((__t=(\" + interpolate + \"))==null?'':__t)+\\n'\";\n      }\n      if (evaluate) {\n        source += \"';\\n\" + evaluate + \"\\n__p+='\";\n      }\n      index = offset + match.length;\n      return match;\n    });\n    source += \"';\\n\";\n\n    // If a variable is not specified, place data values in local scope.\n    if (!settings.variable) source = 'with(obj||{}){\\n' + source + '}\\n';\n\n    source = \"var __t,__p='',__j=Array.prototype.join,\" +\n      \"print=function(){__p+=__j.call(arguments,'');};\\n\" +\n      source + \"return __p;\\n\";\n\n    try {\n      render = new Function(settings.variable || 'obj', '_', source);\n    } catch (e) {\n      e.source = source;\n      throw e;\n    }\n\n    if (data) return render(data, _);\n    var template = function(data) {\n      return render.call(this, data, _);\n    };\n\n    // Provide the compiled function source as a convenience for precompilation.\n    template.source = 'function(' + (settings.variable || 'obj') + '){\\n' + source + '}';\n\n    return template;\n  };\n\n  // Add a \"chain\" function, which will delegate to the wrapper.\n  _.chain = function(obj) {\n    return _(obj).chain();\n  };\n\n  // OOP\n  // ---------------\n  // If Underscore is called as a function, it returns a wrapped object that\n  // can be used OO-style. This wrapper holds altered versions of all the\n  // underscore functions. Wrapped objects may be chained.\n\n  // Helper function to continue chaining intermediate results.\n  var result = function(obj) {\n    return this._chain ? _(obj).chain() : obj;\n  };\n\n  // Add all of the Underscore functions to the wrapper object.\n  _.mixin(_);\n\n  // Add all mutator Array functions to the wrapper.\n  each(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(name) {\n    var method = ArrayProto[name];\n    _.prototype[name] = function() {\n      var obj = this._wrapped;\n      method.apply(obj, arguments);\n      if ((name == 'shift' || name == 'splice') && obj.length === 0) delete obj[0];\n      return result.call(this, obj);\n    };\n  });\n\n  // Add all accessor Array functions to the wrapper.\n  each(['concat', 'join', 'slice'], function(name) {\n    var method = ArrayProto[name];\n    _.prototype[name] = function() {\n      return result.call(this, method.apply(this._wrapped, arguments));\n    };\n  });\n\n  _.extend(_.prototype, {\n\n    // Start chaining a wrapped Underscore object.\n    chain: function() {\n      this._chain = true;\n      return this;\n    },\n\n    // Extracts the result from a wrapped and chained object.\n    value: function() {\n      return this._wrapped;\n    }\n\n  });\n\n}).call(this);\n","//[4]   \tNameStartChar\t   ::=   \t\":\" | [A-Z] | \"_\" | [a-z] | [#xC0-#xD6] | [#xD8-#xF6] | [#xF8-#x2FF] | [#x370-#x37D] | [#x37F-#x1FFF] | [#x200C-#x200D] | [#x2070-#x218F] | [#x2C00-#x2FEF] | [#x3001-#xD7FF] | [#xF900-#xFDCF] | [#xFDF0-#xFFFD] | [#x10000-#xEFFFF]\r\n//[4a]   \tNameChar\t   ::=   \tNameStartChar | \"-\" | \".\" | [0-9] | #xB7 | [#x0300-#x036F] | [#x203F-#x2040]\r\n//[5]   \tName\t   ::=   \tNameStartChar (NameChar)*\r\nvar nameStartChar = /[A-Z_a-z\\xC0-\\xD6\\xD8-\\xF6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]///\\u10000-\\uEFFFF\r\nvar nameChar = new RegExp(\"[\\\\-\\\\.0-9\"+nameStartChar.source.slice(1,-1)+\"\\u00B7\\u0300-\\u036F\\\\ux203F-\\u2040]\");\r\nvar tagNamePattern = new RegExp('^'+nameStartChar.source+nameChar.source+'*(?:\\:'+nameStartChar.source+nameChar.source+'*)?$');\r\n//var tagNamePattern = /^[a-zA-Z_][\\w\\-\\.]*(?:\\:[a-zA-Z_][\\w\\-\\.]*)?$/\r\n//var handlers = 'resolveEntity,getExternalSubset,characters,endDocument,endElement,endPrefixMapping,ignorableWhitespace,processingInstruction,setDocumentLocator,skippedEntity,startDocument,startElement,startPrefixMapping,notationDecl,unparsedEntityDecl,error,fatalError,warning,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,comment,endCDATA,endDTD,endEntity,startCDATA,startDTD,startEntity'.split(',')\r\n\r\n//S_TAG,\tS_ATTR,\tS_EQ,\tS_V\r\n//S_ATTR_S,\tS_E,\tS_S,\tS_C\r\nvar S_TAG = 0;//tag name offerring\r\nvar S_ATTR = 1;//attr name offerring \r\nvar S_ATTR_S=2;//attr name end and space offer\r\nvar S_EQ = 3;//=space?\r\nvar S_V = 4;//attr value(no quot value only)\r\nvar S_E = 5;//attr value end and no space(quot end)\r\nvar S_S = 6;//(attr value end || tag end ) && (space offer)\r\nvar S_C = 7;//closed el<el />\r\n\r\nfunction XMLReader(){\r\n}\r\n\r\nXMLReader.prototype = {\r\n\tparse:function(source,defaultNSMap,entityMap){\r\n\t\tvar domBuilder = this.domBuilder;\r\n\t\tdomBuilder.startDocument();\r\n\t\t_copy(defaultNSMap ,defaultNSMap = {})\r\n\t\tparse(source,defaultNSMap,entityMap,\r\n\t\t\t\tdomBuilder,this.errorHandler);\r\n\t\tdomBuilder.endDocument();\r\n\t}\r\n}\r\nfunction parse(source,defaultNSMapCopy,entityMap,domBuilder,errorHandler){\r\n\tfunction entityReplacer(a){\r\n\t\tvar k = a.slice(1,-1);\r\n\t\tif(k in entityMap){\r\n\t\t\treturn entityMap[k]; \r\n\t\t}else if(k.charAt(0) === '#'){\r\n\t\t\treturn String.fromCharCode(parseInt(k.substr(1).replace('x','0x')))\r\n\t\t}else{\r\n\t\t\terrorHandler.error('entity not found:'+a);\r\n\t\t\treturn a;\r\n\t\t}\r\n\t}\r\n\tfunction appendText(end){//has some bugs\r\n\t\tvar xt = source.substring(start,end).replace(/&#?\\w+;/g,entityReplacer);\r\n\t\tlocator&&position(start);\r\n\t\tdomBuilder.characters(xt,0,end-start);\r\n\t\tstart = end\r\n\t}\r\n\tfunction position(start,m){\r\n\t\twhile(start>=endPos && (m = linePattern.exec(source))){\r\n\t\t\tstartPos = m.index;\r\n\t\t\tendPos = startPos + m[0].length;\r\n\t\t\tlocator.lineNumber++;\r\n\t\t\t//console.log('line++:',locator,startPos,endPos)\r\n\t\t}\r\n\t\tlocator.columnNumber = start-startPos+1;\r\n\t}\r\n\tvar startPos = 0;\r\n\tvar endPos = 0;\r\n\tvar linePattern = /.+(?:\\r\\n?|\\n)|.*$/g\r\n\tvar locator = domBuilder.locator;\r\n\t\r\n\tvar parseStack = [{currentNSMap:defaultNSMapCopy}]\r\n\tvar closeMap = {};\r\n\tvar start = 0;\r\n\twhile(true){\r\n\t\tvar i = source.indexOf('<',start);\r\n\t\tif(i>start){\r\n\t\t\tappendText(i);\r\n\t\t}\r\n\t\tswitch(source.charAt(i+1)){\r\n\t\tcase '/':\r\n\t\t\tvar end = source.indexOf('>',i+3);\r\n\t\t\tvar tagName = source.substring(i+2,end);\r\n\t\t\tvar config = parseStack.pop();\r\n\t\t\tvar localNSMap = config.localNSMap;\r\n\t\t\t\r\n\t        if(config.tagName != tagName){\r\n\t            errorHandler.fatalError(\"end tag name: \"+tagName+' is not match the current start tagName:'+config.tagName );\r\n\t        }\r\n\t\t\tdomBuilder.endElement(config.uri,config.localName,tagName);\r\n\t\t\tif(localNSMap){\r\n\t\t\t\tfor(var prefix in localNSMap){\r\n\t\t\t\t\tdomBuilder.endPrefixMapping(prefix) ;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tend++;\r\n\t\t\tbreak;\r\n\t\t\t// end elment\r\n\t\tcase '?':// <?...?>\r\n\t\t\tlocator&&position(i);\r\n\t\t\tend = parseInstruction(source,i,domBuilder);\r\n\t\t\tbreak;\r\n\t\tcase '!':// <!doctype,<![CDATA,<!--\r\n\t\t\tlocator&&position(i);\r\n\t\t\tend = parseDCC(source,i,domBuilder);\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tif(i<0){\r\n\t\t\t\tif(!source.substr(start).match(/^\\s*$/)){\r\n\t\t\t\t\terrorHandler.error('source code out of document root');\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}else{\r\n\t\t\t\ttry{\r\n\t\t\t\t\tlocator&&position(i);\r\n\t\t\t\t\tvar el = new ElementAttributes();\r\n\t\t\t\t\t//elStartEnd\r\n\t\t\t\t\tvar end = parseElementStartPart(source,i,el,entityReplacer,errorHandler);\r\n\t\t\t\t\tvar len = el.length;\r\n\t\t\t\t\t//position fixed\r\n\t\t\t\t\tif(len && locator){\r\n\t\t\t\t\t\tvar backup = copyLocator(locator,{});\r\n\t\t\t\t\t\tfor(var i = 0;i<len;i++){\r\n\t\t\t\t\t\t\tvar a = el[i];\r\n\t\t\t\t\t\t\tposition(a.offset);\r\n\t\t\t\t\t\t\ta.offset = copyLocator(locator,{});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcopyLocator(backup,locator);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tel.closed = el.closed||fixSelfClosed(source,end,el.tagName,closeMap);\r\n\t\t\t\t\tappendElement(el,domBuilder,parseStack);\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(el.uri === 'http://www.w3.org/1999/xhtml' && !el.closed){\r\n\t\t\t\t\t\tend = parseHtmlSpecialContent(source,end,el.tagName,entityReplacer,domBuilder)\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tend++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}catch(e){\r\n\t\t\t\t\terrorHandler.error('element parse error: '+e);\r\n\t\t\t\t\tend = -1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tif(end<0){\r\n\t\t\t//TODO: sax\r\n\t\t\tappendText(i+1);\r\n\t\t}else{\r\n\t\t\tstart = end;\r\n\t\t}\r\n\t}\r\n}\r\nfunction copyLocator(f,t){\r\n\tt.lineNumber = f.lineNumber;\r\n\tt.columnNumber = f.columnNumber;\r\n\treturn t;\r\n\t\r\n}\r\n\r\n/**\r\n * @see #appendElement(source,elStartEnd,el,selfClosed,entityReplacer,domBuilder,parseStack);\r\n * @return end of the elementStartPart(end of elementEndPart for selfClosed el)\r\n */\r\nfunction parseElementStartPart(source,start,el,entityReplacer,errorHandler){\r\n\tvar attrName;\r\n\tvar value;\r\n\tvar p = ++start;\r\n\tvar s = S_TAG;//status\r\n\twhile(true){\r\n\t\tvar c = source.charAt(p);\r\n\t\tswitch(c){\r\n\t\tcase '=':\r\n\t\t\tif(s === S_ATTR){//attrName\r\n\t\t\t\tattrName = source.slice(start,p);\r\n\t\t\t\ts = S_EQ;\r\n\t\t\t}else if(s === S_ATTR_S){\r\n\t\t\t\ts = S_EQ;\r\n\t\t\t}else{\r\n\t\t\t\t//fatalError: equal must after attrName or space after attrName\r\n\t\t\t\tthrow new Error('attribute equal must after attrName');\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase '\\'':\r\n\t\tcase '\"':\r\n\t\t\tif(s === S_EQ){//equal\r\n\t\t\t\tstart = p+1;\r\n\t\t\t\tp = source.indexOf(c,start)\r\n\t\t\t\tif(p>0){\r\n\t\t\t\t\tvalue = source.slice(start,p).replace(/&#?\\w+;/g,entityReplacer);\r\n\t\t\t\t\tel.add(attrName,value,start-1);\r\n\t\t\t\t\ts = S_E;\r\n\t\t\t\t}else{\r\n\t\t\t\t\t//fatalError: no end quot match\r\n\t\t\t\t\tthrow new Error('attribute value no end \\''+c+'\\' match');\r\n\t\t\t\t}\r\n\t\t\t}else if(s == S_V){\r\n\t\t\t\tvalue = source.slice(start,p).replace(/&#?\\w+;/g,entityReplacer);\r\n\t\t\t\t//console.log(attrName,value,start,p)\r\n\t\t\t\tel.add(attrName,value,start);\r\n\t\t\t\t//console.dir(el)\r\n\t\t\t\terrorHandler.warning('attribute \"'+attrName+'\" missed start quot('+c+')!!');\r\n\t\t\t\tstart = p+1;\r\n\t\t\t\ts = S_E\r\n\t\t\t}else{\r\n\t\t\t\t//fatalError: no equal before\r\n\t\t\t\tthrow new Error('attribute value must after \"=\"');\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase '/':\r\n\t\t\tswitch(s){\r\n\t\t\tcase S_TAG:\r\n\t\t\t\tel.setTagName(source.slice(start,p));\r\n\t\t\tcase S_E:\r\n\t\t\tcase S_S:\r\n\t\t\tcase S_C:\r\n\t\t\t\ts = S_C;\r\n\t\t\t\tel.closed = true;\r\n\t\t\tcase S_V:\r\n\t\t\tcase S_ATTR:\r\n\t\t\tcase S_ATTR_S:\r\n\t\t\t\tbreak;\r\n\t\t\t//case S_EQ:\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new Error(\"attribute invalid close char('/')\")\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase '>':\r\n\t\t\tswitch(s){\r\n\t\t\tcase S_TAG:\r\n\t\t\t\tel.setTagName(source.slice(start,p));\r\n\t\t\tcase S_E:\r\n\t\t\tcase S_S:\r\n\t\t\tcase S_C:\r\n\t\t\t\tbreak;//normal\r\n\t\t\tcase S_V://Compatible state\r\n\t\t\tcase S_ATTR:\r\n\t\t\t\tvalue = source.slice(start,p);\r\n\t\t\t\tif(value.slice(-1) === '/'){\r\n\t\t\t\t\tel.closed  = true;\r\n\t\t\t\t\tvalue = value.slice(0,-1)\r\n\t\t\t\t}\r\n\t\t\tcase S_ATTR_S:\r\n\t\t\t\tif(s === S_ATTR_S){\r\n\t\t\t\t\tvalue = attrName;\r\n\t\t\t\t}\r\n\t\t\t\tif(s == S_V){\r\n\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed quot(\")!!');\r\n\t\t\t\t\tel.add(attrName,value.replace(/&#?\\w+;/g,entityReplacer),start)\r\n\t\t\t\t}else{\r\n\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed value!! \"'+value+'\" instead!!')\r\n\t\t\t\t\tel.add(value,value,start)\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase S_EQ:\r\n\t\t\t\tthrow new Error('attribute value missed!!');\r\n\t\t\t}\r\n//\t\t\tconsole.log(tagName,tagNamePattern,tagNamePattern.test(tagName))\r\n\t\t\treturn p;\r\n\t\t/*xml space '\\x20' | #x9 | #xD | #xA; */\r\n\t\tcase '\\u0080':\r\n\t\t\tc = ' ';\r\n\t\tdefault:\r\n\t\t\tif(c<= ' '){//space\r\n\t\t\t\tswitch(s){\r\n\t\t\t\tcase S_TAG:\r\n\t\t\t\t\tel.setTagName(source.slice(start,p));//tagName\r\n\t\t\t\t\ts = S_S;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase S_ATTR:\r\n\t\t\t\t\tattrName = source.slice(start,p)\r\n\t\t\t\t\ts = S_ATTR_S;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase S_V:\r\n\t\t\t\t\tvar value = source.slice(start,p).replace(/&#?\\w+;/g,entityReplacer);\r\n\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed quot(\")!!');\r\n\t\t\t\t\tel.add(attrName,value,start)\r\n\t\t\t\tcase S_E:\r\n\t\t\t\t\ts = S_S;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t//case S_S:\r\n\t\t\t\t//case S_EQ:\r\n\t\t\t\t//case S_ATTR_S:\r\n\t\t\t\t//\tvoid();break;\r\n\t\t\t\t//case S_C:\r\n\t\t\t\t\t//ignore warning\r\n\t\t\t\t}\r\n\t\t\t}else{//not space\r\n//S_TAG,\tS_ATTR,\tS_EQ,\tS_V\r\n//S_ATTR_S,\tS_E,\tS_S,\tS_C\r\n\t\t\t\tswitch(s){\r\n\t\t\t\t//case S_TAG:void();break;\r\n\t\t\t\t//case S_ATTR:void();break;\r\n\t\t\t\t//case S_V:void();break;\r\n\t\t\t\tcase S_ATTR_S:\r\n\t\t\t\t\terrorHandler.warning('attribute \"'+attrName+'\" missed value!! \"'+attrName+'\" instead!!')\r\n\t\t\t\t\tel.add(attrName,attrName,start);\r\n\t\t\t\t\tstart = p;\r\n\t\t\t\t\ts = S_ATTR;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase S_E:\r\n\t\t\t\t\terrorHandler.warning('attribute space is required\"'+attrName+'\"!!')\r\n\t\t\t\tcase S_S:\r\n\t\t\t\t\ts = S_ATTR;\r\n\t\t\t\t\tstart = p;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase S_EQ:\r\n\t\t\t\t\ts = S_V;\r\n\t\t\t\t\tstart = p;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase S_C:\r\n\t\t\t\t\tthrow new Error(\"elements closed character '/' and '>' must be connected to\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tp++;\r\n\t}\r\n}\r\n/**\r\n * @return end of the elementStartPart(end of elementEndPart for selfClosed el)\r\n */\r\nfunction appendElement(el,domBuilder,parseStack){\r\n\tvar tagName = el.tagName;\r\n\tvar localNSMap = null;\r\n\tvar currentNSMap = parseStack[parseStack.length-1].currentNSMap;\r\n\tvar i = el.length;\r\n\twhile(i--){\r\n\t\tvar a = el[i];\r\n\t\tvar qName = a.qName;\r\n\t\tvar value = a.value;\r\n\t\tvar nsp = qName.indexOf(':');\r\n\t\tif(nsp>0){\r\n\t\t\tvar prefix = a.prefix = qName.slice(0,nsp);\r\n\t\t\tvar localName = qName.slice(nsp+1);\r\n\t\t\tvar nsPrefix = prefix === 'xmlns' && localName\r\n\t\t}else{\r\n\t\t\tlocalName = qName;\r\n\t\t\tprefix = null\r\n\t\t\tnsPrefix = qName === 'xmlns' && ''\r\n\t\t}\r\n\t\t//can not set prefix,because prefix !== ''\r\n\t\ta.localName = localName ;\r\n\t\t//prefix == null for no ns prefix attribute \r\n\t\tif(nsPrefix !== false){//hack!!\r\n\t\t\tif(localNSMap == null){\r\n\t\t\t\tlocalNSMap = {}\r\n\t\t\t\t_copy(currentNSMap,currentNSMap={})\r\n\t\t\t}\r\n\t\t\tcurrentNSMap[nsPrefix] = localNSMap[nsPrefix] = value;\r\n\t\t\ta.uri = 'http://www.w3.org/2000/xmlns/'\r\n\t\t\tdomBuilder.startPrefixMapping(nsPrefix, value) \r\n\t\t}\r\n\t}\r\n\tvar i = el.length;\r\n\twhile(i--){\r\n\t\ta = el[i];\r\n\t\tvar prefix = a.prefix;\r\n\t\tif(prefix){//no prefix attribute has no namespace\r\n\t\t\tif(prefix === 'xml'){\r\n\t\t\t\ta.uri = 'http://www.w3.org/XML/1998/namespace';\r\n\t\t\t}if(prefix !== 'xmlns'){\r\n\t\t\t\ta.uri = currentNSMap[prefix]\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tvar nsp = tagName.indexOf(':');\r\n\tif(nsp>0){\r\n\t\tprefix = el.prefix = tagName.slice(0,nsp);\r\n\t\tlocalName = el.localName = tagName.slice(nsp+1);\r\n\t}else{\r\n\t\tprefix = null;//important!!\r\n\t\tlocalName = el.localName = tagName;\r\n\t}\r\n\t//no prefix element has default namespace\r\n\tvar ns = el.uri = currentNSMap[prefix || ''];\r\n\tdomBuilder.startElement(ns,localName,tagName,el);\r\n\t//endPrefixMapping and startPrefixMapping have not any help for dom builder\r\n\t//localNSMap = null\r\n\tif(el.closed){\r\n\t\tdomBuilder.endElement(ns,localName,tagName);\r\n\t\tif(localNSMap){\r\n\t\t\tfor(prefix in localNSMap){\r\n\t\t\t\tdomBuilder.endPrefixMapping(prefix) \r\n\t\t\t}\r\n\t\t}\r\n\t}else{\r\n\t\tel.currentNSMap = currentNSMap;\r\n\t\tel.localNSMap = localNSMap;\r\n\t\tparseStack.push(el);\r\n\t}\r\n}\r\nfunction parseHtmlSpecialContent(source,elStartEnd,tagName,entityReplacer,domBuilder){\r\n\tif(/^(?:script|textarea)$/i.test(tagName)){\r\n\t\tvar elEndStart =  source.indexOf('</'+tagName+'>',elStartEnd);\r\n\t\tvar text = source.substring(elStartEnd+1,elEndStart);\r\n\t\tif(/[&<]/.test(text)){\r\n\t\t\tif(/^script$/i.test(tagName)){\r\n\t\t\t\t//if(!/\\]\\]>/.test(text)){\r\n\t\t\t\t\t//lexHandler.startCDATA();\r\n\t\t\t\t\tdomBuilder.characters(text,0,text.length);\r\n\t\t\t\t\t//lexHandler.endCDATA();\r\n\t\t\t\t\treturn elEndStart;\r\n\t\t\t\t//}\r\n\t\t\t}//}else{//text area\r\n\t\t\t\ttext = text.replace(/&#?\\w+;/g,entityReplacer);\r\n\t\t\t\tdomBuilder.characters(text,0,text.length);\r\n\t\t\t\treturn elEndStart;\r\n\t\t\t//}\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\treturn elStartEnd+1;\r\n}\r\nfunction fixSelfClosed(source,elStartEnd,tagName,closeMap){\r\n\t//if(tagName in closeMap){\r\n\tvar pos = closeMap[tagName];\r\n\tif(pos == null){\r\n\t\t//console.log(tagName)\r\n\t\tpos = closeMap[tagName] = source.lastIndexOf('</'+tagName+'>')\r\n\t}\r\n\treturn pos<elStartEnd;\r\n\t//} \r\n}\r\nfunction _copy(source,target){\r\n\tfor(var n in source){target[n] = source[n]}\r\n}\r\nfunction parseDCC(source,start,domBuilder){//sure start with '<!'\r\n\tvar next= source.charAt(start+2)\r\n\tswitch(next){\r\n\tcase '-':\r\n\t\tif(source.charAt(start + 3) === '-'){\r\n\t\t\tvar end = source.indexOf('-->',start+4);\r\n\t\t\t//append comment source.substring(4,end)//<!--\r\n\t\t\tdomBuilder.comment(source,start+4,end-start-4);\r\n\t\t\treturn end+3;\r\n\t\t}else{\r\n\t\t\t//error\r\n\t\t\treturn -1;\r\n\t\t}\r\n\tcase '[':\r\n\t\tif(source.substr(start+3,6) == 'CDATA['){\r\n\t\t\tvar end = source.indexOf(']]>',start+9);\r\n\t\t\tdomBuilder.startCDATA();\r\n\t\t\tdomBuilder.characters(source,start+9,end-start-9);\r\n\t\t\tdomBuilder.endCDATA() \r\n\t\t\treturn end+3;\r\n\t\t}\r\n\t\t//<!DOCTYPE\r\n\t\t//startDTD(java.lang.String name, java.lang.String publicId, java.lang.String systemId) \r\n\t\tvar matchs = split(source,start);\r\n\t\tvar len = matchs.length;\r\n\t\tif(len>1 && /!doctype/i.test(matchs[0][0])){\r\n\t\t\tvar name = matchs[1][0];\r\n\t\t\tvar pubid = len>3 && /^public$/i.test(matchs[2][0]) && matchs[3][0]\r\n\t\t\tvar sysid = len>4 && matchs[4][0];\r\n\t\t\tvar lastMatch = matchs[len-1]\r\n\t\t\tdomBuilder.startDTD(name,pubid,sysid);\r\n\t\t\tdomBuilder.endDTD();\r\n\t\t\t\r\n\t\t\treturn lastMatch.index+lastMatch[0].length\r\n\t\t}\r\n\t}\r\n\treturn -1;\r\n}\r\n\r\n\r\n\r\nfunction parseInstruction(source,start,domBuilder){\r\n\tvar end = source.indexOf('?>',start);\r\n\tif(end){\r\n\t\tvar match = source.substring(start,end).match(/^<\\?(\\S*)\\s*([\\s\\S]*?)\\s*$/);\r\n\t\tif(match){\r\n\t\t\tvar len = match[0].length;\r\n\t\t\tdomBuilder.processingInstruction(match[1], match[2]) ;\r\n\t\t\treturn end+2;\r\n\t\t}else{//error\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t}\r\n\treturn -1;\r\n}\r\n\r\n/**\r\n * @param source\r\n */\r\nfunction ElementAttributes(source){\r\n\t\r\n}\r\nElementAttributes.prototype = {\r\n\tsetTagName:function(tagName){\r\n\t\tif(!tagNamePattern.test(tagName)){\r\n\t\t\tthrow new Error('invalid tagName:'+tagName)\r\n\t\t}\r\n\t\tthis.tagName = tagName\r\n\t},\r\n\tadd:function(qName,value,offset){\r\n\t\tif(!tagNamePattern.test(qName)){\r\n\t\t\tthrow new Error('invalid attribute:'+qName)\r\n\t\t}\r\n\t\tthis[this.length++] = {qName:qName,value:value,offset:offset}\r\n\t},\r\n\tlength:0,\r\n\tgetLocalName:function(i){return this[i].localName},\r\n\tgetOffset:function(i){return this[i].offset},\r\n\tgetQName:function(i){return this[i].qName},\r\n\tgetURI:function(i){return this[i].uri},\r\n\tgetValue:function(i){return this[i].value}\r\n//\t,getIndex:function(uri, localName)){\r\n//\t\tif(localName){\r\n//\t\t\t\r\n//\t\t}else{\r\n//\t\t\tvar qName = uri\r\n//\t\t}\r\n//\t},\r\n//\tgetValue:function(){return this.getValue(this.getIndex.apply(this,arguments))},\r\n//\tgetType:function(uri,localName){}\r\n//\tgetType:function(i){},\r\n}\r\n\r\n\r\n\r\n\r\nfunction _set_proto_(thiz,parent){\r\n\tthiz.__proto__ = parent;\r\n\treturn thiz;\r\n}\r\nif(!(_set_proto_({},_set_proto_.prototype) instanceof _set_proto_)){\r\n\t_set_proto_ = function(thiz,parent){\r\n\t\tfunction p(){};\r\n\t\tp.prototype = parent;\r\n\t\tp = new p();\r\n\t\tfor(parent in thiz){\r\n\t\t\tp[parent] = thiz[parent];\r\n\t\t}\r\n\t\treturn p;\r\n\t}\r\n}\r\n\r\nfunction split(source,start){\r\n\tvar match;\r\n\tvar buf = [];\r\n\tvar reg = /'[^']+'|\"[^\"]+\"|[^\\s<>\\/=]+=?|(\\/?\\s*>|<)/g;\r\n\treg.lastIndex = start;\r\n\treg.exec(source);//skip <\r\n\twhile(match = reg.exec(source)){\r\n\t\tbuf.push(match);\r\n\t\tif(match[1])return buf;\r\n\t}\r\n}\r\n\r\nif(typeof require == 'function'){\r\n\texports.XMLReader = XMLReader;\r\n}\r\n\r\nif(typeof require == 'function'){\r\nexports.XMLReader=XMLReader;\r\n}","/*\n * DOM Level 2\n * Object DOMException\n * @see http://www.w3.org/TR/REC-DOM-Level-1/ecma-script-language-binding.html\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/ecma-script-binding.html\n */\n\nfunction copy(src,dest){\n\tfor(var p in src){\n\t\tdest[p] = src[p];\n\t}\n}\n/**\n^\\w+\\.prototype\\.([_\\w]+)\\s*=\\s*((?:.*\\{\\s*?[\\r\\n][\\s\\S]*?^})|\\S.*?(?=[;\\r\\n]));?\n^\\w+\\.prototype\\.([_\\w]+)\\s*=\\s*(\\S.*?(?=[;\\r\\n]));?\n */\nfunction _extends(Class,Super){\n\tvar pt = Class.prototype;\n\tif(Object.create){\n\t\tvar ppt = Object.create(Super.prototype)\n\t\tpt.__proto__ = ppt;\n\t}\n\tif(!(pt instanceof Super)){\n\t\tfunction t(){};\n\t\tt.prototype = Super.prototype;\n\t\tt = new t();\n\t\tcopy(pt,t);\n\t\tClass.prototype = pt = t;\n\t}\n\tif(pt.constructor != Class){\n\t\tif(typeof Class != 'function'){\n\t\t\tconsole.error(\"unknow Class:\"+Class)\n\t\t}\n\t\tpt.constructor = Class\n\t}\n}\nvar htmlns = 'http://www.w3.org/1999/xhtml' ;\n// Node Types\nvar NodeType = {}\nvar ELEMENT_NODE                = NodeType.ELEMENT_NODE                = 1;\nvar ATTRIBUTE_NODE              = NodeType.ATTRIBUTE_NODE              = 2;\nvar TEXT_NODE                   = NodeType.TEXT_NODE                   = 3;\nvar CDATA_SECTION_NODE          = NodeType.CDATA_SECTION_NODE          = 4;\nvar ENTITY_REFERENCE_NODE       = NodeType.ENTITY_REFERENCE_NODE       = 5;\nvar ENTITY_NODE                 = NodeType.ENTITY_NODE                 = 6;\nvar PROCESSING_INSTRUCTION_NODE = NodeType.PROCESSING_INSTRUCTION_NODE = 7;\nvar COMMENT_NODE                = NodeType.COMMENT_NODE                = 8;\nvar DOCUMENT_NODE               = NodeType.DOCUMENT_NODE               = 9;\nvar DOCUMENT_TYPE_NODE          = NodeType.DOCUMENT_TYPE_NODE          = 10;\nvar DOCUMENT_FRAGMENT_NODE      = NodeType.DOCUMENT_FRAGMENT_NODE      = 11;\nvar NOTATION_NODE               = NodeType.NOTATION_NODE               = 12;\n\n// ExceptionCode\nvar ExceptionCode = {}\nvar ExceptionMessage = {};\nvar INDEX_SIZE_ERR              = ExceptionCode.INDEX_SIZE_ERR              = ((ExceptionMessage[1]=\"Index size error\"),1);\nvar DOMSTRING_SIZE_ERR          = ExceptionCode.DOMSTRING_SIZE_ERR          = ((ExceptionMessage[2]=\"DOMString size error\"),2);\nvar HIERARCHY_REQUEST_ERR       = ExceptionCode.HIERARCHY_REQUEST_ERR       = ((ExceptionMessage[3]=\"Hierarchy request error\"),3);\nvar WRONG_DOCUMENT_ERR          = ExceptionCode.WRONG_DOCUMENT_ERR          = ((ExceptionMessage[4]=\"Wrong document\"),4);\nvar INVALID_CHARACTER_ERR       = ExceptionCode.INVALID_CHARACTER_ERR       = ((ExceptionMessage[5]=\"Invalid character\"),5);\nvar NO_DATA_ALLOWED_ERR         = ExceptionCode.NO_DATA_ALLOWED_ERR         = ((ExceptionMessage[6]=\"No data allowed\"),6);\nvar NO_MODIFICATION_ALLOWED_ERR = ExceptionCode.NO_MODIFICATION_ALLOWED_ERR = ((ExceptionMessage[7]=\"No modification allowed\"),7);\nvar NOT_FOUND_ERR               = ExceptionCode.NOT_FOUND_ERR               = ((ExceptionMessage[8]=\"Not found\"),8);\nvar NOT_SUPPORTED_ERR           = ExceptionCode.NOT_SUPPORTED_ERR           = ((ExceptionMessage[9]=\"Not supported\"),9);\nvar INUSE_ATTRIBUTE_ERR         = ExceptionCode.INUSE_ATTRIBUTE_ERR         = ((ExceptionMessage[10]=\"Attribute in use\"),10);\n//level2\nvar INVALID_STATE_ERR        \t= ExceptionCode.INVALID_STATE_ERR        \t= ((ExceptionMessage[11]=\"Invalid state\"),11);\nvar SYNTAX_ERR               \t= ExceptionCode.SYNTAX_ERR               \t= ((ExceptionMessage[12]=\"Syntax error\"),12);\nvar INVALID_MODIFICATION_ERR \t= ExceptionCode.INVALID_MODIFICATION_ERR \t= ((ExceptionMessage[13]=\"Invalid modification\"),13);\nvar NAMESPACE_ERR            \t= ExceptionCode.NAMESPACE_ERR           \t= ((ExceptionMessage[14]=\"Invalid namespace\"),14);\nvar INVALID_ACCESS_ERR       \t= ExceptionCode.INVALID_ACCESS_ERR      \t= ((ExceptionMessage[15]=\"Invalid access\"),15);\n\n\nfunction DOMException(code, message) {\n\tif(message instanceof Error){\n\t\tvar error = message;\n\t}else{\n\t\terror = this;\n\t\tError.call(this, ExceptionMessage[code]);\n\t\tthis.message = ExceptionMessage[code];\n\t\tif(Error.captureStackTrace) Error.captureStackTrace(this, DOMException);\n\t}\n\terror.code = code;\n\tif(message) this.message = this.message + \": \" + message;\n\treturn error;\n};\nDOMException.prototype = Error.prototype;\ncopy(ExceptionCode,DOMException)\n/**\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-536297177\n * The NodeList interface provides the abstraction of an ordered collection of nodes, without defining or constraining how this collection is implemented. NodeList objects in the DOM are live.\n * The items in the NodeList are accessible via an integral index, starting from 0.\n */\nfunction NodeList() {\n};\nNodeList.prototype = {\n\t/**\n\t * The number of nodes in the list. The range of valid child node indices is 0 to length-1 inclusive.\n\t * @standard level1\n\t */\n\tlength:0, \n\t/**\n\t * Returns the indexth item in the collection. If index is greater than or equal to the number of nodes in the list, this returns null.\n\t * @standard level1\n\t * @param index  unsigned long \n\t *   Index into the collection.\n\t * @return Node\n\t * \tThe node at the indexth position in the NodeList, or null if that is not a valid index. \n\t */\n\titem: function(index) {\n\t\treturn this[index] || null;\n\t}\n};\nfunction LiveNodeList(node,refresh){\n\tthis._node = node;\n\tthis._refresh = refresh\n\t_updateLiveList(this);\n}\nfunction _updateLiveList(list){\n\tvar inc = list._node._inc || list._node.ownerDocument._inc;\n\tif(list._inc != inc){\n\t\tvar ls = list._refresh(list._node);\n\t\t//console.log(ls.length)\n\t\t__set__(list,'length',ls.length);\n\t\tcopy(ls,list);\n\t\tlist._inc = inc;\n\t}\n}\nLiveNodeList.prototype.item = function(i){\n\t_updateLiveList(this);\n\treturn this[i];\n}\n\n_extends(LiveNodeList,NodeList);\n/**\n * \n * Objects implementing the NamedNodeMap interface are used to represent collections of nodes that can be accessed by name. Note that NamedNodeMap does not inherit from NodeList; NamedNodeMaps are not maintained in any particular order. Objects contained in an object implementing NamedNodeMap may also be accessed by an ordinal index, but this is simply to allow convenient enumeration of the contents of a NamedNodeMap, and does not imply that the DOM specifies an order to these Nodes.\n * NamedNodeMap objects in the DOM are live.\n * used for attributes or DocumentType entities \n */\nfunction NamedNodeMap() {\n};\n\nfunction _findNodeIndex(list,node){\n\tvar i = list.length;\n\twhile(i--){\n\t\tif(list[i] === node){return i}\n\t}\n}\n\nfunction _addNamedNode(el,list,newAttr,oldAttr){\n\tif(oldAttr){\n\t\tlist[_findNodeIndex(list,oldAttr)] = newAttr;\n\t}else{\n\t\tlist[list.length++] = newAttr;\n\t}\n\tif(el){\n\t\tnewAttr.ownerElement = el;\n\t\tvar doc = el.ownerDocument;\n\t\tif(doc){\n\t\t\toldAttr && _onRemoveAttribute(doc,el,oldAttr);\n\t\t\t_onAddAttribute(doc,el,newAttr);\n\t\t}\n\t}\n}\nfunction _removeNamedNode(el,list,attr){\n\tvar i = _findNodeIndex(list,attr);\n\tif(i>=0){\n\t\tvar lastIndex = list.length-1\n\t\twhile(i<lastIndex){\n\t\t\tlist[i] = list[++i]\n\t\t}\n\t\tlist.length = lastIndex;\n\t\tif(el){\n\t\t\tvar doc = el.ownerDocument;\n\t\t\tif(doc){\n\t\t\t\t_onRemoveAttribute(doc,el,attr);\n\t\t\t\tattr.ownerElement = null;\n\t\t\t}\n\t\t}\n\t}else{\n\t\tthrow DOMException(NOT_FOUND_ERR,new Error())\n\t}\n}\nNamedNodeMap.prototype = {\n\tlength:0,\n\titem:NodeList.prototype.item,\n\tgetNamedItem: function(key) {\n//\t\tif(key.indexOf(':')>0 || key == 'xmlns'){\n//\t\t\treturn null;\n//\t\t}\n\t\tvar i = this.length;\n\t\twhile(i--){\n\t\t\tvar attr = this[i];\n\t\t\tif(attr.nodeName == key){\n\t\t\t\treturn attr;\n\t\t\t}\n\t\t}\n\t},\n\tsetNamedItem: function(attr) {\n\t\tvar el = attr.ownerElement;\n\t\tif(el && el!=this._ownerElement){\n\t\t\tthrow new DOMException(INUSE_ATTRIBUTE_ERR);\n\t\t}\n\t\tvar oldAttr = this.getNamedItem(attr.nodeName);\n\t\t_addNamedNode(this._ownerElement,this,attr,oldAttr);\n\t\treturn oldAttr;\n\t},\n\t/* returns Node */\n\tsetNamedItemNS: function(attr) {// raises: WRONG_DOCUMENT_ERR,NO_MODIFICATION_ALLOWED_ERR,INUSE_ATTRIBUTE_ERR\n\t\tvar el = attr.ownerElement, oldAttr;\n\t\tif(el && el!=this._ownerElement){\n\t\t\tthrow new DOMException(INUSE_ATTRIBUTE_ERR);\n\t\t}\n\t\toldAttr = this.getNamedItemNS(attr.namespaceURI,attr.localName);\n\t\t_addNamedNode(this._ownerElement,this,attr,oldAttr);\n\t\treturn oldAttr;\n\t},\n\n\t/* returns Node */\n\tremoveNamedItem: function(key) {\n\t\tvar attr = this.getNamedItem(key);\n\t\t_removeNamedNode(this._ownerElement,this,attr);\n\t\treturn attr;\n\t\t\n\t\t\n\t},// raises: NOT_FOUND_ERR,NO_MODIFICATION_ALLOWED_ERR\n\t\n\t//for level2\n\tremoveNamedItemNS:function(namespaceURI,localName){\n\t\tvar attr = this.getNamedItemNS(namespaceURI,localName);\n\t\t_removeNamedNode(this._ownerElement,this,attr);\n\t\treturn attr;\n\t},\n\tgetNamedItemNS: function(namespaceURI, localName) {\n\t\tvar i = this.length;\n\t\twhile(i--){\n\t\t\tvar node = this[i];\n\t\t\tif(node.localName == localName && node.namespaceURI == namespaceURI){\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n};\n/**\n * @see http://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-102161490\n */\nfunction DOMImplementation(/* Object */ features) {\n\tthis._features = {};\n\tif (features) {\n\t\tfor (var feature in features) {\n\t\t\t this._features = features[feature];\n\t\t}\n\t}\n};\n\nDOMImplementation.prototype = {\n\thasFeature: function(/* string */ feature, /* string */ version) {\n\t\tvar versions = this._features[feature.toLowerCase()];\n\t\tif (versions && (!version || version in versions)) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateDocument:function(namespaceURI,  qualifiedName, doctype){// raises:INVALID_CHARACTER_ERR,NAMESPACE_ERR,WRONG_DOCUMENT_ERR\n\t\tvar doc = new Document();\n\t\tdoc.doctype = doctype;\n\t\tif(doctype){\n\t\t\tdoc.appendChild(doctype);\n\t\t}\n\t\tdoc.implementation = this;\n\t\tdoc.childNodes = new NodeList();\n\t\tif(qualifiedName){\n\t\t\tvar root = doc.createElementNS(namespaceURI,qualifiedName);\n\t\t\tdoc.appendChild(root);\n\t\t}\n\t\treturn doc;\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateDocumentType:function(qualifiedName, publicId, systemId){// raises:INVALID_CHARACTER_ERR,NAMESPACE_ERR\n\t\tvar node = new DocumentType();\n\t\tnode.name = qualifiedName;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.publicId = publicId;\n\t\tnode.systemId = systemId;\n\t\t// Introduced in DOM Level 2:\n\t\t//readonly attribute DOMString        internalSubset;\n\t\t\n\t\t//TODO:..\n\t\t//  readonly attribute NamedNodeMap     entities;\n\t\t//  readonly attribute NamedNodeMap     notations;\n\t\treturn node;\n\t}\n};\n\n\n/**\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-1950641247\n */\n\nfunction Node() {\n};\n\nNode.prototype = {\n\tfirstChild : null,\n\tlastChild : null,\n\tpreviousSibling : null,\n\tnextSibling : null,\n\tattributes : null,\n\tparentNode : null,\n\tchildNodes : null,\n\townerDocument : null,\n\tnodeValue : null,\n\tnamespaceURI : null,\n\tprefix : null,\n\tlocalName : null,\n\t// Modified in DOM Level 2:\n\tinsertBefore:function(newChild, refChild){//raises \n\t\treturn _insertBefore(this,newChild,refChild);\n\t},\n\treplaceChild:function(newChild, oldChild){//raises \n\t\tthis.insertBefore(newChild,oldChild);\n\t\tif(oldChild){\n\t\t\tthis.removeChild(oldChild);\n\t\t}\n\t},\n\tremoveChild:function(oldChild){\n\t\treturn _removeChild(this,oldChild);\n\t},\n\tappendChild:function(newChild){\n\t\treturn this.insertBefore(newChild,null);\n\t},\n\thasChildNodes:function(){\n\t\treturn this.firstChild != null;\n\t},\n\tcloneNode:function(deep){\n\t\treturn cloneNode(this.ownerDocument||this,this,deep);\n\t},\n\t// Modified in DOM Level 2:\n\tnormalize:function(){\n\t\tvar child = this.firstChild;\n\t\twhile(child){\n\t\t\tvar next = child.nextSibling;\n\t\t\tif(next && next.nodeType == TEXT_NODE && child.nodeType == TEXT_NODE){\n\t\t\t\tthis.removeChild(next);\n\t\t\t\tchild.appendData(next.data);\n\t\t\t}else{\n\t\t\t\tchild.normalize();\n\t\t\t\tchild = next;\n\t\t\t}\n\t\t}\n\t},\n  \t// Introduced in DOM Level 2:\n\tisSupported:function(feature, version){\n\t\treturn this.ownerDocument.implementation.hasFeature(feature,version);\n\t},\n    // Introduced in DOM Level 2:\n    hasAttributes:function(){\n    \treturn this.attributes.length>0;\n    },\n    lookupPrefix:function(namespaceURI){\n    \tvar el = this;\n    \twhile(el){\n    \t\tvar map = el._nsMap;\n    \t\t//console.dir(map)\n    \t\tif(map){\n    \t\t\tfor(var n in map){\n    \t\t\t\tif(map[n] == namespaceURI){\n    \t\t\t\t\treturn n;\n    \t\t\t\t}\n    \t\t\t}\n    \t\t}\n    \t\tel = el.nodeType == 2?el.ownerDocument : el.parentNode;\n    \t}\n    \treturn null;\n    },\n    // Introduced in DOM Level 3:\n    lookupNamespaceURI:function(prefix){\n    \tvar el = this;\n    \twhile(el){\n    \t\tvar map = el._nsMap;\n    \t\t//console.dir(map)\n    \t\tif(map){\n    \t\t\tif(prefix in map){\n    \t\t\t\treturn map[prefix] ;\n    \t\t\t}\n    \t\t}\n    \t\tel = el.nodeType == 2?el.ownerDocument : el.parentNode;\n    \t}\n    \treturn null;\n    },\n    // Introduced in DOM Level 3:\n    isDefaultNamespace:function(namespaceURI){\n    \tvar prefix = this.lookupPrefix(namespaceURI);\n    \treturn prefix == null;\n    }\n};\n\n\nfunction _xmlEncoder(c){\n\treturn c == '<' && '&lt;' ||\n         c == '>' && '&gt;' ||\n         c == '&' && '&amp;' ||\n         c == '\"' && '&quot;' ||\n         '&#'+c.charCodeAt()+';'\n}\n\n\ncopy(NodeType,Node);\ncopy(NodeType,Node.prototype);\n\n/**\n * @param callback return true for continue,false for break\n * @return boolean true: break visit;\n */\nfunction _visitNode(node,callback){\n\tif(callback(node)){\n\t\treturn true;\n\t}\n\tif(node = node.firstChild){\n\t\tdo{\n\t\t\tif(_visitNode(node,callback)){return true}\n        }while(node=node.nextSibling)\n    }\n}\n\n\n\nfunction Document(){\n}\nfunction _onAddAttribute(doc,el,newAttr){\n\tdoc && doc._inc++;\n\tvar ns = newAttr.namespaceURI ;\n\tif(ns == 'http://www.w3.org/2000/xmlns/'){\n\t\t//update namespace\n\t\tel._nsMap[newAttr.prefix?newAttr.localName:''] = newAttr.value\n\t}\n}\nfunction _onRemoveAttribute(doc,el,newAttr,remove){\n\tdoc && doc._inc++;\n\tvar ns = newAttr.namespaceURI ;\n\tif(ns == 'http://www.w3.org/2000/xmlns/'){\n\t\t//update namespace\n\t\tdelete el._nsMap[newAttr.prefix?newAttr.localName:'']\n\t}\n}\nfunction _onUpdateChild(doc,el,newChild){\n\tif(doc && doc._inc){\n\t\tdoc._inc++;\n\t\t//update childNodes\n\t\tvar cs = el.childNodes;\n\t\tif(newChild){\n\t\t\tcs[cs.length++] = newChild;\n\t\t}else{\n\t\t\t//console.log(1)\n\t\t\tvar child = el.firstChild;\n\t\t\tvar i = 0;\n\t\t\twhile(child){\n\t\t\t\tcs[i++] = child;\n\t\t\t\tchild =child.nextSibling;\n\t\t\t}\n\t\t\tcs.length = i;\n\t\t}\n\t}\n}\n\n/**\n * attributes;\n * children;\n * \n * writeable properties:\n * nodeValue,Attr:value,CharacterData:data\n * prefix\n */\nfunction _removeChild(parentNode,child){\n\tvar previous = child.previousSibling;\n\tvar next = child.nextSibling;\n\tif(previous){\n\t\tprevious.nextSibling = next;\n\t}else{\n\t\tparentNode.firstChild = next\n\t}\n\tif(next){\n\t\tnext.previousSibling = previous;\n\t}else{\n\t\tparentNode.lastChild = previous;\n\t}\n\t_onUpdateChild(parentNode.ownerDocument,parentNode);\n\treturn child;\n}\n/**\n * preformance key(refChild == null)\n */\nfunction _insertBefore(parentNode,newChild,nextChild){\n\tvar cp = newChild.parentNode;\n\tif(cp){\n\t\tcp.removeChild(newChild);//remove and update\n\t}\n\tif(newChild.nodeType === DOCUMENT_FRAGMENT_NODE){\n\t\tvar newFirst = newChild.firstChild;\n\t\tvar newLast = newChild.lastChild;\n\t}else{\n\t\tnewFirst = newLast = newChild;\n\t}\n\tvar pre = nextChild ? nextChild.previousSibling : parentNode.lastChild;\n\n\tnewFirst.previousSibling = pre;\n\tnewLast.nextSibling = nextChild;\n\t\n\t\n\tif(pre){\n\t\tpre.nextSibling = newFirst;\n\t}else{\n\t\tparentNode.firstChild = newFirst;\n\t}\n\tif(nextChild == null){\n\t\tparentNode.lastChild = newLast;\n\t}else{\n\t\tnextChild.previousSibling = newLast;\n\t}\n\tdo{\n\t\tnewFirst.parentNode = parentNode;\n\t}while(newFirst !== newLast && (newFirst= newFirst.nextSibling))\n\t_onUpdateChild(parentNode.ownerDocument||parentNode,parentNode);\n\t//console.log(parentNode.lastChild.nextSibling == null)\n\tif (newChild.nodeType == DOCUMENT_FRAGMENT_NODE) {\n\t\tnewChild.firstChild = newChild.lastChild = null;\n\t}\n\treturn newChild;\n}\nfunction _appendSingleChild(parentNode,newChild){\n\tvar cp = newChild.parentNode;\n\tif(cp){\n\t\tvar pre = parentNode.lastChild;\n\t\tcp.removeChild(newChild);//remove and update\n\t\tvar pre = parentNode.lastChild;\n\t}\n\tvar pre = parentNode.lastChild;\n\tnewChild.parentNode = parentNode;\n\tnewChild.previousSibling = pre;\n\tnewChild.nextSibling = null;\n\tif(pre){\n\t\tpre.nextSibling = newChild;\n\t}else{\n\t\tparentNode.firstChild = newChild;\n\t}\n\tparentNode.lastChild = newChild;\n\t_onUpdateChild(parentNode.ownerDocument,parentNode,newChild);\n\treturn newChild;\n\t//console.log(\"__aa\",parentNode.lastChild.nextSibling == null)\n}\nDocument.prototype = {\n\t//implementation : null,\n\tnodeName :  '#document',\n\tnodeType :  DOCUMENT_NODE,\n\tdoctype :  null,\n\tdocumentElement :  null,\n\t_inc : 1,\n\t\n\tinsertBefore :  function(newChild, refChild){//raises \n\t\tif(newChild.nodeType == DOCUMENT_FRAGMENT_NODE){\n\t\t\tvar child = newChild.firstChild;\n\t\t\twhile(child){\n\t\t\t\tvar next = child.nextSibling;\n\t\t\t\tthis.insertBefore(child,refChild);\n\t\t\t\tchild = next;\n\t\t\t}\n\t\t\treturn newChild;\n\t\t}\n\t\tif(this.documentElement == null && newChild.nodeType == 1){\n\t\t\tthis.documentElement = newChild;\n\t\t}\n\t\t\n\t\treturn _insertBefore(this,newChild,refChild),(newChild.ownerDocument = this),newChild;\n\t},\n\tremoveChild :  function(oldChild){\n\t\tif(this.documentElement == oldChild){\n\t\t\tthis.documentElement = null;\n\t\t}\n\t\treturn _removeChild(this,oldChild);\n\t},\n\t// Introduced in DOM Level 2:\n\timportNode : function(importedNode,deep){\n\t\treturn importNode(this,importedNode,deep);\n\t},\n\t// Introduced in DOM Level 2:\n\tgetElementById :\tfunction(id){\n\t\tvar rtv = null;\n\t\t_visitNode(this.documentElement,function(node){\n\t\t\tif(node.nodeType == 1){\n\t\t\t\tif(node.getAttribute('id') == id){\n\t\t\t\t\trtv = node;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\treturn rtv;\n\t},\n\t\n\t//document factory method:\n\tcreateElement :\tfunction(tagName){\n\t\tvar node = new Element();\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = tagName;\n\t\tnode.tagName = tagName;\n\t\tnode.childNodes = new NodeList();\n\t\tvar attrs\t= node.attributes = new NamedNodeMap();\n\t\tattrs._ownerElement = node;\n\t\treturn node;\n\t},\n\tcreateDocumentFragment :\tfunction(){\n\t\tvar node = new DocumentFragment();\n\t\tnode.ownerDocument = this;\n\t\tnode.childNodes = new NodeList();\n\t\treturn node;\n\t},\n\tcreateTextNode :\tfunction(data){\n\t\tvar node = new Text();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data)\n\t\treturn node;\n\t},\n\tcreateComment :\tfunction(data){\n\t\tvar node = new Comment();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data)\n\t\treturn node;\n\t},\n\tcreateCDATASection :\tfunction(data){\n\t\tvar node = new CDATASection();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data)\n\t\treturn node;\n\t},\n\tcreateProcessingInstruction :\tfunction(target,data){\n\t\tvar node = new ProcessingInstruction();\n\t\tnode.ownerDocument = this;\n\t\tnode.tagName = node.target = target;\n\t\tnode.nodeValue= node.data = data;\n\t\treturn node;\n\t},\n\tcreateAttribute :\tfunction(name){\n\t\tvar node = new Attr();\n\t\tnode.ownerDocument\t= this;\n\t\tnode.name = name;\n\t\tnode.nodeName\t= name;\n\t\tnode.localName = name;\n\t\tnode.specified = true;\n\t\treturn node;\n\t},\n\tcreateEntityReference :\tfunction(name){\n\t\tvar node = new EntityReference();\n\t\tnode.ownerDocument\t= this;\n\t\tnode.nodeName\t= name;\n\t\treturn node;\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateElementNS :\tfunction(namespaceURI,qualifiedName){\n\t\tvar node = new Element();\n\t\tvar pl = qualifiedName.split(':');\n\t\tvar attrs\t= node.attributes = new NamedNodeMap();\n\t\tnode.childNodes = new NodeList();\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.tagName = qualifiedName;\n\t\tnode.namespaceURI = namespaceURI;\n\t\tif(pl.length == 2){\n\t\t\tnode.prefix = pl[0];\n\t\t\tnode.localName = pl[1];\n\t\t}else{\n\t\t\t//el.prefix = null;\n\t\t\tnode.localName = qualifiedName;\n\t\t}\n\t\tattrs._ownerElement = node;\n\t\treturn node;\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateAttributeNS :\tfunction(namespaceURI,qualifiedName){\n\t\tvar node = new Attr();\n\t\tvar pl = qualifiedName.split(':');\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.name = qualifiedName;\n\t\tnode.namespaceURI = namespaceURI;\n\t\tnode.specified = true;\n\t\tif(pl.length == 2){\n\t\t\tnode.prefix = pl[0];\n\t\t\tnode.localName = pl[1];\n\t\t}else{\n\t\t\t//el.prefix = null;\n\t\t\tnode.localName = qualifiedName;\n\t\t}\n\t\treturn node;\n\t}\n};\n_extends(Document,Node);\n\n\nfunction Element() {\n\tthis._nsMap = {};\n};\nElement.prototype = {\n\tnodeType : ELEMENT_NODE,\n\thasAttribute : function(name){\n\t\treturn this.getAttributeNode(name)!=null;\n\t},\n\tgetAttribute : function(name){\n\t\tvar attr = this.getAttributeNode(name);\n\t\treturn attr && attr.value || '';\n\t},\n\tgetAttributeNode : function(name){\n\t\treturn this.attributes.getNamedItem(name);\n\t},\n\tsetAttribute : function(name, value){\n\t\tvar attr = this.ownerDocument.createAttribute(name);\n\t\tattr.value = attr.nodeValue = \"\" + value;\n\t\tthis.setAttributeNode(attr)\n\t},\n\tremoveAttribute : function(name){\n\t\tvar attr = this.getAttributeNode(name)\n\t\tattr && this.removeAttributeNode(attr);\n\t},\n\t\n\t//four real opeartion method\n\tappendChild:function(newChild){\n\t\tif(newChild.nodeType === DOCUMENT_FRAGMENT_NODE){\n\t\t\treturn this.insertBefore(newChild,null);\n\t\t}else{\n\t\t\treturn _appendSingleChild(this,newChild);\n\t\t}\n\t},\n\tsetAttributeNode : function(newAttr){\n\t\treturn this.attributes.setNamedItem(newAttr);\n\t},\n\tsetAttributeNodeNS : function(newAttr){\n\t\treturn this.attributes.setNamedItemNS(newAttr);\n\t},\n\tremoveAttributeNode : function(oldAttr){\n\t\treturn this.attributes.removeNamedItem(oldAttr.nodeName);\n\t},\n\t//get real attribute name,and remove it by removeAttributeNode\n\tremoveAttributeNS : function(namespaceURI, localName){\n\t\tvar old = this.getAttributeNodeNS(namespaceURI, localName);\n\t\told && this.removeAttributeNode(old);\n\t},\n\t\n\thasAttributeNS : function(namespaceURI, localName){\n\t\treturn this.getAttributeNodeNS(namespaceURI, localName)!=null;\n\t},\n\tgetAttributeNS : function(namespaceURI, localName){\n\t\tvar attr = this.getAttributeNodeNS(namespaceURI, localName);\n\t\treturn attr && attr.value || '';\n\t},\n\tsetAttributeNS : function(namespaceURI, qualifiedName, value){\n\t\tvar attr = this.ownerDocument.createAttributeNS(namespaceURI, qualifiedName);\n\t\tattr.value = attr.nodeValue = value;\n\t\tthis.setAttributeNode(attr)\n\t},\n\tgetAttributeNodeNS : function(namespaceURI, localName){\n\t\treturn this.attributes.getNamedItemNS(namespaceURI, localName);\n\t},\n\t\n\tgetElementsByTagName : function(tagName){\n\t\treturn new LiveNodeList(this,function(base){\n\t\t\tvar ls = [];\n\t\t\t_visitNode(base,function(node){\n\t\t\t\tif(node !== base && node.nodeType == ELEMENT_NODE && (tagName === '*' || node.tagName == tagName)){\n\t\t\t\t\tls.push(node);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn ls;\n\t\t});\n\t},\n\tgetElementsByTagNameNS : function(namespaceURI, localName){\n\t\treturn new LiveNodeList(this,function(base){\n\t\t\tvar ls = [];\n\t\t\t_visitNode(base,function(node){\n\t\t\t\tif(node !== base && node.nodeType === ELEMENT_NODE && node.namespaceURI === namespaceURI && (localName === '*' || node.localName == localName)){\n\t\t\t\t\tls.push(node);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn ls;\n\t\t});\n\t}\n};\nDocument.prototype.getElementsByTagName = Element.prototype.getElementsByTagName;\nDocument.prototype.getElementsByTagNameNS = Element.prototype.getElementsByTagNameNS;\n\n\n_extends(Element,Node);\nfunction Attr() {\n};\nAttr.prototype.nodeType = ATTRIBUTE_NODE;\n_extends(Attr,Node);\n\n\nfunction CharacterData() {\n};\nCharacterData.prototype = {\n\tdata : '',\n\tsubstringData : function(offset, count) {\n\t\treturn this.data.substring(offset, offset+count);\n\t},\n\tappendData: function(text) {\n\t\ttext = this.data+text;\n\t\tthis.nodeValue = this.data = text;\n\t\tthis.length = text.length;\n\t},\n\tinsertData: function(offset,text) {\n\t\tthis.replaceData(offset,0,text);\n\t\n\t},\n\tappendChild:function(newChild){\n\t\t//if(!(newChild instanceof CharacterData)){\n\t\t\tthrow new Error(ExceptionMessage[3])\n\t\t//}\n\t\treturn Node.prototype.appendChild.apply(this,arguments)\n\t},\n\tdeleteData: function(offset, count) {\n\t\tthis.replaceData(offset,count,\"\");\n\t},\n\treplaceData: function(offset, count, text) {\n\t\tvar start = this.data.substring(0,offset);\n\t\tvar end = this.data.substring(offset+count);\n\t\ttext = start + text + end;\n\t\tthis.nodeValue = this.data = text;\n\t\tthis.length = text.length;\n\t}\n}\n_extends(CharacterData,Node);\nfunction Text() {\n};\nText.prototype = {\n\tnodeName : \"#text\",\n\tnodeType : TEXT_NODE,\n\tsplitText : function(offset) {\n\t\tvar text = this.data;\n\t\tvar newText = text.substring(offset);\n\t\ttext = text.substring(0, offset);\n\t\tthis.data = this.nodeValue = text;\n\t\tthis.length = text.length;\n\t\tvar newNode = this.ownerDocument.createTextNode(newText);\n\t\tif(this.parentNode){\n\t\t\tthis.parentNode.insertBefore(newNode, this.nextSibling);\n\t\t}\n\t\treturn newNode;\n\t}\n}\n_extends(Text,CharacterData);\nfunction Comment() {\n};\nComment.prototype = {\n\tnodeName : \"#comment\",\n\tnodeType : COMMENT_NODE\n}\n_extends(Comment,CharacterData);\n\nfunction CDATASection() {\n};\nCDATASection.prototype = {\n\tnodeName : \"#cdata-section\",\n\tnodeType : CDATA_SECTION_NODE\n}\n_extends(CDATASection,CharacterData);\n\n\nfunction DocumentType() {\n};\nDocumentType.prototype.nodeType = DOCUMENT_TYPE_NODE;\n_extends(DocumentType,Node);\n\nfunction Notation() {\n};\nNotation.prototype.nodeType = NOTATION_NODE;\n_extends(Notation,Node);\n\nfunction Entity() {\n};\nEntity.prototype.nodeType = ENTITY_NODE;\n_extends(Entity,Node);\n\nfunction EntityReference() {\n};\nEntityReference.prototype.nodeType = ENTITY_REFERENCE_NODE;\n_extends(EntityReference,Node);\n\nfunction DocumentFragment() {\n};\nDocumentFragment.prototype.nodeName =\t\"#document-fragment\";\nDocumentFragment.prototype.nodeType =\tDOCUMENT_FRAGMENT_NODE;\n_extends(DocumentFragment,Node);\n\n\nfunction ProcessingInstruction() {\n}\nProcessingInstruction.prototype.nodeType = PROCESSING_INSTRUCTION_NODE;\n_extends(ProcessingInstruction,Node);\nfunction XMLSerializer(){}\nXMLSerializer.prototype.serializeToString = function(node){\n\tvar buf = [];\n\tserializeToString(node,buf);\n\treturn buf.join('');\n}\nNode.prototype.toString =function(){\n\treturn XMLSerializer.prototype.serializeToString(this);\n}\nfunction serializeToString(node,buf){\n\tswitch(node.nodeType){\n\tcase ELEMENT_NODE:\n\t\tvar attrs = node.attributes;\n\t\tvar len = attrs.length;\n\t\tvar child = node.firstChild;\n\t\tvar nodeName = node.tagName;\n\t\tvar isHTML = htmlns === node.namespaceURI\n\t\tbuf.push('<',nodeName);\n\t\tfor(var i=0;i<len;i++){\n\t\t\tserializeToString(attrs.item(i),buf,isHTML);\n\t\t}\n\t\tif(child || isHTML && !/^(?:meta|link|img|br|hr|input)$/i.test(nodeName)){\n\t\t\tbuf.push('>');\n\t\t\t//if is cdata child node\n\t\t\tif(isHTML && /^script$/i.test(nodeName)){\n\t\t\t\tif(child){\n\t\t\t\t\tbuf.push(child.data);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\twhile(child){\n\t\t\t\t\tserializeToString(child,buf);\n\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t}\n\t\t\t}\n\t\t\tbuf.push('</',nodeName,'>');\n\t\t}else{\n\t\t\tbuf.push('/>');\n\t\t}\n\t\treturn;\n\tcase DOCUMENT_NODE:\n\tcase DOCUMENT_FRAGMENT_NODE:\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tserializeToString(child,buf);\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t\treturn;\n\tcase ATTRIBUTE_NODE:\n\t\treturn buf.push(' ',node.name,'=\"',node.value.replace(/[<&\"]/g,_xmlEncoder),'\"');\n\tcase TEXT_NODE:\n\t\treturn buf.push(node.data.replace(/[<&]/g,_xmlEncoder));\n\tcase CDATA_SECTION_NODE:\n\t\treturn buf.push( '<![CDATA[',node.data,']]>');\n\tcase COMMENT_NODE:\n\t\treturn buf.push( \"<!--\",node.data,\"-->\");\n\tcase DOCUMENT_TYPE_NODE:\n\t\tvar pubid = node.publicId;\n\t\tvar sysid = node.systemId;\n\t\tbuf.push('<!DOCTYPE ',node.name);\n\t\tif(pubid){\n\t\t\tbuf.push(' PUBLIC \"',pubid);\n\t\t\tif (sysid && sysid!='.') {\n\t\t\t\tbuf.push( '\" \"',sysid);\n\t\t\t}\n\t\t\tbuf.push('\">');\n\t\t}else if(sysid && sysid!='.'){\n\t\t\tbuf.push(' SYSTEM \"',sysid,'\">');\n\t\t}else{\n\t\t\tvar sub = node.internalSubset;\n\t\t\tif(sub){\n\t\t\t\tbuf.push(\" [\",sub,\"]\");\n\t\t\t}\n\t\t\tbuf.push(\">\");\n\t\t}\n\t\treturn;\n\tcase PROCESSING_INSTRUCTION_NODE:\n\t\treturn buf.push( \"<?\",node.target,\" \",node.data,\"?>\");\n\tcase ENTITY_REFERENCE_NODE:\n\t\treturn buf.push( '&',node.nodeName,';');\n\t//case ENTITY_NODE:\n\t//case NOTATION_NODE:\n\tdefault:\n\t\tbuf.push('??',node.nodeName);\n\t}\n}\nfunction importNode(doc,node,deep){\n\tvar node2;\n\tswitch (node.nodeType) {\n\tcase ELEMENT_NODE:\n\t\tnode2 = node.cloneNode(false);\n\t\tnode2.ownerDocument = doc;\n\t\tvar attrs = node2.attributes;\n\t\tvar len = attrs.length;\n\t\tfor(var i=0;i<len;i++){\n\t\t\tnode2.setAttributeNodeNS(importNode(doc,attrs.item(i),deep));\n\t\t}\n\tcase DOCUMENT_FRAGMENT_NODE:\n\t\tbreak;\n\tcase ATTRIBUTE_NODE:\n\t\tdeep = true;\n\t\tbreak;\n\t//case ENTITY_REFERENCE_NODE:\n\t//case PROCESSING_INSTRUCTION_NODE:\n\t////case TEXT_NODE:\n\t//case CDATA_SECTION_NODE:\n\t//case COMMENT_NODE:\n\t//\tdeep = false;\n\t//\tbreak;\n\t//case DOCUMENT_NODE:\n\t//case DOCUMENT_TYPE_NODE:\n\t//cannot be imported.\n\t//case ENTITY_NODE:\n\t//case NOTATION_NODE\n\t//can not hit in level3\n\t//default:throw e;\n\t}\n\tif(!node2){\n\t\tnode2 = node.cloneNode(false);//false\n\t}\n\tnode2.ownerDocument = doc;\n\tnode2.parentNode = null;\n\tif(deep){\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tnode2.appendChild(importNode(doc,child,deep));\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t}\n\treturn node2;\n}\n//\n//var _relationMap = {firstChild:1,lastChild:1,previousSibling:1,nextSibling:1,\n//\t\t\t\t\tattributes:1,childNodes:1,parentNode:1,documentElement:1,doctype,};\nfunction cloneNode(doc,node,deep){\n\tvar node2 = new node.constructor();\n\tfor(var n in node){\n\t\tvar v = node[n];\n\t\tif(typeof v != 'object' ){\n\t\t\tif(v != node2[n]){\n\t\t\t\tnode2[n] = v;\n\t\t\t}\n\t\t}\n\t}\n\tif(node.childNodes){\n\t\tnode2.childNodes = new NodeList();\n\t}\n\tnode2.ownerDocument = doc;\n\tswitch (node2.nodeType) {\n\tcase ELEMENT_NODE:\n\t\tvar attrs\t= node.attributes;\n\t\tvar attrs2\t= node2.attributes = new NamedNodeMap();\n\t\tvar len = attrs.length\n\t\tattrs2._ownerElement = node2;\n\t\tfor(var i=0;i<len;i++){\n\t\t\tnode2.setAttributeNode(cloneNode(doc,attrs.item(i),true));\n\t\t}\n\t\tbreak;;\n\tcase ATTRIBUTE_NODE:\n\t\tdeep = true;\n\t}\n\tif(deep){\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tnode2.appendChild(cloneNode(doc,child,deep));\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t}\n\treturn node2;\n}\n\nfunction __set__(object,key,value){\n\tobject[key] = value\n}\n//do dynamic\ntry{\n\tif(Object.defineProperty){\n\t\tObject.defineProperty(LiveNodeList.prototype,'length',{\n\t\t\tget:function(){\n\t\t\t\t_updateLiveList(this);\n\t\t\t\treturn this.$$length;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(Node.prototype,'textContent',{\n\t\t\tget:function(){\n\t\t\t\treturn getTextContent(this);\n\t\t\t},\n\t\t\tset:function(data){\n\t\t\t\tswitch(this.nodeType){\n\t\t\t\tcase 1:\n\t\t\t\tcase 11:\n\t\t\t\t\twhile(this.firstChild){\n\t\t\t\t\t\tthis.removeChild(this.firstChild);\n\t\t\t\t\t}\n\t\t\t\t\tif(data || String(data)){\n\t\t\t\t\t\tthis.appendChild(this.ownerDocument.createTextNode(data));\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t//TODO:\n\t\t\t\t\tthis.data = data;\n\t\t\t\t\tthis.value = value;\n\t\t\t\t\tthis.nodeValue = data;\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\t\n\t\tfunction getTextContent(node){\n\t\t\tswitch(node.nodeType){\n\t\t\tcase 1:\n\t\t\tcase 11:\n\t\t\t\tvar buf = [];\n\t\t\t\tnode = node.firstChild;\n\t\t\t\twhile(node){\n\t\t\t\t\tif(node.nodeType!==7 && node.nodeType !==8){\n\t\t\t\t\t\tbuf.push(getTextContent(node));\n\t\t\t\t\t}\n\t\t\t\t\tnode = node.nextSibling;\n\t\t\t\t}\n\t\t\t\treturn buf.join('');\n\t\t\tdefault:\n\t\t\t\treturn node.nodeValue;\n\t\t\t}\n\t\t}\n\t\t__set__ = function(object,key,value){\n\t\t\t//console.log(value)\n\t\t\tobject['$$'+key] = value\n\t\t}\n\t}\n}catch(e){//ie8\n}\n\nif(typeof require == 'function'){\n\texports.DOMImplementation = DOMImplementation;\n\texports.XMLSerializer = XMLSerializer;\n}\n","function DOMParser(options){\r\n\tthis.options = \r\n\t\t\toptions != true && //To the version (0.1.12) compatible\r\n\t\t\toptions ||{locator:{}};\r\n\t\r\n}\r\nDOMParser.prototype.parseFromString = function(source,mimeType){\r\n\tvar sax =  new XMLReader();\r\n\tvar options = this.options;\r\n\tvar domBuilder = options.domBuilder || new DOMHandler();//contentHandler and LexicalHandler\r\n\tvar errorHandler = options.errorHandler;\r\n\tvar locator = options.locator;\r\n\tvar defaultNSMap = {};\r\n\tvar entityMap = {'lt':'<','gt':'>','amp':'&','quot':'\"','apos':\"'\"}\r\n\tif(locator){\r\n\t\tdomBuilder.setDocumentLocator(locator)\r\n\t}\r\n\t\r\n\tsax.errorHandler = buildErrorHandler(errorHandler,domBuilder,locator);\r\n\tsax.domBuilder = options.domBuilder || domBuilder;\r\n\tif(/\\/x?html?$/.test(mimeType)){\r\n\t\tentityMap.nbsp = '\\xa0';\r\n\t\tentityMap.copy = '\\xa9';\r\n\t\tdefaultNSMap['']= 'http://www.w3.org/1999/xhtml';\r\n\t}\r\n\tsax.parse(source,defaultNSMap,entityMap);\r\n\treturn domBuilder.document;\r\n}\r\nfunction buildErrorHandler(errorImpl,domBuilder,locator){\r\n\tif(!errorImpl){\r\n\t\tif(domBuilder instanceof DOMHandler){\r\n\t\t\treturn domBuilder;\r\n\t\t}\r\n\t\terrorImpl = domBuilder ;\r\n\t}\r\n\tvar errorHandler = {}\r\n\tvar isCallback = errorImpl instanceof Function;\r\n\tlocator = locator||{}\r\n\tfunction build(key){\r\n\t\tvar fn = errorImpl[key];\r\n\t\tif(!fn){\r\n\t\t\tif(isCallback){\r\n\t\t\t\tfn = errorImpl.length == 2?function(msg){errorImpl(key,msg)}:errorImpl;\r\n\t\t\t}else{\r\n\t\t\t\tvar i=arguments.length;\r\n\t\t\t\twhile(--i){\r\n\t\t\t\t\tif(fn = errorImpl[arguments[i]]){\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\terrorHandler[key] = fn && function(msg){\r\n\t\t\tfn(msg+_locator(locator));\r\n\t\t}||function(){};\r\n\t}\r\n\tbuild('warning','warn');\r\n\tbuild('error','warn','warning');\r\n\tbuild('fatalError','warn','warning','error');\r\n\treturn errorHandler;\r\n}\r\n/**\r\n * +ContentHandler+ErrorHandler\r\n * +LexicalHandler+EntityResolver2\r\n * -DeclHandler-DTDHandler \r\n * \r\n * DefaultHandler:EntityResolver, DTDHandler, ContentHandler, ErrorHandler\r\n * DefaultHandler2:DefaultHandler,LexicalHandler, DeclHandler, EntityResolver2\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/helpers/DefaultHandler.html\r\n */\r\nfunction DOMHandler() {\r\n    this.cdata = false;\r\n}\r\nfunction position(locator,node){\r\n\tnode.lineNumber = locator.lineNumber;\r\n\tnode.columnNumber = locator.columnNumber;\r\n}\r\n/**\r\n * @see org.xml.sax.ContentHandler#startDocument\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ContentHandler.html\r\n */ \r\nDOMHandler.prototype = {\r\n\tstartDocument : function() {\r\n    \tthis.document = new DOMImplementation().createDocument(null, null, null);\r\n    \tif (this.locator) {\r\n        \tthis.document.documentURI = this.locator.systemId;\r\n    \t}\r\n\t},\r\n\tstartElement:function(namespaceURI, localName, qName, attrs) {\r\n\t\tvar doc = this.document;\r\n\t    var el = doc.createElementNS(namespaceURI, qName||localName);\r\n\t    var len = attrs.length;\r\n\t    appendElement(this, el);\r\n\t    this.currentElement = el;\r\n\t    \r\n\t\tthis.locator && position(this.locator,el)\r\n\t    for (var i = 0 ; i < len; i++) {\r\n\t        var namespaceURI = attrs.getURI(i);\r\n\t        var value = attrs.getValue(i);\r\n\t        var qName = attrs.getQName(i);\r\n\t\t\tvar attr = doc.createAttributeNS(namespaceURI, qName);\r\n\t\t\tif( attr.getOffset){\r\n\t\t\t\tposition(attr.getOffset(1),attr)\r\n\t\t\t}\r\n\t\t\tattr.value = attr.nodeValue = value;\r\n\t\t\tel.setAttributeNode(attr)\r\n\t    }\r\n\t},\r\n\tendElement:function(namespaceURI, localName, qName) {\r\n\t\tvar current = this.currentElement\r\n\t    var tagName = current.tagName;\r\n\t    this.currentElement = current.parentNode;\r\n\t},\r\n\tstartPrefixMapping:function(prefix, uri) {\r\n\t},\r\n\tendPrefixMapping:function(prefix) {\r\n\t},\r\n\tprocessingInstruction:function(target, data) {\r\n\t    var ins = this.document.createProcessingInstruction(target, data);\r\n\t    this.locator && position(this.locator,ins)\r\n\t    appendElement(this, ins);\r\n\t},\r\n\tignorableWhitespace:function(ch, start, length) {\r\n\t},\r\n\tcharacters:function(chars, start, length) {\r\n\t\tchars = _toString.apply(this,arguments)\r\n\t\t//console.log(chars)\r\n\t\tif(this.currentElement && chars){\r\n\t\t\tif (this.cdata) {\r\n\t\t\t\tvar charNode = this.document.createCDATASection(chars);\r\n\t\t\t\tthis.currentElement.appendChild(charNode);\r\n\t\t\t} else {\r\n\t\t\t\tvar charNode = this.document.createTextNode(chars);\r\n\t\t\t\tthis.currentElement.appendChild(charNode);\r\n\t\t\t}\r\n\t\t\tthis.locator && position(this.locator,charNode)\r\n\t\t}\r\n\t},\r\n\tskippedEntity:function(name) {\r\n\t},\r\n\tendDocument:function() {\r\n\t\tthis.document.normalize();\r\n\t},\r\n\tsetDocumentLocator:function (locator) {\r\n\t    if(this.locator = locator){// && !('lineNumber' in locator)){\r\n\t    \tlocator.lineNumber = 0;\r\n\t    }\r\n\t},\r\n\t//LexicalHandler\r\n\tcomment:function(chars, start, length) {\r\n\t\tchars = _toString.apply(this,arguments)\r\n\t    var comm = this.document.createComment(chars);\r\n\t    this.locator && position(this.locator,comm)\r\n\t    appendElement(this, comm);\r\n\t},\r\n\t\r\n\tstartCDATA:function() {\r\n\t    //used in characters() methods\r\n\t    this.cdata = true;\r\n\t},\r\n\tendCDATA:function() {\r\n\t    this.cdata = false;\r\n\t},\r\n\t\r\n\tstartDTD:function(name, publicId, systemId) {\r\n\t\tvar impl = this.document.implementation;\r\n\t    if (impl && impl.createDocumentType) {\r\n\t        var dt = impl.createDocumentType(name, publicId, systemId);\r\n\t        this.locator && position(this.locator,dt)\r\n\t        appendElement(this, dt);\r\n\t    }\r\n\t},\r\n\t/**\r\n\t * @see org.xml.sax.ErrorHandler\r\n\t * @link http://www.saxproject.org/apidoc/org/xml/sax/ErrorHandler.html\r\n\t */\r\n\twarning:function(error) {\r\n\t\tconsole.warn(error,_locator(this.locator));\r\n\t},\r\n\terror:function(error) {\r\n\t\tconsole.error(error,_locator(this.locator));\r\n\t},\r\n\tfatalError:function(error) {\r\n\t\tconsole.error(error,_locator(this.locator));\r\n\t    throw error;\r\n\t}\r\n}\r\nfunction _locator(l){\r\n\tif(l){\r\n\t\treturn '\\n@'+(l.systemId ||'')+'#[line:'+l.lineNumber+',col:'+l.columnNumber+']'\r\n\t}\r\n}\r\nfunction _toString(chars,start,length){\r\n\tif(typeof chars == 'string'){\r\n\t\treturn chars.substr(start,length)\r\n\t}else{//java sax connect width xmldom on rhino(what about: \"? && !(chars instanceof String)\")\r\n\t\tif(chars.length >= start+length || start){\r\n\t\t\treturn new java.lang.String(chars,start,length)+'';\r\n\t\t}\r\n\t\treturn chars;\r\n\t}\r\n}\r\n\r\n/*\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/LexicalHandler.html\r\n * used method of org.xml.sax.ext.LexicalHandler:\r\n *  #comment(chars, start, length)\r\n *  #startCDATA()\r\n *  #endCDATA()\r\n *  #startDTD(name, publicId, systemId)\r\n *\r\n *\r\n * IGNORED method of org.xml.sax.ext.LexicalHandler:\r\n *  #endDTD()\r\n *  #startEntity(name)\r\n *  #endEntity(name)\r\n *\r\n *\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/DeclHandler.html\r\n * IGNORED method of org.xml.sax.ext.DeclHandler\r\n * \t#attributeDecl(eName, aName, type, mode, value)\r\n *  #elementDecl(name, model)\r\n *  #externalEntityDecl(name, publicId, systemId)\r\n *  #internalEntityDecl(name, value)\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/EntityResolver2.html\r\n * IGNORED method of org.xml.sax.EntityResolver2\r\n *  #resolveEntity(String name,String publicId,String baseURI,String systemId)\r\n *  #resolveEntity(publicId, systemId)\r\n *  #getExternalSubset(name, baseURI)\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/DTDHandler.html\r\n * IGNORED method of org.xml.sax.DTDHandler\r\n *  #notationDecl(name, publicId, systemId) {};\r\n *  #unparsedEntityDecl(name, publicId, systemId, notationName) {};\r\n */\r\n\"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl\".replace(/\\w+/g,function(key){\r\n\tDOMHandler.prototype[key] = function(){return null}\r\n})\r\n\r\n/* Private static helpers treated below as private instance methods, so don't need to add these to the public API; we might use a Relator to also get rid of non-standard public properties */\r\nfunction appendElement (hander,node) {\r\n    if (!hander.currentElement) {\r\n        hander.document.appendChild(node);\r\n    } else {\r\n        hander.currentElement.appendChild(node);\r\n    }\r\n}//appendChild and setAttributeNS are preformance key\r\n\r\nif(typeof require == 'function'){\r\n\tvar XMLReader = require('./sax').XMLReader;\r\n\tvar DOMImplementation = require('./dom').DOMImplementation;\r\n\texports.XMLSerializer = require('./dom').XMLSerializer ;\r\n\texports.DOMParser = DOMParser;\r\n}\r\n","var nodeUtil = require(\"util\"),\n    _ = require(\"underscore\");\n\nvar PDFUnit = (function PFPUnitClosure() {\n    'use strict';\n    // private static\n    var _nextId = 1;\n    var _name = 'PDFUnit';\n\n    var dpi = 96.0;\n    var gridXPerInch = 11.0;\n    var gridYPerInch = 4.0;\n\n    var _pixelXPerGrid = dpi/gridXPerInch;\n    var _pixelYPerGrid = dpi/gridYPerInch;\n    var _pixelPerPoint = dpi/72;\n\n    var kColors = [\n        '#000000',\t\t// 0\n        '#ffffff',\t\t// 1\n        '#4c4c4c',\t\t// 2\n        '#808080',\t\t// 3\n        '#999999',\t\t// 4\n        '#c0c0c0',\t\t// 5\n        '#cccccc',\t\t// 6\n        '#e5e5e5',\t\t// 7\n        '#f2f2f2',\t\t// 8\n        '#008000',\t\t// 9\n        '#00ff00',\t\t// 10\n        '#bfffa0',\t\t// 11\n        '#ffd629',\t\t// 12\n        '#ff99cc',\t\t// 13\n        '#004080',\t\t// 14\n        '#9fc0e1',\t\t// 15\n        '#5580ff',\t\t// 16\n        '#a9c9fa',\t\t// 17\n        '#ff0080',\t\t// 18\n        '#800080',\t\t// 19\n        '#ffbfff',\t\t// 20\n        '#e45b21',\t\t// 21\n        '#ffbfaa',\t\t// 22\n        '#008080',\t\t// 23\n        '#ff0000',\t\t// 24\n        '#fdc59f',\t\t// 25\n        '#808000',\t\t// 26\n        '#bfbf00',\t\t// 27\n        '#824100',\t\t// 28\n        '#007256',\t\t// 29\n        '#008000',\t\t// 30\n        '#000080',\t\t// Last + 1\n        '#008080',\t\t// Last + 2\n        '#800080',\t\t// Last + 3\n        '#ff0000',\t\t// Last + 4\n        '#0000ff',\t\t// Last + 5\n        '#008000',\t\t// Last + 6\n        '#000000'\t\t// Last + 7\n    ];\n\n    // constructor\n    var cls = function () {\n        // private\n        var _id = _nextId++;\n\n        // public (every instance will have their own copy of these methods, needs to be lightweight)\n        this.get_id = function() { return _id; };\n        this.get_name = function() { return _name + _id; };\n    };\n\n    // public static\n    cls.get_nextId = function () {\n        return _name + _nextId;\n    };\n\n    cls.toFixedFloat = function(fNum) {\n        return parseFloat(fNum.toFixed(3))\n    };\n\n    cls.colorCount = function() {\n        return kColors.length;\n    };\n\n    cls.toPixelX = function(formX) {\n        return Math.round(formX * _pixelXPerGrid);\n    };\n\n    cls.toPixelY = function(formY) {\n        return Math.round(formY * _pixelYPerGrid);\n    };\n\n    cls.pointToPixel = function(point) {// Point unit (1/72 an inch) to pixel units\n        return point * _pixelPerPoint;\n    };\n\n    cls.getColorByIndex = function(clrId) {\n        return this.kColors[clrId];\n    };\n\n    cls.toFormPoint = function(viewportX, viewportY) {\n        return [(viewportX / _pixelXPerGrid), (viewportY / _pixelYPerGrid)];\n    };\n\n    cls.toFormX = function(viewportX) {\n        return cls.toFixedFloat(viewportX / _pixelXPerGrid);\n    };\n\n    cls.toFormY = function(viewportY) {\n        return cls.toFixedFloat(viewportY / _pixelYPerGrid);\n    };\n\n    cls.findColorIndex = function(color) {\n        if (color.length === 4)\n            color += \"000\";\n        //MQZ. 07/29/2013: if color is not in dictionary, just return -1. The caller (pdffont, pdffill) will set the actual color\n        return kColors.indexOf(color);\n    };\n\n    return cls;\n})();\n\nmodule.exports = PDFUnit;\n\n","var nodeUtil = require(\"util\"),\n    _ = require(\"underscore\"),\n    PDFUnit = require('./pdfunit.js');\n\nvar PDFLine = (function PFPLineClosure() {\n    'use strict';\n    // private static\n    var _nextId = 1;\n    var _name = 'PDFLine';\n\n    // constructor\n    var cls = function (x1, y1, x2, y2, lineWidth, color, dashed) {\n        // private\n        var _id = _nextId++;\n\n        // public (every instance will have their own copy of these methods, needs to be lightweight)\n        this.get_id = function() { return _id; };\n        this.get_name = function() { return _name + _id; };\n\n        this.x1 = x1;\n        this.y1 = y1;\n        this.x2 = x2;\n        this.y2 = y2;\n        this.lineWidth = lineWidth || 1.0;\n        this.color = color;\n        this.dashed = dashed;\n    };\n\n    // public static\n    cls.get_nextId = function () {\n        return _name + _nextId;\n    };\n\n    var _setStartPoint = function(oneLine, x, y) {\n        oneLine.x = PDFUnit.toFormX(x);\n        oneLine.y = PDFUnit.toFormY(y);\n    };\n\n    // public (every instance will share the same method, but has no access to private fields defined in constructor)\n    cls.prototype.processLine = function (targetData) {\n        var xDelta = Math.abs(this.x2 - this.x1);\n        var yDelta = Math.abs(this.y2 - this.y1);\n        var minDelta = this.lineWidth;\n\n        var oneLine = {x:0, y:0, w:this.lineWidth, l:0};\n\n        //MQZ Aug.28.2013, adding color support, using color dictionary and default to black\n        var clrId = PDFUnit.findColorIndex(this.color);\n        if (clrId < 0) {\n            oneLine = _.extend({oc: this.color}, oneLine);\n        }\n        else if (clrId > 0 && clrId < (PDFUnit.colorCount() - 1)) {\n            oneLine = _.extend({clr: clrId}, oneLine);\n        }\n\n        //MQZ Aug.29 dashed line support\n        if (this.dashed) {\n            oneLine = _.extend({dsh: 1}, oneLine);\n        }\n\n        if ((yDelta < this.lineWidth) && (xDelta > minDelta)) { //HLine\n            if (this.lineWidth < 4 && (xDelta / this.lineWidth < 4)) {\n                nodeUtil.p2jinfo(\"Skipped: short thick HLine: lineWidth = \" + this.lineWidth + \", xDelta = \" + xDelta);\n                return; //skip short thick lines, like PA SPP lines behinds checkbox\n            }\n\n            oneLine.l = PDFUnit.toFormX(xDelta);\n            if (this.x1 > this.x2)\n                _setStartPoint.call(this, oneLine, this.x2, this.y2);\n            else\n                _setStartPoint.call(this, oneLine, this.x1, this.y1);\n            targetData.HLines.push(oneLine);\n        }\n        else if ((xDelta < this.lineWidth) && (yDelta > minDelta)) {//VLine\n            if (this.lineWidth < 4 && (yDelta / this.lineWidth < 4)) {\n                nodeUtil.p2jinfo(\"Skipped: short thick VLine: lineWidth = \" + this.lineWidth + \", yDelta = \" + yDelta);\n                return; //skip short think lines, like PA SPP lines behinds checkbox\n            }\n\n            oneLine.l = PDFUnit.toFormY(yDelta);\n            if (this.y1 > this.y2)\n                _setStartPoint.call(this, oneLine, this.x2, this.y2);\n            else\n                _setStartPoint.call(this, oneLine, this.x1, this.y1);\n            targetData.VLines.push(oneLine);\n        }\n    };\n\n    return cls;\n})();\n\nmodule.exports = PDFLine;\n\n","var nodeUtil = require(\"util\"),\n    _ = require(\"underscore\"),\n    PDFUnit = require('./pdfunit.js');\n\nvar PDFFill = (function PFPLineClosure() {\n    'use strict';\n    // private static\n    var _nextId = 1;\n    var _name = 'PDFFill';\n\n    // constructor\n    var cls = function (x, y, width, height, color) {\n        // private\n        var _id = _nextId++;\n\n        // public (every instance will have their own copy of these methods, needs to be lightweight)\n        this.get_id = function() { return _id; };\n        this.get_name = function() { return _name + _id; };\n\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        this.color = color;\n    };\n\n    // public static\n    cls.get_nextId = function () {\n        return _name + _nextId;\n    };\n\n    // public (every instance will share the same method, but has no access to private fields defined in constructor)\n    cls.prototype.processFill = function (targetData) {\n        var clrId = PDFUnit.findColorIndex(this.color);\n\n        var oneFill = {x:PDFUnit.toFormX(this.x),\n                       y:PDFUnit.toFormY(this.y),\n                       w:PDFUnit.toFormX(this.width),\n                       h:PDFUnit.toFormY(this.height),\n                       clr: clrId};\n\n        //MQZ.07/29/2013: when color is not in color dictionary, set the original color (oc)\n        if (clrId < 0) {\n            oneFill = _.extend({oc: this.color}, oneFill);\n        }\n\n        targetData.Fills.push(oneFill);\n    };\n\n    return cls;\n})();\n\nmodule.exports = PDFFill;\n\n","var nodeUtil = require(\"util\"),\n    _ = require(\"underscore\"),\n    PDFUnit = require('./pdfunit.js');\n\nvar PDFFont = (function PFPFontClosure() {\n    'use strict';\n    // private static\n    var _nextId = 1;\n    var _name = 'PDFFont';\n\n    var _boldSubNames = [\"bd\", \"bold\", \"demi\", \"black\"];\n    var _stdFonts = [\"arial\", \"helvetica\", \"sans-serif \", \"courier \",\"monospace \", \"ocr \"];\n\n    var _kFontFaces = [\n       \"quicktype,arial,helvetica,sans-serif\",\t\t\t\t\t\t\t// 00 - QuickType - sans-serif variable font\n       \"quicktype condensed,arial narrow,arial,helvetica,sans-serif\",\t// 01 - QuickType Condensed - thin sans-serif variable font\n       \"quicktypepi,quicktypeiipi\",\t\t\t\t\t\t\t\t\t\t// 02 - QuickType Pi\n       \"quicktype mono,courier new,courier,monospace\",\t\t\t\t\t// 03 - QuickType Mono - san-serif fixed font\n       \"ocr-a,courier new,courier,monospace\",\t\t\t\t\t\t\t// 04 - OCR-A - OCR readable san-serif fixed font\n       \"ocr b mt,courier new,courier,monospace\"\t\t\t\t\t\t\t// 05 - OCR-B MT - OCR readable san-serif fixed font\n    ];\n\n    var _kFontStyles = [\n        // Face\t\tSize\tBold\tItalic\t\tStyleID(Comment)\n        // -----\t----\t----\t-----\t\t-----------------\n            [0,\t\t6,\t\t0,\t\t0],\t\t\t//00\n            [0,\t\t8,\t\t0,\t\t0],\t\t\t//01\n            [0,\t\t10,\t\t0,\t\t0],\t\t\t//02\n            [0,\t\t12,\t\t0,\t\t0],\t\t\t//03\n            [0,\t\t14,\t\t0,\t\t0],\t\t\t//04\n            [0,\t\t18,\t\t0,\t\t0],\t\t\t//05\n            [0,\t\t6,\t\t1,\t\t0],\t\t\t//06\n            [0,\t\t8,\t\t1,\t\t0],\t\t\t//07\n            [0,\t\t10,\t\t1,\t\t0],\t\t\t//08\n            [0,\t\t12,\t\t1,\t\t0],\t\t\t//09\n            [0,\t\t14,\t\t1,\t\t0],\t\t\t//10\n            [0,\t\t18,\t\t1,\t\t0],\t\t\t//11\n            [0,\t\t6,\t\t0,\t\t1],\t\t\t//12\n            [0,\t\t8,\t\t0,\t\t1],\t\t\t//13\n            [0,\t\t10,\t\t0,\t\t1],\t\t\t//14\n            [0,\t\t12,\t\t0,\t\t1],\t\t\t//15\n            [0,\t\t14,\t\t0,\t\t1],\t\t\t//16\n            [0,\t\t18,\t\t0,\t\t1],\t\t\t//17\n            [0,\t\t6,\t\t1,\t\t1],\t\t\t//18\n            [0,\t\t8,\t\t1,\t\t1],\t\t\t//19\n            [0,\t\t10,\t\t1,\t\t1],\t\t\t//20\n            [0,\t\t12,\t\t1,\t\t1],\t\t\t//21\n            [0,\t\t14,\t\t1,\t\t1],\t\t\t//22\n            [0,\t\t18,\t\t1,\t\t1],\t\t\t//23\n            [1,\t\t6,\t\t0,\t\t0],\t\t\t//24\n            [1,\t\t8,\t\t0,\t\t0],\t\t\t//25\n            [1,\t\t10,\t\t0,\t\t0],\t\t\t//26\n            [1,\t\t12,\t\t0,\t\t0],\t\t\t//27\n            [1,\t\t14,\t\t0,\t\t0],\t\t\t//28\n            [1,\t\t18,\t\t0,\t\t0],\t\t\t//29\n            [1,\t\t6,\t\t1,\t\t0],\t\t\t//30\n            [1,\t\t8,\t\t1,\t\t0],\t\t\t//31\n            [1,\t\t10,\t\t1,\t\t0],\t\t\t//32\n            [1,\t\t12,\t\t1,\t\t0],\t\t\t//33\n            [1,\t\t14,\t\t1,\t\t0],\t\t\t//34\n            [1,\t\t18,\t\t1,\t\t0],\t\t\t//35\n            [1,\t\t6,\t\t0,\t\t1],\t\t\t//36\n            [1,\t\t8,\t\t0,\t\t1],\t\t\t//37\n            [1,\t\t10,\t\t0,\t\t1],\t\t\t//38\n            [1,\t\t12,\t\t0,\t\t1],\t\t\t//39\n            [1,\t\t14,\t\t0,\t\t1],\t\t\t//40\n            [1,\t\t18,\t\t0,\t\t1],\t\t\t//41\n            [2,\t\t8,\t\t0,\t\t0],\t\t\t//42\n            [2,\t\t10,\t\t0,\t\t0],\t\t\t//43\n            [2,\t\t12,\t\t0,\t\t0],\t\t\t//44\n            [2,\t\t14,\t\t0,\t\t0],\t\t\t//45\n            [2,\t\t18,\t\t0,\t\t0],\t\t\t//46\n            [3,\t\t8,\t\t0,\t\t0],\t\t\t//47\n            [3,\t\t10,\t\t0,\t\t0],\t\t\t//48\n            [3,\t\t12,\t\t0,\t\t0],\t\t\t//49\n            [4,\t\t12,\t\t0,\t\t0],\t\t\t//50\n            [0,\t\t9,\t\t0,\t\t0],\t\t\t//51\n            [0,\t\t9,\t\t1,\t\t0],\t\t\t//52\n            [0,\t\t9,\t\t0,\t\t1],\t\t\t//53\n            [0,\t\t9,\t\t1,\t\t1],\t\t\t//54\n            [1,\t\t9,\t\t0,\t\t0],\t\t\t//55\n            [1,\t\t9,\t\t1,\t\t0],\t\t\t//56\n            [1,\t\t9,\t\t1,\t\t1],\t\t\t//57\n            [4,\t\t10,\t\t0,\t\t0],\t\t\t//58\n            [5,\t\t10,\t\t0,\t\t0],\t\t\t//59\n            [5,\t\t12,\t\t0,\t\t0]\t\t\t//60\n    ];\n\n\n    // constructor\n    var cls = function (fontObj) {\n        // private\n        var _id = _nextId++;\n\n        // public (every instance will have their own copy of these methods, needs to be lightweight)\n        this.get_id = function() { return _id; };\n        this.get_name = function() { return _name + _id; };\n\n        this.fontObj = fontObj;\n        var typeName = (fontObj.name || fontObj.fallbackName);\n        if (!typeName) {\n            typeName = _kFontFaces[0]; //default font family name\n        }\n        typeName = typeName.toLowerCase();\n        this.typeName = typeName;\n\n        var subType = typeName;\n        var nameArray = typeName.split('+');\n        if (_.isArray(nameArray) && nameArray.length > 1) {\n            subType = nameArray[1].split(\"-\");\n            if (_.isArray(subType) && subType.length > 1) {\n                if (!this.bold) {\n                    var subName = subType[1].toLowerCase();\n                    this.bold = _boldSubNames.indexOf(subName) >= 0;\n                }\n                subType = subType[0];\n            }\n        }\n        this.subType = subType;\n\n        this.isSymbol = typeName.indexOf(\"symbol\") > 0 || _kFontFaces[2].indexOf(this.subType) >= 0;\n        if (this.fontObj.isSymbolicFont) {\n            var mFonts = _.filter(_stdFonts, function(oneName){\n                return (typeName.indexOf(oneName) >= 0);\n            }, this);\n\n            if (mFonts.length > 0) {\n                this.fontObj.isSymbolicFont = false; //lots of Arial-based font is detected as symbol in VA forms (301, 76-c, etc.) reset the flag for now\n                nodeUtil.p2jinfo(\"Reset: isSymbolicFont (false) for \" + this.fontObj.name);\n            }\n        }\n        else {\n            if (this.isSymbol) {\n                this.fontObj.isSymbolicFont = true; //text pdf: va_ind_760c\n                nodeUtil.p2jinfo(\"Reset: isSymbolicFont (true) for \" + this.fontObj.name);\n            }\n        }\n\n        this.fontSize = 1;\n\n        this.faceIdx = 0;\n        this.bold = false;\n        this.italic = false;\n\n        this.fontStyleId = -1;\n    };\n\n    // public static\n    cls.get_nextId = function () {\n        return _name + _nextId;\n    };\n\n    // private\n    var _setFaceIndex = function() {\n        var fontObj = this.fontObj;\n\n        this.bold = fontObj.bold;\n        if (!this.bold) {\n            this.bold = this.typeName.indexOf(\"bold\") >= 0 || this.typeName.indexOf(\"black\") >= 0;\n        }\n\n        var typeName = this.subType;\n        if (fontObj.isSerifFont) {\n            if (_kFontFaces[1].indexOf(typeName) >= 0)\n                this.faceIdx = 1;\n        }\n        else if (_kFontFaces[2].indexOf(this.subType) >= 0) {\n            this.faceIdx = 2;\n        }\n        else if (fontObj.isMonospace) {\n            this.faceIdx = 3;\n\n            if (_kFontFaces[4].indexOf(typeName) >= 0)\n                this.faceIdx = 4;\n            else if (_kFontFaces[5].indexOf(typeName) >= 0)\n                this.faceIdx = 5;\n        }\n        else if (fontObj.isSymbolicFont) {\n            this.faceIdx = 2;\n        }\n\n        if (this.faceIdx == 0) {\n            if (this.typeName.indexOf(\"narrow\") > 0)\n                this.faceIdx = 1;\n        }\n\n//        nodeUtil.p2jinfo\"typeName = \" + typeName + \" => faceIdx = \" + this.faceIdx);\n    };\n\n    var _getFontStyleIndex = function(fontSize) {\n        _setFaceIndex.call(this);\n\n        //MQZ Feb.28.2013. Adjust bold text fontsize to work around word spacing issue\n        this.fontSize = (this.bold && (fontSize > 12)) ? fontSize + 1 : fontSize;\n\n        var fsa = [this.faceIdx, this.fontSize, this.bold?1:0, this.italic?1:0];\n        var retVal = -1;\n\n        _.each(_kFontStyles, function(element, index, list){\n            if (retVal === -1) {\n                if (element[0] === fsa[0] && element[1] === fsa[1] &&\n                    element[2] === fsa[2] && element[3] === fsa[3]) {\n                        retVal = index;\n                }\n            }\n        });\n\n        return retVal;\n    };\n\n    var _processSymbolicFont = function(str) {\n        var retVal = str;\n\n        if (!str || str.length !== 1)\n            return retVal;\n\n        if (!this.fontObj.isSymbolicFont || !this.isSymbol) {\n            if (retVal == \"C\" || retVal == \"G\") { //prevent symbolic encoding from the client\n                retVal = \" \" + retVal + \" \"; //sample: va_ind_760c\n            }\n            return retVal;\n        }\n\n        switch(str.charCodeAt(0)) {\n            case 20: retVal = '\\u2713'; break; //check mark\n            case 70: retVal = (this.fontObj.type === \"CIDFontType0\") ? '\\u26A0' : '\\u007D'; break; //exclaimation in triangle OR right curly bracket\n            case 71: retVal = '\\u25b6'; break; //right triangle\n            case 97: retVal = '\\u25b6'; break; //right triangle\n            case 99: retVal = this.isSymbol ? '\\u2022' : '\\u25b2'; break; //up triangle. set to Bullet Dot for VA SchSCR\n            case 100: retVal = '\\u25bc'; break; //down triangle\n            case 103: retVal = '\\u27A8'; break; //right arrow. sample: va_ind_760pff and pmt\n            case 106: retVal = ''; break; //VA 301: string j character by the checkbox, hide it for now\n            case 114: retVal = '\\u2022'; break; //Bullet dot\n            case 115: retVal = '\\u25b2'; break; //up triangle\n            case 116: retVal = '\\u2022'; break; //Bullet dot\n            case 118: retVal = '\\u2022'; break; //Bullet dot\n            default:\n                nodeUtil.p2jinfo(this.fontObj.type + \" - SymbolicFont - (\" + this.fontObj.name + \") : \" +\n                    str.charCodeAt(0) + \"::\" + str.charCodeAt(1) + \" => \" + retVal);\n        }\n\n        return retVal;\n    };\n\n    var _textRotationAngle = function (matrix2D) {\n        var retVal = 0;\n        if (matrix2D[0][0] === 0 && matrix2D[1][1] === 0) {\n            if (matrix2D[0][1] != 0 && matrix2D[1][0] != 0) {\n                if ((matrix2D[0][1] / matrix2D[1][0]) + 1 < 0.0001)\n                    retVal = 90;\n            }\n        }\n        else if (matrix2D[0][0] !== 0 && matrix2D[1][1] !== 0) {\n            var r1 = Math.atan(-matrix2D[0][1] / matrix2D[0][0]);\n            var r2 = Math.atan(matrix2D[1][0] / matrix2D[1][1]);\n            if (Math.abs(r1) > 0.0001 && (r1 - r2 < 0.0001)) {\n                retVal = r1 * 180 / Math.PI;\n            }\n        }\n        return retVal;\n    };\n\n    // public (every instance will share the same method, but has no access to private fields defined in constructor)\n    cls.prototype.processText = function (p, str, maxWidth, color, fontSize, targetData, matrix2D) {\n        var text = _processSymbolicFont.call(this, str);\n        if (!text) {\n            return;\n        }\n        this.fontStyleId = _getFontStyleIndex.call(this, fontSize);\n\n        // when this.fontStyleId === -1, it means the text style doesn't match any entry in the dictionary\n        // adding TS to better describe text style [fontFaceId, fontSize, 1/0 for bold, 1/0 for italic];\n        var TS = [this.faceIdx, this.fontSize, this.bold?1:0, this.italic?1:0];\n\n        var clrId = PDFUnit.findColorIndex(color);\n\n        var oneText = {x: PDFUnit.toFormX(p.x) - 0.25,\n            y: PDFUnit.toFormY(p.y) - 0.75,\n            w: maxWidth,\n            clr: clrId,\n            A: \"left\",\n            R: [{\n                T: this.flash_encode(text),\n                S: this.fontStyleId,\n                TS: TS\n            }]\n        };\n\n        //MQZ.07/29/2013: when color is not in color dictionary, set the original color (oc)\n        if (clrId < 0) {\n            oneText = _.extend({oc: color}, oneText);\n        }\n\n        var rAngle = _textRotationAngle.call(this, matrix2D);\n        if (rAngle != 0) {\n            nodeUtil.p2jinfo(str + \": rotated \" + rAngle + \" degree.\");\n            _.extend(oneText.R[0], {RA: rAngle});\n        }\n\n        targetData.Texts.push(oneText);\n    };\n\n    cls.prototype.flash_encode = function(str) {\n        var retVal = encodeURIComponent(str);\n        retVal = retVal.replace(\"%C2%96\", \"-\");\n        retVal = retVal.replace(\"%C2%91\", \"%27\");\n        retVal = retVal.replace(\"%C2%92\", \"%27\");\n        retVal = retVal.replace(\"%C2%82\", \"%27\");\n        retVal = retVal.replace(\"%C2%93\", \"%22\");\n        retVal = retVal.replace(\"%C2%94\", \"%22\");\n        retVal = retVal.replace(\"%C2%84\", \"%22\");\n        retVal = retVal.replace(\"%C2%8B\", \"%C2%AB\");\n        retVal = retVal.replace(\"%C2%9B\", \"%C2%BB\");\n\n        return retVal;\n    };\n\n    cls.prototype.clean = function() {\n        this.fontObj = null;\n        delete this.fontObj;\n    };\n\n    return cls;\n})();\n\nmodule.exports = PDFFont;\n\n","'use strict';\nvar nodeUtil = require(\"util\"),\n    _ = require('underscore'),\n    PDFLine = require('./pdfline'),\n    PDFFill = require('./pdffill'),\n    PDFFont = require('./pdffont');\n\n(function () {\n    // private static\n    var _nextId = 1;\n    var _name = 'PDFCanvas';\n\n    // alias some functions to make (compiled) code shorter\n    var m = Math;\n    var mr = m.round;\n    var ms = m.sin;\n    var mc = m.cos;\n    var abs = m.abs;\n    var sqrt = m.sqrt;\n\n    // precompute \"00\" to \"FF\"\n    var dec2hex = [];\n    for (var i = 0; i < 16; i++) {\n        for (var j = 0; j < 16; j++) {\n            dec2hex[i * 16 + j] = i.toString(16) + j.toString(16);\n        }\n    }\n\n    function createMatrixIdentity() {\n        return [\n            [1, 0, 0],\n            [0, 1, 0],\n            [0, 0, 1]\n        ];\n    }\n\n    function matrixMultiply(m1, m2) {\n        var result = createMatrixIdentity();\n\n        for (var x = 0; x < 3; x++) {\n            for (var y = 0; y < 3; y++) {\n                var sum = 0;\n\n                for (var z = 0; z < 3; z++) {\n                    sum += m1[x][z] * m2[z][y];\n                }\n\n                result[x][y] = sum;\n            }\n        }\n        return result;\n    }\n\n    function copyState(o1, o2) {\n        o2.fillStyle = o1.fillStyle;\n        o2.lineCap = o1.lineCap;\n        o2.lineJoin = o1.lineJoin;\n        o2.lineWidth = o1.lineWidth;\n        o2.miterLimit = o1.miterLimit;\n        o2.shadowBlur = o1.shadowBlur;\n        o2.shadowColor = o1.shadowColor;\n        o2.shadowOffsetX = o1.shadowOffsetX;\n        o2.shadowOffsetY = o1.shadowOffsetY;\n        o2.strokeStyle = o1.strokeStyle;\n        o2.globalAlpha = o1.globalAlpha;\n        o2.arcScaleX_ = o1.arcScaleX_;\n        o2.arcScaleY_ = o1.arcScaleY_;\n        o2.lineScale_ = o1.lineScale_;\n        o2.dashArray = o1.dashArray;\n    }\n\n    function processStyle(styleString) {\n        var str, alpha = 1;\n\n        styleString = String(styleString);\n        if (styleString.substring(0, 3) == 'rgb') {\n            var start = styleString.indexOf('(', 3);\n            var end = styleString.indexOf(')', start + 1);\n            var guts = styleString.substring(start + 1, end).split(',');\n\n            str = '#';\n            for (var i = 0; i < 3; i++) {\n                str += dec2hex[Number(guts[i])];\n            }\n\n            if (guts.length == 4 && styleString.substr(3, 1) == 'a') {\n                alpha = guts[3];\n            }\n        } else {\n            str = styleString;\n        }\n\n        return {color:str, alpha:alpha};\n    }\n\n    function processLineCap(lineCap) {\n        switch (lineCap) {\n            case 'butt':\n                return 'flat';\n            case 'round':\n                return 'round';\n            case 'square':\n            default:\n                return 'square';\n        }\n    }\n\n    /**\n     * This class implements CanvasRenderingContext2D interface as described by\n     * the WHATWG.\n     * @param {HTMLElement} surfaceElement The element that the 2D context should\n     * be associated with\n     */\n    function CanvasRenderingContext2D_(canvasTarget, scaledWidth, scaledHeight) {\n        // private\n        var _id = _nextId++;\n\n        // public (every instance will have their own copy of these methods, needs to be lightweight)\n        this.get_id = function() { return _id; };\n        this.get_name = function() { return _name + _id; };\n\n        this.m_ = createMatrixIdentity();\n\n        this.mStack_ = [];\n        this.aStack_ = [];\n        this.currentPath_ = [];\n\n        // Canvas context properties\n        this.strokeStyle = '#000';\n        this.fillStyle = '#000';\n\n        this.lineWidth = 1;\n        this.lineJoin = 'miter';\n        this.lineCap = 'butt';\n        this.dashArray = [];\n        this.miterLimit = 1;\n        this.globalAlpha = 1;\n\n        if (!_.has(canvasTarget, \"HLines\") || !_.isArray(canvasTarget.HLines))\n            canvasTarget.HLines = [];\n        if (!_.has(canvasTarget, \"VLines\") || !_.isArray(canvasTarget.VLines))\n            canvasTarget.VLines = [];\n        if (!_.has(canvasTarget, \"Fills\") || !_.isArray(canvasTarget.Fills))\n            canvasTarget.Fills = [];\n        if (!_.has(canvasTarget, \"Texts\") || !_.isArray(canvasTarget.Texts))\n            canvasTarget.Texts = [];\n\n        this.canvas = canvasTarget;\n\n        this.width = scaledWidth;\n        this.height = scaledHeight;\n\n        this.arcScaleX_ = 1;\n        this.arcScaleY_ = 1;\n        this.lineScale_ = 1;\n\n        this.currentFont = null;\n    }\n\n    //private helper methods\n    var _drawPDFLine = function(p1, p2, lineWidth, color) {\n        var dashedLine = _.isArray(this.dashArray) && (this.dashArray.length > 1);\n        var pL = new PDFLine(p1.x, p1.y, p2.x, p2.y, lineWidth, color, dashedLine);\n        pL.processLine(this.canvas);\n    };\n\n    var _drawPDFFill = function(cp, min, max, color) {\n        var width = max.x - min.x;\n        var height = max.y - min.y;\n        var pF = new PDFFill(cp.x, cp.y, width, height, color);\n        pF.processFill(this.canvas);\n    };\n\n    var _needRemoveRect = function(x, y, w, h) {\n        var retVal = (Math.abs(w - Math.abs(h)) < 1 && w < 13);\n        if (retVal) {\n            nodeUtil.p2jinfo(\"Skipped: tiny rect: w=\" + w + \", h=\" + h);\n        }\n        return retVal;\n    };\n\n    var contextPrototype = CanvasRenderingContext2D_.prototype;\n\n    contextPrototype.getContext = function(ctxType) {\n        return (ctxType === \"2d\") ? this : null;\n    };\n\n    contextPrototype.setLineDash = function(lineDash) {\n        this.dashArray = lineDash;\n    };\n\n    contextPrototype.getLineDash= function() {\n        return this.dashArray;\n    };\n\n    contextPrototype.fillText = function(text, x, y, maxWidth, fontSize) {\n        if (!text || text.trim().length < 1)\n            return;\n        var p = this.getCoords_(x, y);\n\n        var a = processStyle(this.fillStyle || this.strokeStyle);\n        var color = (!!a) ? a.color : '#000000';\n\n        this.currentFont.processText(p, text, maxWidth, color, fontSize, this.canvas, this.m_);\n    };\n\n    contextPrototype.strokeText = function(text, x, y, maxWidth) {\n        //MQZ. 10/23/2012, yeah, no hollow text for now\n        this.fillText(text, x, y, maxWidth);\n    };\n\n    contextPrototype.setFont = function(fontObj) {\n        if ((!!this.currentFont) && _.isFunction(this.currentFont.clean)) {\n            this.currentFont.clean();\n            this.currentFont = null;\n        }\n\n        this.currentFont = new PDFFont(fontObj);\n    };\n\n    contextPrototype.clearRect = function () {\n    };\n\n    contextPrototype.beginPath = function () {\n        // TODO: Branch current matrix so that save/restore has no effect\n        //       as per safari docs.\n        this.currentPath_ = [];\n    };\n\n    contextPrototype.moveTo = function (aX, aY) {\n        var p = this.getCoords_(aX, aY);\n        this.currentPath_.push({type:'moveTo', x:p.x, y:p.y});\n        this.currentX_ = p.x;\n        this.currentY_ = p.y;\n    };\n\n    contextPrototype.lineTo = function (aX, aY) {\n        var p = this.getCoords_(aX, aY);\n        this.currentPath_.push({type:'lineTo', x:p.x, y:p.y});\n\n        this.currentX_ = p.x;\n        this.currentY_ = p.y;\n    };\n\n    contextPrototype.bezierCurveTo = function (aCP1x, aCP1y, aCP2x, aCP2y, aX, aY) {\n        var p = this.getCoords_(aX, aY);\n        var cp1 = this.getCoords_(aCP1x, aCP1y);\n        var cp2 = this.getCoords_(aCP2x, aCP2y);\n        bezierCurveTo(this, cp1, cp2, p);\n    };\n\n    // Helper function that takes the already fixed cordinates.\n    function bezierCurveTo(self, cp1, cp2, p) {\n        self.currentPath_.push({\n            type:'bezierCurveTo',\n            cp1x:cp1.x,\n            cp1y:cp1.y,\n            cp2x:cp2.x,\n            cp2y:cp2.y,\n            x:p.x,\n            y:p.y\n        });\n        self.currentX_ = p.x;\n        self.currentY_ = p.y;\n    }\n\n    contextPrototype.quadraticCurveTo = function (aCPx, aCPy, aX, aY) {\n        // the following is lifted almost directly from\n        // http://developer.mozilla.org/en/docs/Canvas_tutorial:Drawing_shapes\n\n        var cp = this.getCoords_(aCPx, aCPy);\n        var p = this.getCoords_(aX, aY);\n\n        var cp1 = {\n            x:this.currentX_ + 2.0 / 3.0 * (cp.x - this.currentX_),\n            y:this.currentY_ + 2.0 / 3.0 * (cp.y - this.currentY_)\n        };\n        var cp2 = {\n            x:cp1.x + (p.x - this.currentX_) / 3.0,\n            y:cp1.y + (p.y - this.currentY_) / 3.0\n        };\n\n        bezierCurveTo(this, cp1, cp2, p);\n    };\n\n    contextPrototype.arc = function (aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise) {\n        var arcType = aClockwise ? 'at' : 'wa';\n\n        var xStart = aX + mc(aStartAngle) * aRadius;\n        var yStart = aY + ms(aStartAngle) * aRadius;\n\n        var xEnd = aX + mc(aEndAngle) * aRadius;\n        var yEnd = aY + ms(aEndAngle) * aRadius;\n\n        // IE won't render arches drawn counter clockwise if xStart == xEnd.\n        if (xStart == xEnd && !aClockwise) {\n            xStart += 0.125; // Offset xStart by 1/80 of a pixel. Use something\n            // that can be represented in binary\n        }\n\n        var p = this.getCoords_(aX, aY);\n        var pStart = this.getCoords_(xStart, yStart);\n        var pEnd = this.getCoords_(xEnd, yEnd);\n\n        this.currentPath_.push({type:arcType,\n            x:p.x,\n            y:p.y,\n            radius:aRadius,\n            xStart:pStart.x,\n            yStart:pStart.y,\n            xEnd:pEnd.x,\n            yEnd:pEnd.y});\n\n    };\n\n    contextPrototype.rect = function (aX, aY, aWidth, aHeight) {\n        if (_needRemoveRect.call(this, aX, aY, aWidth, aHeight)) {\n            return;//try to remove the rectangle behind radio buttons and checkboxes\n        }\n\n        this.moveTo(aX, aY);\n        this.lineTo(aX + aWidth, aY);\n        this.lineTo(aX + aWidth, aY + aHeight);\n        this.lineTo(aX, aY + aHeight);\n        this.closePath();\n    };\n\n    contextPrototype.strokeRect = function (aX, aY, aWidth, aHeight) {\n        if (_needRemoveRect.call(this, aX, aY, aWidth, aHeight)) {\n            return;//try to remove the rectangle behind radio buttons and checkboxes\n        }\n\n        var oldPath = this.currentPath_;\n        this.beginPath();\n\n        this.moveTo(aX, aY);\n        this.lineTo(aX + aWidth, aY);\n        this.lineTo(aX + aWidth, aY + aHeight);\n        this.lineTo(aX, aY + aHeight);\n        this.closePath();\n        this.stroke();\n\n        this.currentPath_ = oldPath;\n    };\n\n    contextPrototype.fillRect = function (aX, aY, aWidth, aHeight) {\n        if (_needRemoveRect.call(this, aX, aY, aWidth, aHeight)) {\n            return;//try to remove the rectangle behind radio buttons and checkboxes\n        }\n\n        var oldPath = this.currentPath_;\n        this.beginPath();\n\n        this.moveTo(aX, aY);\n        this.lineTo(aX + aWidth, aY);\n        this.lineTo(aX + aWidth, aY + aHeight);\n        this.lineTo(aX, aY + aHeight);\n        this.closePath();\n        this.fill();\n\n        this.currentPath_ = oldPath;\n    };\n\n    contextPrototype.createLinearGradient = function (aX0, aY0, aX1, aY1) {\n        var gradient = new CanvasGradient_('gradient');\n        gradient.x0_ = aX0;\n        gradient.y0_ = aY0;\n        gradient.x1_ = aX1;\n        gradient.y1_ = aY1;\n        return gradient;\n    };\n\n    contextPrototype.createRadialGradient = function (aX0, aY0, aR0, aX1, aY1, aR1) {\n        var gradient = new CanvasGradient_('gradientradial');\n        gradient.x0_ = aX0;\n        gradient.y0_ = aY0;\n        gradient.r0_ = aR0;\n        gradient.x1_ = aX1;\n        gradient.y1_ = aY1;\n        gradient.r1_ = aR1;\n        return gradient;\n    };\n\n    contextPrototype.drawImage = function (image, var_args) {\n        //MQZ. no image drawing support for now\n    };\n\n    contextPrototype.getImageData = function (x, y, w, h) {\n        //MQZ. returns empty data buffer for now\n        return {\n            width:w,\n            height:h,\n            data:new Uint8Array(w * h * 4)\n        };\n    };\n\n    contextPrototype.stroke = function (aFill) {\n        if (this.currentPath_.length < 2) {\n            return;\n        }\n\n        var a = processStyle(aFill ? this.fillStyle : this.strokeStyle);\n        var color = a.color;\n//        var opacity = a.alpha * this.globalAlpha;\n        var lineWidth = this.lineScale_ * this.lineWidth;\n\n        var min = {x:null, y:null};\n        var max = {x:null, y:null};\n\n        for (var i = 0; i < this.currentPath_.length; i++) {\n            var p = this.currentPath_[i];\n\n            switch (p.type) {\n                case 'moveTo':\n                    break;\n                case 'lineTo':\n                    if (!aFill) { //lines\n                        if (i > 0) {\n                            _drawPDFLine.call(this, this.currentPath_[i-1], p, lineWidth, color);\n                        }\n                    }\n                    break;\n                case 'close':\n                    if (!aFill) { //lines\n                        if (i > 0) {\n                            _drawPDFLine.call(this, this.currentPath_[i-1], this.currentPath_[0], lineWidth, color);\n                        }\n                    }\n                    p = null;\n                    break;\n                case 'bezierCurveTo':\n                    break;\n                case 'at':\n                case 'wa':\n                    break;\n            }\n\n            // Figure out dimensions so we can set fills' coordinates correctly\n            if (aFill && p) {\n                if (min.x == null || p.x < min.x) {\n                    min.x = p.x;\n                }\n                if (max.x == null || p.x > max.x) {\n                    max.x = p.x;\n                }\n                if (min.y == null || p.y < min.y) {\n                    min.y = p.y;\n                }\n                if (max.y == null || p.y > max.y) {\n                    max.y = p.y;\n                }\n            }\n        }\n\n        if (aFill) { //fill\n            _drawPDFFill.call(this, min, min, max, color);\n        }\n    };\n\n    contextPrototype.fill = function () {\n        this.stroke(true);\n    };\n\n    contextPrototype.closePath = function () {\n        this.currentPath_.push({type:'close'});\n    };\n\n    /**\n     * @private\n     */\n    contextPrototype.getCoords_ = function (aX, aY) {\n        var m = this.m_;\n        return {\n            x: (aX * m[0][0] + aY * m[1][0] + m[2][0]),\n            y: (aX * m[0][1] + aY * m[1][1] + m[2][1])\n        };\n    };\n\n    contextPrototype.save = function () {\n        var o = {};\n        copyState(this, o);\n        this.aStack_.push(o);\n        this.mStack_.push(this.m_);\n        this.m_ = matrixMultiply(createMatrixIdentity(), this.m_);\n    };\n\n    contextPrototype.restore = function () {\n        copyState(this.aStack_.pop(), this);\n        this.m_ = this.mStack_.pop();\n    };\n\n    function matrixIsFinite(m) {\n        for (var j = 0; j < 3; j++) {\n            for (var k = 0; k < 2; k++) {\n                if (!isFinite(m[j][k]) || isNaN(m[j][k])) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n\n    function setM(ctx, m, updateLineScale) {\n        if (!matrixIsFinite(m)) {\n            return;\n        }\n        ctx.m_ = m;\n\n        if (updateLineScale) {\n            // Get the line scale.\n            // Determinant of this.m_ means how much the area is enlarged by the\n            // transformation. So its square root can be used as a scale factor\n            // for width.\n            var det = m[0][0] * m[1][1] - m[0][1] * m[1][0];\n            ctx.lineScale_ = sqrt(abs(det));\n        }\n    }\n\n    contextPrototype.translate = function (aX, aY) {\n        var m1 = [\n            [1, 0, 0],\n            [0, 1, 0],\n            [aX, aY, 1]\n        ];\n\n        setM(this, matrixMultiply(m1, this.m_), false);\n    };\n\n    contextPrototype.rotate = function (aRot) {\n        var c = mc(aRot);\n        var s = ms(aRot);\n\n        var m1 = [\n            [c, s, 0],\n            [-s, c, 0],\n            [0, 0, 1]\n        ];\n\n        setM(this, matrixMultiply(m1, this.m_), false);\n    };\n\n    contextPrototype.scale = function (aX, aY) {\n        this.arcScaleX_ *= aX;\n        this.arcScaleY_ *= aY;\n        var m1 = [\n            [aX, 0, 0],\n            [0, aY, 0],\n            [0, 0, 1]\n        ];\n\n        setM(this, matrixMultiply(m1, this.m_), true);\n    };\n\n    contextPrototype.transform = function (m11, m12, m21, m22, dx, dy) {\n        var m1 = [\n            [m11, m12, 0],\n            [m21, m22, 0],\n            [dx, dy, 1]\n        ];\n\n        setM(this, matrixMultiply(m1, this.m_), true);\n    };\n\n    contextPrototype.setTransform = function (m11, m12, m21, m22, dx, dy) {\n        var m = [\n            [m11, m12, 0],\n            [m21, m22, 0],\n            [dx, dy, 1]\n        ];\n\n        setM(this, m, true);\n    };\n\n    /******** STUBS ********/\n    contextPrototype.clip = function () {\n        // TODO: Implement\n    };\n\n    contextPrototype.arcTo = function () {\n        // TODO: Implement\n    };\n\n    contextPrototype.createPattern = function () {\n        return new CanvasPattern_;\n    };\n\n    // Gradient / Pattern Stubs\n    function CanvasGradient_(aType) {\n        this.type_ = aType;\n        this.x0_ = 0;\n        this.y0_ = 0;\n        this.r0_ = 0;\n        this.x1_ = 0;\n        this.y1_ = 0;\n        this.r1_ = 0;\n        this.colors_ = [];\n    }\n\n    CanvasGradient_.prototype.addColorStop = function (aOffset, aColor) {\n        aColor = processStyle(aColor);\n        this.colors_.push({offset:aOffset,\n            color:aColor.color,\n            alpha:aColor.alpha});\n    };\n\n    function CanvasPattern_() {\n    }\n\n    // set up externs\n    module.exports = CanvasRenderingContext2D_;\n//  CanvasRenderingContext2D = CanvasRenderingContext2D_;\n//  CanvasGradient = CanvasGradient_;\n//  CanvasPattern = CanvasPattern_;\n\n})();\n","var nodeUtil = require(\"util\"),\n    _ = require(\"underscore\"),\n    PDFUnit = require('./pdfunit.js');\n\nvar PDFField = (function PDFFieldClosure() {\n    'use strict';\n    // private static\n    var _nextId = 1;\n    var _name = 'PDFField';\n    var _tabIndex = 0;\n\n    var kFBANotOverridable = 0x00000400; // indicates the field is read only by the user\n    var kFBARequired = 0x00000010; // indicates the field is required\n    var kMinHeight = 20;\n\n    // constructor\n    var cls = function (field, viewport, Fields, Boxsets) {\n        // private\n        var _id = _nextId++;\n\n        // public (every instance will have their own copy of these methods, needs to be lightweight)\n        this.get_id = function() { return _id; };\n        this.get_name = function() { return _name + _id; };\n\n        this.field = field;\n        this.viewport = viewport;\n        this.Fields = Fields;\n        this.Boxsets = Boxsets;\n    };\n\n    // Normalize rectangle rect=[x1, y1, x2, y2] so that (x1,y1) < (x2,y2)\n    // For coordinate systems whose origin lies in the bottom-left, this\n    // means normalization to (BL,TR) ordering. For systems with origin in the\n    // top-left, this means (TL,BR) ordering.\n    var _normalizeRect = function(rect) {\n        var r = rect.slice(0); // clone rect\n        if (rect[0] > rect[2]) {\n            r[0] = rect[2];\n            r[2] = rect[0];\n        }\n        if (rect[1] > rect[3]) {\n            r[1] = rect[3];\n            r[3] = rect[1];\n        }\n        return r;\n    };\n\n    // public static\n    cls.get_nextId = function () {\n        return _name + _nextId;\n    };\n\n    cls.isWidgetSupported = function(field) {\n        var retVal = false;\n\n        switch(field.fieldType) {\n            case 'Tx': retVal = true; break; //text input\n            case 'Btn':\n                if (field.fieldFlags & 32768) {\n                    field.fieldType = 'Rd'; //radio button\n                }\n                else if (field.fieldFlags & 65536) {\n                    field.fieldType = 'Btn'; //push button\n                }\n                else {\n                    field.fieldType = 'Cb'; //checkbox\n                }\n                retVal = true;\n                break;\n            case 'Ch': retVal = true; break; //drop down\n            default:\n                nodeUtil.p2jwarn(\"Unsupported: field.fieldType of \" + field.fieldType);\n                break;\n        }\n\n        return retVal;\n    };\n\n    cls.isFormElement = function(field) {\n        var retVal = false;\n        switch(field.subtype) {\n            case 'Widget': retVal = cls.isWidgetSupported(field); break;\n            default:\n                nodeUtil.p2jwarn(\"Unsupported: field.type of \" + field.subtype);\n                break;\n        }\n        return retVal;\n    };\n\n    var _getFieldPosition = function(field) {\n        var viewPort = this.viewport;\n        var fieldRect = viewPort.convertToViewportRectangle(field.rect);\n        var rect = _normalizeRect(fieldRect);\n\n        var height = rect[3] - rect[1];\n        if (field.fieldType === 'Tx') {\n            if (height > kMinHeight + 2) {\n                rect[1] += 2;\n                height -= 2;\n            }\n        }\n        else if (field.fieldType !== 'Ch') { //checkbox, radio button, and link button\n            rect[1] -= 3;\n        }\n\n        height = (height >= kMinHeight) ? height : kMinHeight;\n\n        return {\n            x: PDFUnit.toFormX(rect[0]),\n            y: PDFUnit.toFormY(rect[1]),\n            w: PDFUnit.toFormX(rect[2] - rect[0]),\n            h: PDFUnit.toFormY(height)\n        };\n    };\n\n    var _getFieldBaseData = function(field) {\n        var attributeMask = 0;\n        //PDF Spec p.676 TABLE 8.70 Field flags common to all field types\n        if (field.fieldFlags & 0x00000001) {\n            attributeMask |= kFBANotOverridable;\n        }\n        if (field.fieldFlags & 0x00000002) {\n            attributeMask |= kFBARequired;\n        }\n\n        var anData = {\n            id: { Id: field.fullName, EN: 0},\n            TI: field.TI,\n            AM: attributeMask\n        };\n        //PDF Spec p.675: add TU (AlternativeText) fields to provide accessibility info\n        if (field.alternativeText && field.alternativeText.length > 1) {\n            anData.TU = field.alternativeText;\n        }\n\n        return _.extend(anData, _getFieldPosition.call(this, field));\n    };\n\n    var _addAlpha = function(field) {\n        var anData = _.extend({\n            style: 48,\n            T: {\n                Name: field.TName || \"alpha\",\n                TypeInfo: {}\n            }\n        }, _getFieldBaseData.call(this, field));\n\n        if (field.MV) { //field attributes: arbitrary mask value\n            anData.MV = field.MV;\n        }\n        if (field.fieldValue) {\n            anData.V = field.fieldValue; //read-only field value, like \"self-prepared\"\n        }\n\n        this.Fields.push(anData);\n    };\n\n    var _addCheckBox = function(box) {\n        var anData = _.extend({\n            style: 48,\n            T: {\n                Name: \"box\",\n                TypeInfo: {}\n            }\n        }, _getFieldBaseData.call(this, box));\n\n        this.Boxsets.push({boxes:[anData]});\n    };\n\n    var _addRadioButton = function(box) {\n        var anData = _.extend({\n            style: 48,\n            T: {\n                Name: \"box\",\n                TypeInfo: {}\n            }\n        }, _getFieldBaseData.call(this, box));\n\n        anData.id.Id = box.value;\n        if (_.has(box, 'checked')) {\n            anData.checked = box.checked;\n        }\n\n        var rdGroup = _.find(this.Boxsets, function(boxset) {\n             return _.has(boxset, 'id') && _.has(boxset.id, 'Id') && (boxset.id.Id === box.fullName);\n        });\n\n        if ((!!rdGroup) && (_.has(rdGroup, 'boxes'))) {\n            rdGroup.boxes.push(anData);\n        }\n        else {\n            this.Boxsets.push({boxes:[anData], id: { Id: box.fullName, EN: 0}});\n        }\n    };\n\n    var _addLinkButton = function(field) {\n        var anData = _.extend({\n            style: 48,\n            T: {\n                Name: \"link\"\n            },\n            FL: {\n                form: {Id: field.FL}\n            }\n        }, _getFieldBaseData.call(this, field));\n\n        this.Fields.push(anData);\n    };\n\n    var _addSelect = function(field) {\n        var anData = _.extend({\n            style: 48,\n            T: {\n                Name: \"alpha\",\n                TypeInfo: {}\n            }\n        }, _getFieldBaseData.call(this, field));\n\n        anData.w -= 0.5; //adjust combobox width\n        anData.PL = {V: [], D: []};\n        _.each(field.value, function(ele, idx) {\n            anData.PL.D.push(ele[0]);\n            anData.PL.V.push(ele[1]);\n        });\n\n        this.Fields.push(anData);\n    };\n\n    // public (every instance will share the same method, but has no access to private fields defined in constructor)\n    cls.prototype.processField = function () {\n\n        this.field.TI = _tabIndex++;\n\n        switch(this.field.fieldType) {\n            case 'Tx': _addAlpha.call(this, this.field); break;\n            case 'Cb': _addCheckBox.call(this, this.field); break;\n            case 'Rd': _addRadioButton.call(this, this.field);break;\n            case 'Btn':_addLinkButton.call(this, this.field); break;\n            case 'Ch': _addSelect.call(this, this.field); break;\n        }\n\n        this.clean();\n    };\n\n    cls.prototype.clean = function() {\n        delete this.get_id;\n        delete this.get_name;\n\n        delete this.field;\n        delete this.viewport;\n        delete this.Fields;\n        delete this.Boxsets;\n    };\n\n    //static public method to generate fieldsType object based on parser result\n    cls.getAllFieldsTypes = function(data) {\n\n        function isFieldReadOnly(field) {\n            return (field.AM & kFBANotOverridable) ? true : false;\n        }\n\n        function getFieldBase(field) {\n            return {id: field.id.Id, type: field.T.Name, calc: isFieldReadOnly(field), value: field.V || \"\"};\n        }\n\n        var retVal = [];\n\n        _.each(data.Pages, function(page) {\n            _.each(page.Boxsets, function(boxsets) {\n                if (boxsets.boxes.length > 1) { //radio button\n                    _.each(boxsets.boxes, function(box) {\n                        retVal.push({id: boxsets.id.Id, type: \"radio\", calc: isFieldReadOnly(box), value: box.id.Id});\n                    });\n                }\n                else { //checkbox\n                    retVal.push(getFieldBase(boxsets.boxes[0]));\n                }\n            });\n\n            _.each(page.Fields, function(field){\n                retVal.push(getFieldBase(field));\n            });\n        });\n        return retVal;\n    };\n\n    return cls;\n})();\n\nmodule.exports = PDFField;\n\n","var nodeUtil = require(\"util\"),\n    _ = require(\"underscore\"),\n    PDFUnit = require('./pdfunit.js');\n\nvar PDFAnno = (function PDFAnnoClosure() {\n    'use strict';\n\n    //BEGIN - MQZ 9/19/2012. Helper functions to parse acroForm elements\n    function setupRadioButton(annotation, item) {\n        var asName = '';\n        //PDF Spec p.689: parent item's DV holds the item's value that is selected by default\n        var po = annotation.get('Parent');\n        if (po) {\n            po.forEach(function(key, val){\n                if (key === 'DV') {\n                    asName = val.name || '';\n                }\n                else if (key === 'TU') {\n                    //radio buttons use the alternative text from the parent\n                    item.alternativeText = val;\n                }\n            });\n        }\n\n        //PDF Spec p.606: get appearance dictionary\n        var ap = annotation.get('AP');\n        //PDF Spec p.614 get normal appearance\n        var nVal = ap.get('N');\n        //PDF Spec p.689\n        nVal.forEach(function (key, value) {\n            if (key.toLowerCase() != \"off\") {\n                //value if selected\n                item.value = key; //export value\n                item.checked = (key === asName); //initial selection state\n            }\n        });\n\n        if (!item.value)\n            item.value = \"off\";\n    }\n\n    function setupPushButton(annotation, item) {\n        //button label: PDF Spec p.640\n        var mk = annotation.get('MK');\n        item.value = mk.get('CA') || '';\n\n        //button action: url when mouse up: PDF Spec:p.642\n        item.FL = \"\";\n        var ap = annotation.get('A');\n        if (ap) {\n            var sp = ap.get('S');\n            item.FL = ap.get(sp.name);\n        }\n    }\n\n    function setupCheckBox(annotation, item) {\n        //PDF Spec p.606: get appearance dictionary\n        var ap = annotation.get('AP');\n        //PDF Spec p.614 get normal appearance\n        var nVal = ap.get('N');\n\n        //PDF Spec p.689\n        var i = 0;\n        nVal.forEach(function (key, value) {\n            i++;\n            if (i == 1) //initial selection state\n                item.value = key;\n        });\n    }\n\n    function setupDropDown(annotation, item) {\n        //PDF Spec p.688\n        item.value = annotation.get('Opt') || [];\n    }\n\n    function setupFieldAttributes(annotation, item) {\n        //MQZ. Jan.03.2013. additional-actions dictionary\n        //PDF Spec P.648. 8.5.2. Trigger Events\n        var aa = annotation.get('AA');\n        if (!aa) {\n            return;\n        }\n\n        //PDF Spec p.651 get format dictionary\n        var nVal = aa.get('F');\n        if (!nVal) {\n            nVal = aa.get('K');\n            if (!nVal)\n                return;\n        }\n\n        nVal.forEach(function (key, value) {\n            if (key === \"JS\") {\n                processFieldAttribute(value, item);\n            }\n        });\n    }\n\n    var AFSpecial_Format = ['zip', 'zip', 'phone', 'ssn', ''];\n//  var AFNumber_Format = ['nDec', 'sepStyle', 'negStyle', 'currStyle', 'strCurrency', 'bCurrencyPrepend'];\n    // nDec is the number of places after the decimal point;\n    // sepStyle is an integer denoting whether to use a separator or not. If sepStyle=0, use commas. If sepStyle=1, do not separate.\n    // negStyle is the formatting used for negative numbers: 0 = MinusBlack, 1 = Red, 2 = ParensBlack, 3 = ParensRed\n    // currStyle is the currency style - not used\n    //- strCurrency is the currency symbol\n    // bCurrencyPrepend\n//  var AFDate_FormatEx = [\"m/d\", \"m/d/yy\", \"mm/dd/yy\", \"mm/yy\", \"d-mmm\", \"d-mmm-yy\", \"dd-mmm-yy\", \"yymm-dd\", \"mmm-yy\", \"mmmm-yy\", \"mmm d, yyyy\", \"mmmm d, yyyy\", \"m/d/yy h:MM tt\", \"m/d/yy HH:MM\"];\n\n    function processFieldAttribute(jsFuncName, item) {\n        if (item.hasOwnProperty('TName'))\n            return;\n\n        var vParts = jsFuncName.split('(');\n        if (vParts.length !== 2)\n            return;\n\n        var funcName = vParts[0];\n        var funcParam = vParts[1].split(')')[0];\n\n        switch (funcName) {\n            case 'AFSpecial_Format':\n                item.TName = AFSpecial_Format[Number(funcParam)];\n                break;\n            case 'AFNumber_Format':\n//              nfs = funcParam.split(',');\n//set the Money fields to use the Number type with no decimal places after, no commas, and bCurrencyPrepend is set as true; (o use a negative sign (fits the PDF layout and our print formatting as well).\n//              if (nfs[0] === '0' && nfs[1] === '1' && nfs[5])\n//                  item.TName = 'money';\n//              else\n                item.TName = 'number';\n                break;\n            case 'AFDate_FormatEx':\n                item.TName = 'date';\n                item.MV = funcParam.replace(/^'+|^\"+|'+$|\"+$/g,''); //mask value\n                break;\n            case 'AFSpecial_KeystrokeEx': //special format: \"arbitrary mask\"\n                var maskValue = funcParam.replace(/^'+|^\"+|'+$|\"+$/g,''); //mask value\n                if ((!!maskValue) && maskValue.length > 0 && maskValue.length < 64) {\n                    item.TName = 'mask'; //fixed length input\n                    item.MV = maskValue;\n                }\n                break;\n            case 'AFPercent_Format':\n                item.TName = 'percent'; //funcParam => 2, 0, will specified how many decimal places\n                break;\n        }\n    }\n\n    //END - MQZ 9/19/2012. Helper functions to parse acroForm elements\n\n    // private static\n    var _nextId = 1;\n    var _name = 'PDFAnno';\n\n    // constructor\n    var cls = function (field, viewport, Fields, Boxsets) {\n        // private\n        var _id = _nextId++;\n\n        // public (every instance will have their own copy of these methods, needs to be lightweight)\n        this.get_id = function () {\n            return _id;\n        };\n        this.get_name = function () {\n            return _name + _id;\n        };\n    };\n\n    cls.prototype.clean = function () {\n        delete this.get_id;\n        delete this.get_name;\n    };\n\n    // public static\n    cls.get_nextId = function () {\n        return _name + _nextId;\n    };\n\n    cls.processAnnotation = function (annotation, item) {\n        if (item.fieldType == 'Btn') { //PDF Spec p.675\n            if (item.fieldFlags & 32768) {\n                setupRadioButton(annotation, item);\n            }\n            else if (item.fieldFlags & 65536) {\n                setupPushButton(annotation, item);\n            }\n            else {\n                setupCheckBox(annotation, item);\n            }\n        }\n        else if (item.fieldType == 'Ch') {\n            setupDropDown(annotation, item);\n        }\n        else if (item.fieldType == 'Tx') {\n            setupFieldAttributes(annotation, item);\n        }\n    };\n\n    return cls;\n})();\n\nmodule.exports = PDFAnno;\n\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  for (var i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(\n      uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)\n    ))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n","////////////////////////////////start of fake image\nvar PDFImage = (function() {\n\t'use strict';\n\n\tvar _src = '';\n\tvar _onload = null;\n\n\tthis.__defineSetter__(\"onload\", function(val) {\n\t\t_onload = val;\n\t});\n\n\tthis.__defineGetter__(\"onload\", function() {\n\t\treturn _onload;\n\t});\n\n\tthis.__defineSetter__(\"src\", function(val) {\n\t\t_src = val;\n\t\tif (_onload) _onload();\n\t});\n\n\tthis.__defineGetter__(\"src\", function() {\n\t\treturn _src;\n\t});\n\n    this.btoa = function(val) {\n        if (typeof window === 'undefined') {\n            return (new Buffer(val, 'ascii')).toString('base64');\n        }\n        else if (typeof window.btoa === 'function')\n            return window.btoa(val);\n\n        return \"\";\n    };\n\n});\n\nmodule.exports = PDFImage;\n","'use strict';\n\nvar nodeUtil = require(\"util\"),\nnodeEvents = require(\"events\"),\nfs = require('fs'),\n_ = require('underscore'),\nDOMParser = require('xmldom').DOMParser,\nPDFCanvas = require('./pdfcanvas.js'),\nPDFUnit = require('./pdfunit.js'),\nPDFField = require('./pdffield.js'),\nPDFAnno = require('./pdfanno.js'),\nImage = require('./pdfimage.js'),\npkInfo = require('../package.json');\n\nvar xmlData;\n\nvar PTIXmlParser = (function () {\n\t'use strict';\n\n\tvar ptiPageArray = [];\n\n\t// constructor\n\tvar cls = function () {\n\t};\n\t\n\tcls.prototype.parseXml = function (filePath,callback) {\n\n\t\tfs.readFile(filePath, 'utf8', function (err,data) {\n\t\t\tif (err) {\n                callback(err);\n\t\t\t}\n\t\t\telse {\n\t\t\t\txmlData = data;\n\n\t\t\t\tvar parser = new DOMParser();\n\t\t\t\tvar dom = parser.parseFromString(xmlData);\n\t\t\t\tvar root = dom.documentElement;\n\n\t\t\t\tvar xmlFields = root.getElementsByTagName(\"field\");\n\t\t\t\tvar fields = [];\n\n\t\t\t\tfor(var i=0;i<xmlFields.length;i++){\n\t\t\t\t\tvar id = xmlFields[i].getAttribute('id');\n\t\t\t\t\tvar xPos = xmlFields[i].getAttribute('x');\n\t\t\t\t\tvar yPos = xmlFields[i].getAttribute('y');\n\t\t\t\t\tvar width = xmlFields[i].getAttribute('width');\n\t\t\t\t\tvar height = xmlFields[i].getAttribute('height');\n\t\t\t\t\tvar type = xmlFields[i].getAttribute('xsi:type');\n\t\t\t\t\tvar page = xmlFields[i].getAttribute('page');\n\t\t\t\t\tvar fontName = xmlFields[i].getAttribute('fontName');\n\t\t\t\t\tvar fontSize = xmlFields[i].getAttribute('fontSize');\n\n\t\t\t\t\tvar item = {};\n\t\t\t\t\t\n\t\t\t\t\tvar rectLeft = parseInt(xPos) - 21; //was 23.5\n\t\t\t\t\tvar rectTop = parseInt(yPos) - 20;//was 23\n\t\t\t\t\tvar rectRight = parseInt(rectLeft) + parseInt(width) - 4;\n\t\t\t\t\tvar rectBottom = parseInt(rectTop) + parseInt(height) - 4;\n\t\t\t\t\t\n\t\t\t\t\titem.fieldType=\"Tx\";\n\t\t\t\t\tif (type == \"Boolean\") {\n\t\t\t\t\t\titem.fieldType=\"Btn\";\n\t\t\t\t\t}\n\t\t\t\t\telse  if (type==\"SSN\" ||  type==\"Phone\" || type==\"zip\") {\n\t\t\t\t\t\titem.TName = type.toLowerCase();\n\t\t\t\t\t}\n\t\t\t\t\titem.alternativeText = \"\";\n\t\t\t\t\titem.fullName = id;\n\t\t\t\t\titem.fontSize = fontSize;\n\t\t\t\t\titem.subtype = \"Widget\";\n\n\t\t\t\t\titem.rect = [rectLeft, rectTop, rectRight, rectBottom];;\n\n\t\t\t\t\tfields.push(item);\n\t\t\t\t\t\n\t\t\t\t\tptiPageArray[parseInt(page)]=fields;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t\tcallback();\n\t\t});\n\t};\n\n\tcls.prototype.getFields = function(pageNum) {\n\t\treturn ptiPageArray[pageNum];\n\t};\n\treturn cls;\n})();\n\nmodule.exports = PTIXmlParser;\n\n\n","var nodeUtil = require(\"util\"),\n    nodeEvents = require(\"events\"),\n    fs = require('fs'),\n    _ = require('underscore'),\n    DOMParser = require('xmldom').DOMParser,\n    PDFCanvas = require('./pdfcanvas.js'),\n    PDFUnit = require('./pdfunit.js'),\n    PDFField = require('./pdffield.js'),\n    PDFAnno = require('./pdfanno.js'),\n    Image = require('./pdfimage.js'),\n    pkInfo = require('../package.json');\n\nvar _pdfjsFiles = [\n    'shared/util.js',\n    'shared/colorspace.js',\n    'shared/pattern.js',\n    'shared/function.js',\n    'shared/annotation.js',\n\n    'core/core.js',\n    'core/obj.js',\n    'core/charsets.js',\n    'core/crypto.js',\n    'core/evaluator.js',\n    'core/fonts.js',\n    'core/font_renderer.js',\n    'core/glyphlist.js',\n    'core/image.js',\n    'core/metrics.js',\n    'core/parser.js',\n    'core/stream.js',\n    'core/worker.js',\n    'core/jpx.js',\n    'core/jbig2.js',\n    'core/bidi.js',\n    'core/jpg.js',\n    'core/chunked_stream.js',\n    'core/pdf_manager.js',\n    'core/cmap.js',\n    'core/cidmaps.js',\n\n    'display/canvas.js',\n    'display/font_loader.js',\n    'display/metadata.js',\n    'display/api.js'\n];\n\n//////replacing HTML5 canvas with PDFCanvas (in-memory canvas)\nfunction createScratchCanvas(width, height) { return new PDFCanvas({}, width, height); }\n\nvar PDFJS = {};\nvar globalScope = {console: console};\n\n/*var _basePath = __dirname + \"/../base/\";\nvar _fileContent = '';\n_.each(_pdfjsFiles, function(fielName, idx) {\n    _fileContent += fs.readFileSync(__dirname + '/../base/display/api.js', 'utf8');\n});*/\nvar _fileContent = '';\n_fileContent += fs.readFileSync(__dirname + '/../base/shared/util.js','utf8');\n_fileContent += fs.readFileSync(__dirname + '/../base/shared/colorspace.js','utf8');\n_fileContent += fs.readFileSync(__dirname + '/../base/shared/pattern.js','utf8');\n_fileContent += fs.readFileSync(__dirname + '/../base/shared/function.js','utf8');\n_fileContent += fs.readFileSync(__dirname + '/../base/shared/annotation.js','utf8');\n_fileContent += fs.readFileSync(__dirname + '/../base/core/core.js','utf8');\n_fileContent += fs.readFileSync(__dirname + '/../base/core/obj.js','utf8');\n_fileContent += fs.readFileSync(__dirname + '/../base/core/charsets.js','utf8');\n_fileContent += fs.readFileSync(__dirname + '/../base/core/crypto.js','utf8');\n_fileContent += fs.readFileSync(__dirname + '/../base/core/evaluator.js','utf8');\n_fileContent += fs.readFileSync(__dirname + '/../base/core/fonts.js','utf8');\n_fileContent += fs.readFileSync(__dirname + '/../base/core/font_renderer.js','utf8');\n_fileContent += fs.readFileSync(__dirname + '/../base/core/glyphlist.js','utf8');\n_fileContent += fs.readFileSync(__dirname + '/../base/core/image.js','utf8');\n_fileContent += fs.readFileSync(__dirname + '/../base/core/metrics.js','utf8');\n_fileContent += fs.readFileSync(__dirname + '/../base/core/parser.js','utf8');\n_fileContent += fs.readFileSync(__dirname + '/../base/core/stream.js','utf8');\n_fileContent += fs.readFileSync(__dirname + '/../base/core/worker.js','utf8');\n_fileContent += fs.readFileSync(__dirname + '/../base/core/jpx.js','utf8');\n_fileContent += fs.readFileSync(__dirname + '/../base/core/jbig2.js','utf8');\n_fileContent += fs.readFileSync(__dirname + '/../base/core/bidi.js','utf8');\n_fileContent += fs.readFileSync(__dirname + '/../base/core/jpg.js','utf8');\n_fileContent += fs.readFileSync(__dirname + '/../base/core/chunked_stream.js','utf8');\n_fileContent += fs.readFileSync(__dirname + '/../base/core/pdf_manager.js','utf8');\n_fileContent += fs.readFileSync(__dirname + '/../base/core/cmap.js','utf8');\n_fileContent += fs.readFileSync(__dirname + '/../base/core/cidmaps.js','utf8');\n_fileContent += fs.readFileSync(__dirname + '/../base/display/canvas.js','utf8');\n_fileContent += fs.readFileSync(__dirname + '/../base/display/font_loader.js','utf8');\n_fileContent += fs.readFileSync(__dirname + '/../base/display/metadata.js','utf8');\n_fileContent += fs.readFileSync(__dirname + '/../base/display/api.js','utf8');\neval(_fileContent);\n\n////////////////////////////////start of helper classes\nvar PDFPageParser = (function () {\n    'use strict';\n    // private static\n    var _nextId = 1;\n    var _name = 'PDFPageParser';\n\n    var RenderingStates = {\n      INITIAL: 0,\n      RUNNING: 1,\n      PAUSED: 2,\n      FINISHED: 3\n    };\n\n    var _addField = function(field) {\n        if (!PDFField.isFormElement(field))\n            return;\n\n        var oneField = new PDFField(field, this.viewport, this.Fields, this.Boxsets);\n        oneField.processField();\n    };\n\n    // constructor\n    var cls = function (pdfPage, id, scale, ptiParser) {\n        nodeEvents.EventEmitter.call(this);\n        // private\n        var _id = _nextId++;\n\n        // public (every instance will have their own copy of these methods, needs to be lightweight)\n        this.get_id = function() { return _id; };\n        this.get_name = function() { return _name + _id; };\n\n        // public, this instance copies\n        this.id = id;\n        this.pdfPage = pdfPage;\n        this.ptiParser = ptiParser;\n\n        this.scale = scale || 1.0;\n\n        //leave out the 2nd parameter in order to use page's default rotation (for both portrait and landscape form)\n        this.viewport = this.pdfPage.getViewport(this.scale);\n\n        this.renderingState = RenderingStates.INITIAL;\n\n        //form elements other than radio buttons and check boxes\n        this.Fields = [];\n        //form elements: radio buttons and check boxes\n        this.Boxsets = [];\n\n        //public properties\n        Object.defineProperty(this, 'width', {\n            get:function () {\n                return PDFUnit.toFormX(this.viewport.width);\n            },\n            enumerable:true\n        });\n\n        Object.defineProperty(this, 'height', {\n            get:function () {\n                return PDFUnit.toFormY(this.viewport.height);\n            },\n            enumerable:true\n        });\n    };\n    // inherit from event emitter\n\tnodeUtil.inherits(cls, nodeEvents.EventEmitter);\n\n    cls.prototype.destroy = function() {\n        this.pdfPage.destroy();\n    };\n\n    cls.prototype.getPagePoint = function(x, y) {\n        return this.viewport.convertToPdfPoint(x, y);\n    };\n\n    cls.prototype.parsePage = function(callback, errorCallBack) {\n        if (this.renderingState !== RenderingStates.INITIAL)\n          error('Must be in new state before drawing');\n\n        this.renderingState = RenderingStates.RUNNING;\n\n        var canvas = createScratchCanvas(1, 1);\n        var ctx = canvas.getContext('2d');\n\n        var self = this;\n        function pageViewDrawCallback(error) {\n            self.renderingState = RenderingStates.FINISHED;\n\n            if (error) {\n                var errMsg = 'An error occurred while rendering the page ' + (self.id + 1) +\n                    ':\\n' + error.message +\n                    ':\\n' + error.stack;\n                errorCallBack(errMsg);\n            }\n            else {\n                if (self.ptiParser) {\n                    var extraFields = self.ptiParser.getFields(parseInt(self.id) + 1);\n                    _.each(extraFields, _addField, self);\n                }\n\n                _.extend(self, ctx.canvas);\n                self.stats = self.pdfPage.stats;\n\n                nodeUtil.p2jinfo('page ' + (self.id + 1) + ' is rendered successfully.');\n                callback();\n            }\n        }\n\n        var renderContext = {\n            canvasContext:ctx,\n            viewport:this.viewport\n        };\n\n        self.pdfPage.render(renderContext).then(\n            function pdfPageRenderCallback() {\n                self.pdfPage.getAnnotations().then(function(fields){\n                    _.each(fields, _addField, self);\n                    pageViewDrawCallback(null);\n                });\n            },\n            function pdfPageRenderError(error) {\n                pageViewDrawCallback(error);\n            }\n        );\n    };\n\n    return cls;\n\n})();\n\n////////////////////////////////Start of Node.js Module\nvar PDFJSClass = (function () {\n    'use strict';\n    // private static\n    var _nextId = 1;\n    var _name = 'PDFJSClass';\n    var _sufInfo = \"_fieldInfo.xml\";\n\n    var _getMetaDataString = function(metadata, key){\n        var retVal = \"unknown\";\n        if (metadata && metadata.has(key)) {\n            retVal = encodeURIComponent(metadata.get(key));\n        }\n        return retVal;\n    };\n\n    var _getMetaDataInt = function(metadata, key){\n        var retVal = _getMetaDataString(metadata, key);\n        retVal = parseInt(retVal);\n        if (retVal == null || isNaN(retVal))\n            retVal = -1;\n        return retVal;\n    };\n\n    // constructor\n    var cls = function (needRawText) {\n        nodeEvents.EventEmitter.call(this);\n        // private\n        var _id = _nextId++;\n\n        // public (every instance will have their own copy of these methods, needs to be lightweight)\n        this.get_id = function() { return _id; };\n        this.get_name = function() { return _name + _id; };\n\n        // public, this instance copies\n        this.pdfDocument = null;\n        this.pages = [];\n        this.pageWidth = 0;\n        this.rawTextContents = [];\n\n        this.needRawText = needRawText;\n    };\n    // inherit from event emitter\n\tnodeUtil.inherits(cls, nodeEvents.EventEmitter);\n\n    cls.prototype.parsePDFData = function(arrayBuffer) {\n        this.pdfDocument = null;\n\n        var parameters = {password: '', data: arrayBuffer};\n        var self = this;\n        PDFJS.getDocument(parameters).then(\n            function getDocumentCallback(pdfDocument) {\n                self.load(pdfDocument, 1);\n            },\n            function getDocumentError(message, exception) {\n                var errMsg = \"An error occurred while parsing the PDF: \" + message;\n                nodeUtil.p2jwarn(errMsg);\n                self.emit(\"pdfjs_parseDataError\", errMsg);\n            },\n            function getDocumentProgress(progressData) {\n                nodeUtil.p2jinfo(\"Loading progress: \" + progressData.loaded / progressData.total + \"%\");\n            }\n        );\n    };\n\n    cls.prototype.tryLoadFieldInfoXML = function(pdfFilePath) {\n        var fieldInfoXMLPath = pdfFilePath.replace(\".pdf\", _sufInfo);\n        if ((fieldInfoXMLPath.indexOf(_sufInfo) < 1) || (!fs.existsSync(fieldInfoXMLPath))) {\n            return;\n        }\n        nodeUtil.p2jinfo(\"About to load fieldInfo XML : \" + fieldInfoXMLPath);\n\n        var PTIXmlParser = require('./ptixmlinject');\n        this.ptiParser = new PTIXmlParser();\n        this.ptiParser.parseXml(fieldInfoXMLPath, _.bind(function(err) {\n            if (err) {\n                nodeUtil.p2jwarn(\"fieldInfo XML Error: \" + JSON.stringify(err));\n                this.ptiParser = null;\n            }\n            else {\n                nodeUtil.p2jinfo(\"fieldInfo XML loaded.\");\n            }\n        }, this));\n    };\n\n    cls.prototype.load = function(pdfDocument, scale) {\n        this.pdfDocument = pdfDocument;\n\n        var pagesCount = pdfDocument.numPages;\n        var pagePromises = [];\n        for (var i = 1; i <= pagesCount; i++)\n          pagePromises.push(pdfDocument.getPage(i));\n\n        var pagesPromise = PDFJS.Promise.all(pagePromises);\n\n        nodeUtil.p2jinfo(\"PDF loaded. pagesCount = \" + pagesCount);\n\n        var self = this;\n        pagesPromise.then(function(promisedPages) {\n            self.parsePage(promisedPages, 0, 1.5);\n        });\n\n        pdfDocument.getMetadata().then(function(data) {\n            self.documentInfo = data.info;\n            self.metadata = data.metadata;\n\n            self.parseMetaData();\n        });\n    };\n\n    cls.prototype.parseMetaData = function() {\n        var self = this;\n\n        var info = self.documentInfo;\n        var metadata = self.metadata;\n\n        var pdfTile = \"\";\n        if (metadata && metadata.has('dc:title')) {\n            pdfTile = metadata.get('dc:title');\n        }\n        else if (info && info['Title'])\n            pdfTile = info['Title'];\n\n        var formAttr = {AgencyId:\"\", Name: \"\", MC: false, Max: 1, Parent:\"\"};\n        if (metadata) {\n            formAttr.AgencyId = _getMetaDataString(metadata, 'pdfx:agencyid');\n            if (formAttr.AgencyId != \"unknown\")\n                pdfTile = formAttr.AgencyId;\n\n            formAttr.Name = _getMetaDataString(metadata, 'pdfx:name');\n            formAttr.MC = _getMetaDataString(metadata, 'pdfx:mc') === 'true';\n            formAttr.Max = _getMetaDataInt(metadata, 'pdfx:max');\n            formAttr.Parent = _getMetaDataInt(metadata, 'pdfx:parent');\n        }\n\n        self.emit(\"pdfjs_parseDataReady\", {Transcoder: pkInfo._id, Agency:pdfTile, Id: formAttr});\n    };\n\n    cls.prototype.parsePage = function(promisedPages, id, scale) {\n        nodeUtil.p2jinfo(\"start to parse page:\" + (id+1));\n        var self = this;\n        var pdfPage = promisedPages[id];\n        var pageParser = new PDFPageParser(pdfPage, id, scale, this.ptiParser);\n\n        function continueOnNextPage() {\n            nodeUtil.p2jinfo(\"complete parsing page:\" + (id+1));\n            if (id === (self.pdfDocument.numPages - 1) ) {\n                self.emit(\"pdfjs_parseDataReady\", {Pages:self.pages, Width: self.pageWidth});\n            }\n            else {\n                process.nextTick(function(){\n                    self.parsePage(promisedPages, ++id, scale);\n                });\n            }\n        };\n\n        pageParser.parsePage(function() {\n            if (!self.pageWidth)  //get PDF width\n                self.pageWidth = pageParser.width;\n\n            var page = {Height: pageParser.height,\n                HLines: pageParser.HLines,\n                VLines: pageParser.VLines,\n                Fills:pageParser.Fills,\n//needs to keep current default output format, text content will output to a separate file if '-c' command line argument is set\n//                Content:pdfPage.getTextContent(),\n                Texts: pageParser.Texts,\n                Fields: pageParser.Fields,\n                Boxsets: pageParser.Boxsets\n            };\n\n            self.pages.push(page);\n\n            if (self.needRawText) {\n                pdfPage.getTextContent().then(function(textContent){\n                    self.rawTextContents.push(textContent);\n                    nodeUtil.p2jinfo(\"complete parsing raw text content:\" + (id+1));\n                    continueOnNextPage();\n                });\n            }\n            else {\n                continueOnNextPage();\n            }\n        }, function(errMsg) {\n            self.emit(\"pdfjs_parseDataError\", errMsg);\n        });\n    };\n\n    cls.prototype.getRawTextContent = function() {\n        var retVal = \"\";\n        if (!this.needRawText)\n            return retVal;\n\n        _.each(this.rawTextContents, function(textContent, index) {\n            _.each(textContent.bidiTexts, function(textObj, idx) {\n                retVal += textObj.str + \"\\r\\n\";\n            });\n            retVal += \"----------------Page (\" + index + \") Break----------------\\r\\n\";\n        });\n\n        return retVal;\n    };\n\n    cls.prototype.destroy = function() {\n        this.removeAllListeners();\n\n        if (this.pdfDocument)\n            this.pdfDocument.destroy();\n        this.pdfDocument = null;\n\n        this.pages = null;\n        this.rawTextContents = null;\n    };\n\n    return cls;\n})();\n\nmodule.exports = PDFJSClass;\n////////////////////////////////End of Node.js Module\n","/*global setImmediate: false, setTimeout: false, console: false */\n(function () {\n\n    var async = {};\n\n    // global on the server, window in the browser\n    var root, previous_async;\n\n    root = this;\n    if (root != null) {\n      previous_async = root.async;\n    }\n\n    async.noConflict = function () {\n        root.async = previous_async;\n        return async;\n    };\n\n    function only_once(fn) {\n        var called = false;\n        return function() {\n            if (called) throw new Error(\"Callback was already called.\");\n            called = true;\n            fn.apply(root, arguments);\n        }\n    }\n\n    //// cross-browser compatiblity functions ////\n\n    var _each = function (arr, iterator) {\n        if (arr.forEach) {\n            return arr.forEach(iterator);\n        }\n        for (var i = 0; i < arr.length; i += 1) {\n            iterator(arr[i], i, arr);\n        }\n    };\n\n    var _map = function (arr, iterator) {\n        if (arr.map) {\n            return arr.map(iterator);\n        }\n        var results = [];\n        _each(arr, function (x, i, a) {\n            results.push(iterator(x, i, a));\n        });\n        return results;\n    };\n\n    var _reduce = function (arr, iterator, memo) {\n        if (arr.reduce) {\n            return arr.reduce(iterator, memo);\n        }\n        _each(arr, function (x, i, a) {\n            memo = iterator(memo, x, i, a);\n        });\n        return memo;\n    };\n\n    var _keys = function (obj) {\n        if (Object.keys) {\n            return Object.keys(obj);\n        }\n        var keys = [];\n        for (var k in obj) {\n            if (obj.hasOwnProperty(k)) {\n                keys.push(k);\n            }\n        }\n        return keys;\n    };\n\n    //// exported async module functions ////\n\n    //// nextTick implementation with browser-compatible fallback ////\n    if (typeof process === 'undefined' || !(process.nextTick)) {\n        if (typeof setImmediate === 'function') {\n            async.nextTick = function (fn) {\n                setImmediate(fn);\n            };\n        }\n        else {\n            async.nextTick = function (fn) {\n                setTimeout(fn, 0);\n            };\n        }\n    }\n    else {\n        async.nextTick = process.nextTick;\n    }\n\n    async.each = function (arr, iterator, callback) {\n        callback = callback || function () {};\n        if (!arr.length) {\n            return callback();\n        }\n        var completed = 0;\n        _each(arr, function (x) {\n            iterator(x, only_once(function (err) {\n                if (err) {\n                    callback(err);\n                    callback = function () {};\n                }\n                else {\n                    completed += 1;\n                    if (completed >= arr.length) {\n                        callback(null);\n                    }\n                }\n            }));\n        });\n    };\n    async.forEach = async.each;\n\n    async.eachSeries = function (arr, iterator, callback) {\n        callback = callback || function () {};\n        if (!arr.length) {\n            return callback();\n        }\n        var completed = 0;\n        var iterate = function () {\n            var sync = true;\n            iterator(arr[completed], function (err) {\n                if (err) {\n                    callback(err);\n                    callback = function () {};\n                }\n                else {\n                    completed += 1;\n                    if (completed >= arr.length) {\n                        callback(null);\n                    }\n                    else {\n                        if (sync) {\n                            async.nextTick(iterate);\n                        }\n                        else {\n                            iterate();\n                        }\n                    }\n                }\n            });\n            sync = false;\n        };\n        iterate();\n    };\n    async.forEachSeries = async.eachSeries;\n\n    async.eachLimit = function (arr, limit, iterator, callback) {\n        var fn = _eachLimit(limit);\n        fn.apply(null, [arr, iterator, callback]);\n    };\n    async.forEachLimit = async.eachLimit;\n\n    var _eachLimit = function (limit) {\n\n        return function (arr, iterator, callback) {\n            callback = callback || function () {};\n            if (!arr.length || limit <= 0) {\n                return callback();\n            }\n            var completed = 0;\n            var started = 0;\n            var running = 0;\n\n            (function replenish () {\n                if (completed >= arr.length) {\n                    return callback();\n                }\n\n                while (running < limit && started < arr.length) {\n                    started += 1;\n                    running += 1;\n                    iterator(arr[started - 1], function (err) {\n                        if (err) {\n                            callback(err);\n                            callback = function () {};\n                        }\n                        else {\n                            completed += 1;\n                            running -= 1;\n                            if (completed >= arr.length) {\n                                callback();\n                            }\n                            else {\n                                replenish();\n                            }\n                        }\n                    });\n                }\n            })();\n        };\n    };\n\n\n    var doParallel = function (fn) {\n        return function () {\n            var args = Array.prototype.slice.call(arguments);\n            return fn.apply(null, [async.each].concat(args));\n        };\n    };\n    var doParallelLimit = function(limit, fn) {\n        return function () {\n            var args = Array.prototype.slice.call(arguments);\n            return fn.apply(null, [_eachLimit(limit)].concat(args));\n        };\n    };\n    var doSeries = function (fn) {\n        return function () {\n            var args = Array.prototype.slice.call(arguments);\n            return fn.apply(null, [async.eachSeries].concat(args));\n        };\n    };\n\n\n    var _asyncMap = function (eachfn, arr, iterator, callback) {\n        var results = [];\n        arr = _map(arr, function (x, i) {\n            return {index: i, value: x};\n        });\n        eachfn(arr, function (x, callback) {\n            iterator(x.value, function (err, v) {\n                results[x.index] = v;\n                callback(err);\n            });\n        }, function (err) {\n            callback(err, results);\n        });\n    };\n    async.map = doParallel(_asyncMap);\n    async.mapSeries = doSeries(_asyncMap);\n    async.mapLimit = function (arr, limit, iterator, callback) {\n        return _mapLimit(limit)(arr, iterator, callback);\n    };\n\n    var _mapLimit = function(limit) {\n        return doParallelLimit(limit, _asyncMap);\n    };\n\n    // reduce only has a series version, as doing reduce in parallel won't\n    // work in many situations.\n    async.reduce = function (arr, memo, iterator, callback) {\n        async.eachSeries(arr, function (x, callback) {\n            iterator(memo, x, function (err, v) {\n                memo = v;\n                callback(err);\n            });\n        }, function (err) {\n            callback(err, memo);\n        });\n    };\n    // inject alias\n    async.inject = async.reduce;\n    // foldl alias\n    async.foldl = async.reduce;\n\n    async.reduceRight = function (arr, memo, iterator, callback) {\n        var reversed = _map(arr, function (x) {\n            return x;\n        }).reverse();\n        async.reduce(reversed, memo, iterator, callback);\n    };\n    // foldr alias\n    async.foldr = async.reduceRight;\n\n    var _filter = function (eachfn, arr, iterator, callback) {\n        var results = [];\n        arr = _map(arr, function (x, i) {\n            return {index: i, value: x};\n        });\n        eachfn(arr, function (x, callback) {\n            iterator(x.value, function (v) {\n                if (v) {\n                    results.push(x);\n                }\n                callback();\n            });\n        }, function (err) {\n            callback(_map(results.sort(function (a, b) {\n                return a.index - b.index;\n            }), function (x) {\n                return x.value;\n            }));\n        });\n    };\n    async.filter = doParallel(_filter);\n    async.filterSeries = doSeries(_filter);\n    // select alias\n    async.select = async.filter;\n    async.selectSeries = async.filterSeries;\n\n    var _reject = function (eachfn, arr, iterator, callback) {\n        var results = [];\n        arr = _map(arr, function (x, i) {\n            return {index: i, value: x};\n        });\n        eachfn(arr, function (x, callback) {\n            iterator(x.value, function (v) {\n                if (!v) {\n                    results.push(x);\n                }\n                callback();\n            });\n        }, function (err) {\n            callback(_map(results.sort(function (a, b) {\n                return a.index - b.index;\n            }), function (x) {\n                return x.value;\n            }));\n        });\n    };\n    async.reject = doParallel(_reject);\n    async.rejectSeries = doSeries(_reject);\n\n    var _detect = function (eachfn, arr, iterator, main_callback) {\n        eachfn(arr, function (x, callback) {\n            iterator(x, function (result) {\n                if (result) {\n                    main_callback(x);\n                    main_callback = function () {};\n                }\n                else {\n                    callback();\n                }\n            });\n        }, function (err) {\n            main_callback();\n        });\n    };\n    async.detect = doParallel(_detect);\n    async.detectSeries = doSeries(_detect);\n\n    async.some = function (arr, iterator, main_callback) {\n        async.each(arr, function (x, callback) {\n            iterator(x, function (v) {\n                if (v) {\n                    main_callback(true);\n                    main_callback = function () {};\n                }\n                callback();\n            });\n        }, function (err) {\n            main_callback(false);\n        });\n    };\n    // any alias\n    async.any = async.some;\n\n    async.every = function (arr, iterator, main_callback) {\n        async.each(arr, function (x, callback) {\n            iterator(x, function (v) {\n                if (!v) {\n                    main_callback(false);\n                    main_callback = function () {};\n                }\n                callback();\n            });\n        }, function (err) {\n            main_callback(true);\n        });\n    };\n    // all alias\n    async.all = async.every;\n\n    async.sortBy = function (arr, iterator, callback) {\n        async.map(arr, function (x, callback) {\n            iterator(x, function (err, criteria) {\n                if (err) {\n                    callback(err);\n                }\n                else {\n                    callback(null, {value: x, criteria: criteria});\n                }\n            });\n        }, function (err, results) {\n            if (err) {\n                return callback(err);\n            }\n            else {\n                var fn = function (left, right) {\n                    var a = left.criteria, b = right.criteria;\n                    return a < b ? -1 : a > b ? 1 : 0;\n                };\n                callback(null, _map(results.sort(fn), function (x) {\n                    return x.value;\n                }));\n            }\n        });\n    };\n\n    async.auto = function (tasks, callback) {\n        callback = callback || function () {};\n        var keys = _keys(tasks);\n        if (!keys.length) {\n            return callback(null);\n        }\n\n        var results = {};\n\n        var listeners = [];\n        var addListener = function (fn) {\n            listeners.unshift(fn);\n        };\n        var removeListener = function (fn) {\n            for (var i = 0; i < listeners.length; i += 1) {\n                if (listeners[i] === fn) {\n                    listeners.splice(i, 1);\n                    return;\n                }\n            }\n        };\n        var taskComplete = function () {\n            _each(listeners.slice(0), function (fn) {\n                fn();\n            });\n        };\n\n        addListener(function () {\n            if (_keys(results).length === keys.length) {\n                callback(null, results);\n                callback = function () {};\n            }\n        });\n\n        _each(keys, function (k) {\n            var task = (tasks[k] instanceof Function) ? [tasks[k]]: tasks[k];\n            var taskCallback = function (err) {\n                var args = Array.prototype.slice.call(arguments, 1);\n                if (args.length <= 1) {\n                    args = args[0];\n                }\n                if (err) {\n                    var safeResults = {};\n                    _each(_keys(results), function(rkey) {\n                        safeResults[rkey] = results[rkey];\n                    });\n                    safeResults[k] = args;\n                    callback(err, safeResults);\n                    // stop subsequent errors hitting callback multiple times\n                    callback = function () {};\n                }\n                else {\n                    results[k] = args;\n                    async.nextTick(taskComplete);\n                }\n            };\n            var requires = task.slice(0, Math.abs(task.length - 1)) || [];\n            var ready = function () {\n                return _reduce(requires, function (a, x) {\n                    return (a && results.hasOwnProperty(x));\n                }, true) && !results.hasOwnProperty(k);\n            };\n            if (ready()) {\n                task[task.length - 1](taskCallback, results);\n            }\n            else {\n                var listener = function () {\n                    if (ready()) {\n                        removeListener(listener);\n                        task[task.length - 1](taskCallback, results);\n                    }\n                };\n                addListener(listener);\n            }\n        });\n    };\n\n    async.waterfall = function (tasks, callback) {\n        callback = callback || function () {};\n        if (!tasks.length) {\n            return callback();\n        }\n        var wrapIterator = function (iterator) {\n            return function (err) {\n                if (err) {\n                    callback.apply(null, arguments);\n                    callback = function () {};\n                }\n                else {\n                    var args = Array.prototype.slice.call(arguments, 1);\n                    var next = iterator.next();\n                    if (next) {\n                        args.push(wrapIterator(next));\n                    }\n                    else {\n                        args.push(callback);\n                    }\n                    async.nextTick(function () {\n                        iterator.apply(null, args);\n                    });\n                }\n            };\n        };\n        wrapIterator(async.iterator(tasks))();\n    };\n\n    var _parallel = function(eachfn, tasks, callback) {\n        callback = callback || function () {};\n        if (tasks.constructor === Array) {\n            eachfn.map(tasks, function (fn, callback) {\n                if (fn) {\n                    fn(function (err) {\n                        var args = Array.prototype.slice.call(arguments, 1);\n                        if (args.length <= 1) {\n                            args = args[0];\n                        }\n                        callback.call(null, err, args);\n                    });\n                }\n            }, callback);\n        }\n        else {\n            var results = {};\n            eachfn.each(_keys(tasks), function (k, callback) {\n                tasks[k](function (err) {\n                    var args = Array.prototype.slice.call(arguments, 1);\n                    if (args.length <= 1) {\n                        args = args[0];\n                    }\n                    results[k] = args;\n                    callback(err);\n                });\n            }, function (err) {\n                callback(err, results);\n            });\n        }\n    };\n\n    async.parallel = function (tasks, callback) {\n        _parallel({ map: async.map, each: async.each }, tasks, callback);\n    };\n\n    async.parallelLimit = function(tasks, limit, callback) {\n        _parallel({ map: _mapLimit(limit), each: _eachLimit(limit) }, tasks, callback);\n    };\n\n    async.series = function (tasks, callback) {\n        callback = callback || function () {};\n        if (tasks.constructor === Array) {\n            async.mapSeries(tasks, function (fn, callback) {\n                if (fn) {\n                    fn(function (err) {\n                        var args = Array.prototype.slice.call(arguments, 1);\n                        if (args.length <= 1) {\n                            args = args[0];\n                        }\n                        callback.call(null, err, args);\n                    });\n                }\n            }, callback);\n        }\n        else {\n            var results = {};\n            async.eachSeries(_keys(tasks), function (k, callback) {\n                tasks[k](function (err) {\n                    var args = Array.prototype.slice.call(arguments, 1);\n                    if (args.length <= 1) {\n                        args = args[0];\n                    }\n                    results[k] = args;\n                    callback(err);\n                });\n            }, function (err) {\n                callback(err, results);\n            });\n        }\n    };\n\n    async.iterator = function (tasks) {\n        var makeCallback = function (index) {\n            var fn = function () {\n                if (tasks.length) {\n                    tasks[index].apply(null, arguments);\n                }\n                return fn.next();\n            };\n            fn.next = function () {\n                return (index < tasks.length - 1) ? makeCallback(index + 1): null;\n            };\n            return fn;\n        };\n        return makeCallback(0);\n    };\n\n    async.apply = function (fn) {\n        var args = Array.prototype.slice.call(arguments, 1);\n        return function () {\n            return fn.apply(\n                null, args.concat(Array.prototype.slice.call(arguments))\n            );\n        };\n    };\n\n    var _concat = function (eachfn, arr, fn, callback) {\n        var r = [];\n        eachfn(arr, function (x, cb) {\n            fn(x, function (err, y) {\n                r = r.concat(y || []);\n                cb(err);\n            });\n        }, function (err) {\n            callback(err, r);\n        });\n    };\n    async.concat = doParallel(_concat);\n    async.concatSeries = doSeries(_concat);\n\n    async.whilst = function (test, iterator, callback) {\n        if (test()) {\n            var sync = true;\n            iterator(function (err) {\n                if (err) {\n                    return callback(err);\n                }\n                if (sync) {\n                    async.nextTick(function () {\n                        async.whilst(test, iterator, callback);\n                    });\n                }\n                else {\n                    async.whilst(test, iterator, callback);\n                }\n            });\n            sync = false;\n        }\n        else {\n            callback();\n        }\n    };\n\n    async.doWhilst = function (iterator, test, callback) {\n        var sync = true;\n        iterator(function (err) {\n            if (err) {\n                return callback(err);\n            }\n            if (test()) {\n                if (sync) {\n                    async.nextTick(function () {\n                        async.doWhilst(iterator, test, callback);\n                    });\n                }\n                else {\n                    async.doWhilst(iterator, test, callback);\n                }\n            }\n            else {\n                callback();\n            }\n        });\n        sync = false;\n    };\n\n    async.until = function (test, iterator, callback) {\n        if (!test()) {\n            var sync = true;\n            iterator(function (err) {\n                if (err) {\n                    return callback(err);\n                }\n                if (sync) {\n                    async.nextTick(function () {\n                        async.until(test, iterator, callback);\n                    });\n                }\n                else {\n                    async.until(test, iterator, callback);\n                }\n            });\n            sync = false;\n        }\n        else {\n            callback();\n        }\n    };\n\n    async.doUntil = function (iterator, test, callback) {\n        var sync = true;\n        iterator(function (err) {\n            if (err) {\n                return callback(err);\n            }\n            if (!test()) {\n                if (sync) {\n                    async.nextTick(function () {\n                        async.doUntil(iterator, test, callback);\n                    });\n                }\n                else {\n                    async.doUntil(iterator, test, callback);\n                }\n            }\n            else {\n                callback();\n            }\n        });\n        sync = false;\n    };\n\n    async.queue = function (worker, concurrency) {\n        if (concurrency === undefined) {\n            concurrency = 1;\n        }\n        function _insert(q, data, pos, callback) {\n          if(data.constructor !== Array) {\n              data = [data];\n          }\n          _each(data, function(task) {\n              var item = {\n                  data: task,\n                  callback: typeof callback === 'function' ? callback : null\n              };\n\n              if (pos) {\n                q.tasks.unshift(item);\n              } else {\n                q.tasks.push(item);\n              }\n\n              if (q.saturated && q.tasks.length === concurrency) {\n                  q.saturated();\n              }\n              async.nextTick(q.process);\n          });\n        }\n\n        var workers = 0;\n        var q = {\n            tasks: [],\n            concurrency: concurrency,\n            saturated: null,\n            empty: null,\n            drain: null,\n            push: function (data, callback) {\n              _insert(q, data, false, callback);\n            },\n            unshift: function (data, callback) {\n              _insert(q, data, true, callback);\n            },\n            process: function () {\n                if (workers < q.concurrency && q.tasks.length) {\n                    var task = q.tasks.shift();\n                    if (q.empty && q.tasks.length === 0) {\n                        q.empty();\n                    }\n                    workers += 1;\n                    var sync = true;\n                    var next = function () {\n                        workers -= 1;\n                        if (task.callback) {\n                            task.callback.apply(task, arguments);\n                        }\n                        if (q.drain && q.tasks.length + workers === 0) {\n                            q.drain();\n                        }\n                        q.process();\n                    };\n                    var cb = only_once(function () {\n                        var cbArgs = arguments;\n\n                        if (sync) {\n                            async.nextTick(function () {\n                                next.apply(null, cbArgs);\n                            });\n                        } else {\n                            next.apply(null, arguments);\n                        }\n                    });\n                    worker(task.data, cb);\n                    sync = false;\n                }\n            },\n            length: function () {\n                return q.tasks.length;\n            },\n            running: function () {\n                return workers;\n            }\n        };\n        return q;\n    };\n\n    async.cargo = function (worker, payload) {\n        var working     = false,\n            tasks       = [];\n\n        var cargo = {\n            tasks: tasks,\n            payload: payload,\n            saturated: null,\n            empty: null,\n            drain: null,\n            push: function (data, callback) {\n                if(data.constructor !== Array) {\n                    data = [data];\n                }\n                _each(data, function(task) {\n                    tasks.push({\n                        data: task,\n                        callback: typeof callback === 'function' ? callback : null\n                    });\n                    if (cargo.saturated && tasks.length === payload) {\n                        cargo.saturated();\n                    }\n                });\n                async.nextTick(cargo.process);\n            },\n            process: function process() {\n                if (working) return;\n                if (tasks.length === 0) {\n                    if(cargo.drain) cargo.drain();\n                    return;\n                }\n\n                var ts = typeof payload === 'number'\n                            ? tasks.splice(0, payload)\n                            : tasks.splice(0);\n\n                var ds = _map(ts, function (task) {\n                    return task.data;\n                });\n\n                if(cargo.empty) cargo.empty();\n                working = true;\n                worker(ds, function () {\n                    working = false;\n\n                    var args = arguments;\n                    _each(ts, function (data) {\n                        if (data.callback) {\n                            data.callback.apply(null, args);\n                        }\n                    });\n\n                    process();\n                });\n            },\n            length: function () {\n                return tasks.length;\n            },\n            running: function () {\n                return working;\n            }\n        };\n        return cargo;\n    };\n\n    var _console_fn = function (name) {\n        return function (fn) {\n            var args = Array.prototype.slice.call(arguments, 1);\n            fn.apply(null, args.concat([function (err) {\n                var args = Array.prototype.slice.call(arguments, 1);\n                if (typeof console !== 'undefined') {\n                    if (err) {\n                        if (console.error) {\n                            console.error(err);\n                        }\n                    }\n                    else if (console[name]) {\n                        _each(args, function (x) {\n                            console[name](x);\n                        });\n                    }\n                }\n            }]));\n        };\n    };\n    async.log = _console_fn('log');\n    async.dir = _console_fn('dir');\n    /*async.info = _console_fn('info');\n    async.warn = _console_fn('warn');\n    async.error = _console_fn('error');*/\n\n    async.memoize = function (fn, hasher) {\n        var memo = {};\n        var queues = {};\n        hasher = hasher || function (x) {\n            return x;\n        };\n        var memoized = function () {\n            var args = Array.prototype.slice.call(arguments);\n            var callback = args.pop();\n            var key = hasher.apply(null, args);\n            if (key in memo) {\n                callback.apply(null, memo[key]);\n            }\n            else if (key in queues) {\n                queues[key].push(callback);\n            }\n            else {\n                queues[key] = [callback];\n                fn.apply(null, args.concat([function () {\n                    memo[key] = arguments;\n                    var q = queues[key];\n                    delete queues[key];\n                    for (var i = 0, l = q.length; i < l; i++) {\n                      q[i].apply(null, arguments);\n                    }\n                }]));\n            }\n        };\n        memoized.memo = memo;\n        memoized.unmemoized = fn;\n        return memoized;\n    };\n\n    async.unmemoize = function (fn) {\n      return function () {\n        return (fn.unmemoized || fn).apply(null, arguments);\n      };\n    };\n\n    async.times = function (count, iterator, callback) {\n        var counter = [];\n        for (var i = 0; i < count; i++) {\n            counter.push(i);\n        }\n        return async.map(counter, iterator, callback);\n    };\n\n    async.timesSeries = function (count, iterator, callback) {\n        var counter = [];\n        for (var i = 0; i < count; i++) {\n            counter.push(i);\n        }\n        return async.mapSeries(counter, iterator, callback);\n    };\n\n    async.compose = function (/* functions... */) {\n        var fns = Array.prototype.reverse.call(arguments);\n        return function () {\n            var that = this;\n            var args = Array.prototype.slice.call(arguments);\n            var callback = args.pop();\n            async.reduce(fns, args, function (newargs, fn, cb) {\n                fn.apply(that, newargs.concat([function () {\n                    var err = arguments[0];\n                    var nextargs = Array.prototype.slice.call(arguments, 1);\n                    cb(err, nextargs);\n                }]))\n            },\n            function (err, results) {\n                callback.apply(that, [err].concat(results));\n            });\n        };\n    };\n\n    async.applyEach = function (fns /*args...*/) {\n        var go = function () {\n            var that = this;\n            var args = Array.prototype.slice.call(arguments);\n            var callback = args.pop();\n            return async.each(fns, function (fn, cb) {\n                fn.apply(that, args.concat([cb]));\n            },\n            callback);\n        };\n        if (arguments.length > 1) {\n            var args = Array.prototype.slice.call(arguments, 1);\n            return go.apply(this, args);\n        }\n        else {\n            return go;\n        }\n    };\n\n    // AMD / RequireJS\n    if (typeof define !== 'undefined' && define.amd) {\n        define([], function () {\n            return async;\n        });\n    }\n    // Node.js\n    else if (typeof module !== 'undefined' && module.exports) {\n        module.exports = async;\n    }\n    // included directly via <script> tag\n    else {\n        root.async = async;\n    }\n\n}());\n","var PDFJS = require(\"./lib/pdf.js\"),\n    nodeUtil = require(\"util\"),\n\tnodeEvents = require(\"events\"),\n    _ = require(\"underscore\"),\n    fs = require('fs'),\n    async = require(\"async\");\n\nvar PDFParser = (function () {\n    'use strict';\n    // private static\n    var _nextId = 1;\n    var _name = 'PDFParser';\n\n    var _binBuffer = {};\n    var _maxBinBufferCount = 10;\n\n    // constructor\n    var cls = function (context, needRawText) {\n\t\t//call constructor for super class\n\t\tnodeEvents.EventEmitter.call(this);\n\t\n        // private\n        var _id = _nextId++;\n\n        // public (every instance will have their own copy of these methods, needs to be lightweight)\n        this.get_id = function() { return _id; };\n        this.get_name = function() { return _name + _id; };\n\n        // service context object, only used in Web Service project; null in command line\n        this.context = context;\n\n        this.pdfFilePath = null; //current PDF file to load and parse, null means loading/parsing not started\n        this.data = null; //if file read success, data is PDF content; if failed, data is \"err\" object\n        this.PDFJS = new PDFJS(needRawText);\n        this.parsePropCount = 0;\n        this.processFieldInfoXML = false;//disable additional _fieldInfo.xml parsing and merging\n    };\n    // inherit from event emitter\n\tnodeUtil.inherits(cls, nodeEvents.EventEmitter);\n\n    // public static\n    cls.get_nextId = function () {\n        return _name + _nextId;\n    };\n\n    //private methods, needs to invoked by [funcName].call(this, ...)\n    var _onPDFJSParseDataReady = function(data) {\n        _.extend(this.data, data);\n        this.parsePropCount++;\n        if (this.parsePropCount >= 2) {\n            this.emit(\"pdfParser_dataReady\", this);\n            nodeUtil.p2jinfo(\"PDF parsing completed.\");\n        }\n    };\n\n    var _onPDFJSParserDataError = function(data) {\n        this.data = data;\n        this.emit(\"pdfParser_dataError\", this);\n    };\n\n    var startParsingPDF = function(buffer) {\n        this.data = {};\n        this.parsePropCount = 0;\n\n        this.PDFJS.on(\"pdfjs_parseDataReady\", _.bind(_onPDFJSParseDataReady, this));\n        this.PDFJS.on(\"pdfjs_parseDataError\", _.bind(_onPDFJSParserDataError, this));\n\n        this.PDFJS.parsePDFData(buffer || _binBuffer[this.pdfFilePath]);\n    };\n\n    var processBinaryCache = function() {\n        if (_.has(_binBuffer, this.pdfFilePath)) {\n            startParsingPDF.call(this);\n            return true;\n        }\n\n        var allKeys = _.keys(_binBuffer);\n        if (allKeys.length > _maxBinBufferCount) {\n            var idx = this.get_id() % _maxBinBufferCount;\n            var key = allKeys[idx];\n            _binBuffer[key] = null;\n            delete _binBuffer[key];\n\n            nodeUtil.p2jinfo(\"re-cycled cache for \" + key);\n        }\n\n        return false;\n    };\n\n    var processPDFContent = function(err, data) {\n        nodeUtil.p2jinfo(\"Load PDF file status:\" + (!!err ? \"Error!\" : \"Success!\") );\n        if (err) {\n            this.data = err;\n            this.emit(\"pdfParser_dataError\", this);\n        }\n        else {\n            _binBuffer[this.pdfFilePath] = data;\n            startParsingPDF.call(this);\n        }\n    };\n\n    var fq = async.queue(function (task, callback) {\n        fs.readFile(task.path, callback);\n     }, 250);\n\n    // public (every instance will share the same method, but has no access to private fields defined in constructor)\n    cls.prototype.loadPDF = function (pdfFilePath, verbosity) {\n        nodeUtil.verbosity(verbosity);\n        nodeUtil.p2jinfo(\"about to load PDF file \" + pdfFilePath);\n\n        this.pdfFilePath = pdfFilePath;\n        if (this.processFieldInfoXML) {\n            this.PDFJS.tryLoadFieldInfoXML(pdfFilePath);\n        }\n\n        if (processBinaryCache.call(this))\n            return;\n\n//        fs.readFile(pdfFilePath, _.bind(processPDFContent, this));\n        fq.push({path: pdfFilePath}, _.bind(processPDFContent, this));\n    };\n\n    // Introduce a way to directly process buffers without the need to write it to a temporary file\n    cls.prototype.parseBuffer = function (pdfBuffer) {\n        startParsingPDF.call(this, pdfBuffer);\n    };\n\n    cls.prototype.getRawTextContent = function() {\n        return this.PDFJS.getRawTextContent();\n    };\n\n    cls.prototype.destroy = function() {\n        this.removeAllListeners();\n\n        //context object will be set in Web Service project, but not in command line utility\n        if (this.context) {\n            this.context.destroy();\n            this.context = null;\n        }\n\n        this.pdfFilePath = null;\n        this.data = null;\n\n        this.PDFJS.destroy();\n        this.PDFJS = null;\n\n        this.parsePropCount = 0;\n    };\n\n    return cls;\n})();\n\nmodule.exports = PDFParser;\n\n","/**\n * PdfReader: class that reads a PDF file, and calls a function on each item found while parsing that file.\n * @author Adrien Joly, http://github.com/adrienjoly\n * This content is released under the MIT License.\n * \n * An item object can match one of the following objects:\n * - null, when the parsing is over, or an error occured.\n * - {file:{path:string}}, when a PDF file is being opened.\n * - {page:integer}, when a new page is being parsed, provides the page number, starting at 1.\n * - {text:string, x:float, y:float, w:float, h:float...}, represents each text with its position.\n * \n **/\n\nvar LOG = require(\"./lib/LOG.js\");\nvar PFParser = require(\"pdf2json/pdfparser\"); // doc: https://github.com/modesty/pdf2json\n\nfunction forEachItem(pdf, handler){\n  var pageNumber = 0;\n  for (var p in pdf.data.Pages) {\n    var page = pdf.data.Pages[p];\n    var number = ++pageNumber;\n    handler(null, {\n      page: number,\n      width: pdf.data.Width,\n      height:pdf.data.Pages[number-1].Height\n    });\n    for (var t in page.Texts) {\n      var item = page.Texts[t];\n      item.text = decodeURIComponent(item.R[0].T);\n      handler(null, item);\n    }\n  }\n  handler();\n}\n\nfunction PdfReader(options){\n  LOG(\"PdfReader\"); // only displayed if LOG.js was first loaded with `true` as init parameter\n  this.options = options || {};\n}\n\n/**\n * parseFileItems: calls itemHandler(error, item) on each item parsed from the pdf file\n **/\nPdfReader.prototype.parseFileItems = function(pdfFilePath, itemHandler){\n  itemHandler(null, { file: { path: pdfFilePath }});\n  var pdfParser = new PFParser();\n  pdfParser.on(\"pdfParser_dataError\", itemHandler);\n  pdfParser.on(\"pdfParser_dataReady\", function (pdfData){\n    forEachItem(pdfData, itemHandler);\n  });\n  var verbosity = this.options.debug ? 1 : 0;\n  pdfParser.loadPDF(pdfFilePath, verbosity);\n};\n\n/**\n * parseBuffer: calls itemHandler(error, item) on each item parsed from the pdf file received as a buffer\n */\nPdfReader.prototype.parseBuffer = function(pdfBuffer, itemHandler){\n  itemHandler(null, { file: { buffer: pdfBuffer }});\n  var pdfParser = new PFParser();\n  pdfParser.on(\"pdfParser_dataError\", itemHandler);\n  pdfParser.on(\"pdfParser_dataReady\", function (pdfData){\n    forEachItem(pdfData, itemHandler);\n  });\n  var verbosity = this.options.debug ? 1 : 0;\n  pdfParser.parseBuffer(pdfBuffer, verbosity);\n};\n\n\nmodule.exports = PdfReader;\n","/**\n * parseColumns, for pdfreader, used by the Rule class.\n * accumulates values below each column header (on 1st row, given their name), without detecting empty rows.\n * TODO: use ColumnsParser\n * @author Adrien Joly, http://github.com/adrienjoly\n * This content is released under the MIT License.\n **/\n\nvar LOG = require(\"./LOG.js\");\n\nmodule.exports = function(/* columns */){\n  this.output = [];\n  this.cols = Array.prototype.slice.apply(arguments);\n  var colNames = this.cols,\n      colX = [],\n      rows = this.output,\n      line = -1, // header\n      lineY = null;\n  function processItem(item){\n    if (line == -1) {\n      // parse x-position of column headers\n      var i = colNames.indexOf(item.text);\n      if (i > -1)\n        colX[i] = item.x;\n      if (colX.length == colNames.length) {\n        LOG(\"table header:\", colNames, colX);\n        line++;\n      }\n    }\n    else {\n      if (lineY === null) {\n        lineY = item.y;\n      }\n      else if (lineY != item.y) {\n        lineY = item.y;\n        line++;\n      }\n      // parsing values for each column\n      var col = 0;\n      for (var i=colX.length-1; i>=0; --i)\n        if (item.x > colX[i]) {\n          col = i;\n          break;\n        }\n      rows[lineY] = rows[lineY] || {};\n      rows[lineY][col] = item.text;\n    }\n  };\n  processItem(this.currentItem); // apply on header's first item\n  return processItem; // then the same function will be run on all following items, until another rule is triggered\n};\n","/**\n * parseTable accumulator, for pdfreader, used by the Rule class.\n * items are classified into columns and rows, based on their left and top coordinates,\n * and left position of column headers.\n * TODO: use TableParser\n * @author Adrien Joly, http://github.com/adrienjoly\n * This content is released under the MIT License.\n **/\n\nfunction getTopPos(item){\n  return item.y;\n}\n\nfunction getLeftPos(item){        \n  return item.x;\n}\n\nfunction getText(item){\n  return item.text;\n};\n\n/**\n * makeClassifier(): makes a classifier, based on an array of numbers and an expected number of clusters.\n * nbClusters: expected number of clusters\n * arr: array of numbers\n * => returns a function that takes a number, and returns the number of its corresponding column.\n **/\nfunction makeFloorClassifier(nbClusters, arr){\n  var min = Math.min.apply(Math, arr);\n  var delta = Math.max.apply(Math, arr) - min;\n  min -= (delta / nbClusters) / 2;\n  return function classify(value){\n    return Math.floor(nbClusters * (value - min) / delta);\n  };\n}\n\nfunction makeColumnClassifier(header){\n  var colX = [0].concat(header.map(getLeftPos)).sort(function(a,b){return a-b;});\n  return function classify(item){\n    for (var i=colX.length-1; i>-1; --i)\n      if (getLeftPos(item) >= colX[i])\n        return i;\n  };\n}\n\nfunction buildRowList(items, classifyRow){\n  var rows = [];\n  for (var i in items){\n    var item = items[i];\n    var row = classifyRow(getTopPos(item));\n    (rows[row] = rows[row] || []).push(item);\n  }\n  return rows;\n}\n\nfunction joinCellCollisions(separ){\n  return function(cell){\n    return (cell || []).map(getText).join(separ).substr(0, 7);\n  };\n}\n\nfunction fillTab(str){\n  return str.substr(0, 7);\n}\n\nfunction renderTable(table){\n  return (table || []).map(function(row){\n    return (row || []).map(fillTab).join(\"\\t\");\n  }).join(\"\\n\");\n}\n\nfunction renderMatrix(matrix){\n  return (matrix || []).map(function(row){\n    return (row || []).map(joinCellCollisions(\"+\")).join(\"\\t\");\n  }).join(\"\\n\");\n}\n\nfunction renderRows(rows){\n  return (rows || []).map(function(row, rowId){\n    var cells = [ rowId + \":\" ];\n    for (var i in row)\n      cells.push((Math.floor(row[i].x) + \":\" + row[i].text).substr(0, 7));\n    return cells.join(\"\\t\");\n  }).join(\"\\n\");\n}\n\nfunction renderItems(items) {\n  return items.map(function(i){\n    return [i.y, i.x, i.text].join(\"\\t\");\n  }).join(\"\\n\");\n}\n\nfunction buildMatrix(rows, classifyColumn){\n  var matrix = [];\n  for (var y in rows){\n    var row = [];\n    for (var x in rows[y]){\n      var item = rows[y][x];\n      var colN = classifyColumn(item);\n      (row[colN] = row[colN] || []).push(item);\n    }\n    matrix.push(row);\n  }\n  return matrix;\n}\n\nfunction detectCollisions(matrix){\n  var collisions = [];\n  (matrix || []).map(function(row, rowN){\n    (row || []).map(function(cellItems, colN){\n      if (cellItems.length > 1)\n        collisions.push({\n          row: rowN,\n          col: colN,\n          items: cellItems\n        });\n    });\n  });\n  return collisions;\n}\n\nfunction makeAccumulator(nbRows, headerRow){\n\n  var rule = this,\n      items = [];\n\n  rule.nbRows = nbRows || 0;\n  rule.output = {\n    items: items,\n    rows: null,\n    matrix: null\n  };  \n\n  function accumulate(item){\n    items.push(item);\n  };\n\n  // when parsing is done: generate a clean table, from items.\n  rule.whenDone(function(){\n    // classify items into rows\n    var classifyRow = makeFloorClassifier(rule.nbRows, items.map(getTopPos));\n    //LOG(items.map(function(i){ return [getTopPos(i), classifyRow(getTopPos(i)), i.text].join(\"\\t\"); }).join(\"\\n\"));\n    this.output.rows = buildRowList(items, classifyRow);\n    // classify row items into columns\n    var classifyColumn = makeColumnClassifier(this.output.rows[headerRow || 0]);\n    this.output.matrix = buildMatrix(this.output.rows, classifyColumn);\n\n  });\n\n  return accumulate; // then the same function will be run on all following items, until another rule is triggered\n};\n\nmodule.exports = makeAccumulator;\nmodule.exports.renderItems = renderItems;\nmodule.exports.renderRows = renderRows;\nmodule.exports.renderMatrix = renderMatrix;\nmodule.exports.renderTable = renderTable;\nmodule.exports.detectCollisions = detectCollisions;\n","/**\n * Rule: class that can be used to define and process data extraction rules, while parsing a PDF document.\n * @author Adrien Joly, http://github.com/adrienjoly\n * This content is released under the MIT License.\n **/\n\nvar LOG = require(\"./lib/LOG.js\");\n\n/**\n * regexp: a regular expression which a PDF item's text must match in order to execute that rule.\n * => a Rule object exposes \"accumulators\": methods that defines the data extraction strategy of a rule.\n **/\nfunction Rule(regexp){\n  this.regexp = regexp;\n  var self = this;\n  // proxy accumulators methods\n  Object.keys(Rule.accumulators).forEach(function(name){\n    self[name] = function(){\n      LOG(\"building rule:\", regexp, \"->\", name);\n      self.methodName = name;\n      self.accumulatorParams = arguments;\n      self.accumulatorBuilder = Rule.accumulators[name];\n      return self;\n    };\n  });\n}\n\n// shortcut for defining Rule objects in a more concise manner\nRule.on = function(regexp){\n  return new Rule(regexp);\n}\n\nRule.after = function(regexp){\n  var rule = new Rule(regexp);\n  rule.skipCurrentItem = true;\n  return rule;\n}\n\n/**\n * then(): defines a function to be called after a Rule's accumulator has finished processing items.\n * fct: the function to be called after a Rule's accumulator has finished processing items.\n *      the output of the accumulator will be passed as the first parameter of that function.\n **/\nRule.prototype.then = function(fct){\n  var self = this;\n  this.terminate = function(){\n    fct.call(self, self.output);\n  };\n  return this;\n};\n\n// private function that checks a PDF item against the Rule's regexp, and returns the corresponding accumulator.\nRule.prototype.test = function(item){\n  if (this.regexp.test(item.text)) {\n    // lazy init of accumulators: build and init the accumulator on first match\n    this.currentItem = item;\n    if (!this.accumulatorImpl && this.accumulatorBuilder) {\n      this.accumulatorImpl = this.accumulatorBuilder.apply(this, this.accumulatorParams);\n      this.accumulatorImpl.methodName = this.methodName;\n      this.accumulatorImpl.terminate = this.terminate;\n    }\n    return this.accumulatorImpl;\n  }\n};\n\n// intended to be run from accumulator, in order to process output before calling termination then() handler.\nRule.prototype.whenDone = function(fct){\n  var self = this;\n  var then = this.terminate;\n  this.terminate = function(){\n    fct.call(self);\n    then();\n  }\n};\n\n/**\n * rules: array of Rule objects that will be executed one-by-one, whenever a PDF item matches a rule.\n *        each rule can only be executed once.\n * => returns a function to be called for each item by the PdfReader.\n **/\nRule.makeItemProcessor = function(rules){\n  var currentAccumulator = null;\n  function terminateAccumulator(){\n    var terminatePreviousAcc = (currentAccumulator || {}).terminate;\n    if (terminatePreviousAcc) {\n      LOG(\"terminating accumulator:\", currentAccumulator.methodName);\n      terminatePreviousAcc(currentAccumulator); // TODO: remove currentAccumulator parameter\n    }\n  }\n  var applyRulesOnNextItem = true;\n  return function(item){\n    if (!item) // last item of the file => flush buffers\n      return terminateAccumulator();\n    else if (!item.text)\n      return;\n    //LOG(\"ITEM:\", item.text, \"=> apply rules:\", applyRulesOnNextItem);\n    if (applyRulesOnNextItem)\n      for (var r in rules) {\n        var accumulator = rules[r].test(item);\n        if (accumulator) {\n          terminateAccumulator();\n          LOG(\"current accumulator:\", accumulator.methodName);\n          if (rules[r].skipCurrentItem)\n            applyRulesOnNextItem = false;\n          currentAccumulator = accumulator;\n          delete rules[r];\n          return;\n        }\n      }\n    else\n      applyRulesOnNextItem = true;\n    // if reaching this point, the current item matches none of the rules => accumulating data on current accumulator\n    if (currentAccumulator)\n      applyRulesOnNextItem = !currentAccumulator(item);\n  };\n}\n\n/**\n * Rule.accumulators: array of accumulators that can be used for defining Rule objects.\n * An accumulator is a function that may (or may not) accept parameters, to be provided by the developer of a parser.\n * It returns another function that will be run on every following PDF item, in order to accumulate data.\n * The output of an accumulator is stored in this.output (field of its parent Rule object).\n **/\nRule.accumulators = {\n  stopAccumulating: function(){ return function(){}; },\n};\n\n// method for adding accumulators\nRule.addAccumulator = function(methodName, methodBuilder){\n  Rule.accumulators[methodName] = methodBuilder;\n}\n\n/**\n * This accumulator will store the values extracted by the regexp of the Rule object,\n * on the current matching PDF item, into an array.\n **/\nRule.addAccumulator(\"extractRegexpValues\", function(){\n  var matches = this.regexp.exec(this.currentItem.text);\n  this.output = matches.slice(1);\n  return function(){}; // following lines are not to be processed by this accumulator\n});\n\n/**\n * This accumulator will store the value of the next PDF item.\n **/\nRule.addAccumulator(\"parseNextItemValue\", function(){\n  var self = this,\n      done = false;\n  return function (item){\n    if (done)\n      return;\n    done = true;\n    self.output = item.text;\n  }\n});\n\n/**\n * This accumulator will store the text of all following PDF items into an array.\n **/\nRule.addAccumulator(\"accumulateAfterHeading\", function(){\n  var output = this.output = [];\n  return function accumulate(item){\n    output.push(item.text);\n  };\n});\n\n/**\n * This accumulator will store the text of all following PDF items with equal x-coordinates.\n **/\nRule.addAccumulator(\"accumulateFromSameX\", function(){\n  var output = this.output = [],\n      x = null;\n  return function accumulate(item){\n    if (x === null)\n      x = item.x;\n    if (x == item.x)\n      output.push(item.text);\n  }\n});\n\n/**\n * This accumulator will store a table by detecting its columns, given their names.\n **/\nRule.addAccumulator(\"parseColumns\", require(\"./lib/parseColumns.js\"));\n\n/**\n * This accumulator will store a table by detecting its columns, given their count.\n **/\nRule.addAccumulator(\"parseTable\", require(\"./lib/parseTable.js\"));\n\nmodule.exports = Rule;\n","/**\n * Applies a list of simple actions to apply to each provided item, in order to accumulate field values.\n * Provides a list of parsed `fields`.\n * Calls `callback(error, this)` when all accumulators were processed, or when processing a null item.\n **/\nfunction SequentialParser(accumulators, callback){\n  var step = 0;\n  var fields = {};\n  return {\n    fields: fields,\n    addField: function(key, value){\n      this.fields[key] = value;\n    },\n    parseItem: function(item){\n      if (step >= accumulators.length) {\n        return console.warn(\"warning: skipping item, because SequentialParser is done.\");\n      }\n      var current = accumulators[step];\n      if (current.field) {\n        this.addField(current.field, item);\n        ++step;\n      }\n      else if (current.accumulator) {\n        var doneAccumulating = current.accumulator(item, this);\n        if (doneAccumulating)\n          ++step;\n      }\n      else // no action => skip item\n        ++step;\n      if (!item || step >= accumulators.length) {\n        callback && callback(null, this);\n      }\n    }\n  };\n}\n\nmodule.exports = SequentialParser;\n","/**\n * TableParser\n * Classifies items into columns and rows, based on their left and top coordinates,\n * and left position of column headers.\n * @author Adrien Joly, http://github.com/adrienjoly\n * This content is released under the MIT License.\n **/\n\nfunction TableParser(){\n  this.rows = {};\n};\n\nTableParser.prototype.processItem = function(item, col){\n  var row = this.rows[\"\"+item.y] = this.rows[\"\"+item.y] || {};\n  (row[col] = row[col] || []).push(item);\n}\n\nTableParser.prototype.processHeadingItem = function(item, col){\n  this.processItem({\n    y: 0,\n    x: item.x,\n    text: item.text\n  }, col);\n}\n\n// Rows\n\nfunction sortAsFloatValues(values){\n  return values.slice().sort(function(a, b){\n    return parseFloat(a) - parseFloat(b);\n  });\n}\n\nTableParser.prototype.getRows = function(){\n  var rows = this.rows;\n  var yValues = sortAsFloatValues(Object.keys(rows));\n  return yValues.map(function(y){\n    return rows[\"\" + y];\n  });\n}\n\nfunction renderRows(rows){\n  return (rows || []).map(function(row, rowId){\n    var cells = [];\n    for (var i in row)\n      for (var j in row[i])\n        cells.push(row[i][j].x + \": \" + row[i][j].text);\n    return rowId + \":\\t\" + cells.join(\", \");\n  }).join(\"\\n\");\n}\n\nTableParser.prototype.renderRows = function(){\n  return renderRows(this.getRows());\n}\n\n// Matrix\n\nfunction getSortedXValues(rows){\n  var xSet = {};\n  for (var y in rows)\n    for (var x in rows[y])\n      xSet[x] = true;\n  return sortAsFloatValues(Object.keys(xSet));\n}\n\nTableParser.prototype.getMatrix = function(){\n  var rows = this.getRows();\n  var xValues = getSortedXValues(rows);\n  return rows.map(function(row, y){\n    var rowNew = [];\n    for (var x in row){\n      var items = row[x];\n      var colN = xValues.indexOf(x);\n      rowNew[colN] = (rowNew[colN] || []).concat(items);\n    }\n    return rowNew;\n  });\n}\n\nfunction getText(item){\n  return item.text;\n};\n\nfunction joinCellCollisions(separ){\n  return function(cell){\n    return (cell || []).map(getText).join(separ).substr(0, 7);\n  };\n}\n\nfunction renderMatrix(matrix){\n  return (matrix || []).map(function(row){\n    return (row || []).map(joinCellCollisions(\"+\")).join(\"\\t\");\n  }).join(\"\\n\");\n}\n\nTableParser.prototype.renderMatrix = function(){\n  return renderMatrix(this.getMatrix());\n}\n\nmodule.exports = TableParser;\n","/**\n * ColumnsParser\n * Classifies items into columns, nearest to the left position of their corresponding header.\n * @author Adrien Joly, http://github.com/adrienjoly\n * This content is released under the MIT License.\n **/\n\nvar LOG = require(\"./LOG.js\");\n\nfunction getColumnIndex(cols, x){\n  var bestDist = null;\n  for (var i = 0; i < cols.length; ++i) {\n    var dist = Math.abs(x - cols[i].x);\n    if (bestDist !== null && dist > bestDist) {\n      break;\n    }\n    else {\n      bestDist = dist;\n    }\n  }\n  return i - 1;\n}\n\nfunction ColumnsParser(colNames){\n  this.cols = [];\n  var cols = this.cols,\n      colNames = colNames.slice(), // clone (for parameter immutability)\n      line = -1; // -1 = header\n\n  this.processItem = function(item){\n    if (line == -1) {\n      // parse x-position of column headers\n      var i = colNames.indexOf(item.text);\n      if (i > -1) {\n        LOG(\"ColumnsParser header\", i, item.text, \"=> x:\", item.x);\n        cols[i] = {\n          name: item.text,\n          x: item.x,\n          items: []\n        };\n        colNames[i] = \"\"; // needed so that a column name can be associated to more than 1 index\n      }\n      if (cols.length == colNames.length) {\n        // done parsing header\n        line++;\n      }\n    }\n    else {\n      cols[getColumnIndex(cols, item.x)].items.push(item);\n    }\n  };\n};\n\nmodule.exports = ColumnsParser;\n","exports.PdfReader = require(\"./PdfReader\");\nexports.Rule = require(\"./Rule\");\nexports.LOG = require(\"./lib/LOG.js\");\nexports.parseTable = require(\"./lib/parseTable.js\");\nexports.parseColumns = require(\"./lib/parseColumns.js\");\nexports.SequentialParser = require(\"./lib/SequentialParser.js\"); // experimental\nexports.TableParser = require(\"./lib/TableParser.js\");\nexports.ColumnsParser = require(\"./lib/ColumnsParser.js\");\n","//! moment.js\n\n;(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    global.moment = factory()\n}(this, (function () { 'use strict';\n\n    var hookCallback;\n\n    function hooks () {\n        return hookCallback.apply(null, arguments);\n    }\n\n    // This is done to register the method called with moment()\n    // without creating circular dependencies.\n    function setHookCallback (callback) {\n        hookCallback = callback;\n    }\n\n    function isArray(input) {\n        return input instanceof Array || Object.prototype.toString.call(input) === '[object Array]';\n    }\n\n    function isObject(input) {\n        // IE8 will treat undefined and null as object if it wasn't for\n        // input != null\n        return input != null && Object.prototype.toString.call(input) === '[object Object]';\n    }\n\n    function isObjectEmpty(obj) {\n        if (Object.getOwnPropertyNames) {\n            return (Object.getOwnPropertyNames(obj).length === 0);\n        } else {\n            var k;\n            for (k in obj) {\n                if (obj.hasOwnProperty(k)) {\n                    return false;\n                }\n            }\n            return true;\n        }\n    }\n\n    function isUndefined(input) {\n        return input === void 0;\n    }\n\n    function isNumber(input) {\n        return typeof input === 'number' || Object.prototype.toString.call(input) === '[object Number]';\n    }\n\n    function isDate(input) {\n        return input instanceof Date || Object.prototype.toString.call(input) === '[object Date]';\n    }\n\n    function map(arr, fn) {\n        var res = [], i;\n        for (i = 0; i < arr.length; ++i) {\n            res.push(fn(arr[i], i));\n        }\n        return res;\n    }\n\n    function hasOwnProp(a, b) {\n        return Object.prototype.hasOwnProperty.call(a, b);\n    }\n\n    function extend(a, b) {\n        for (var i in b) {\n            if (hasOwnProp(b, i)) {\n                a[i] = b[i];\n            }\n        }\n\n        if (hasOwnProp(b, 'toString')) {\n            a.toString = b.toString;\n        }\n\n        if (hasOwnProp(b, 'valueOf')) {\n            a.valueOf = b.valueOf;\n        }\n\n        return a;\n    }\n\n    function createUTC (input, format, locale, strict) {\n        return createLocalOrUTC(input, format, locale, strict, true).utc();\n    }\n\n    function defaultParsingFlags() {\n        // We need to deep clone this object.\n        return {\n            empty           : false,\n            unusedTokens    : [],\n            unusedInput     : [],\n            overflow        : -2,\n            charsLeftOver   : 0,\n            nullInput       : false,\n            invalidMonth    : null,\n            invalidFormat   : false,\n            userInvalidated : false,\n            iso             : false,\n            parsedDateParts : [],\n            meridiem        : null,\n            rfc2822         : false,\n            weekdayMismatch : false\n        };\n    }\n\n    function getParsingFlags(m) {\n        if (m._pf == null) {\n            m._pf = defaultParsingFlags();\n        }\n        return m._pf;\n    }\n\n    var some;\n    if (Array.prototype.some) {\n        some = Array.prototype.some;\n    } else {\n        some = function (fun) {\n            var t = Object(this);\n            var len = t.length >>> 0;\n\n            for (var i = 0; i < len; i++) {\n                if (i in t && fun.call(this, t[i], i, t)) {\n                    return true;\n                }\n            }\n\n            return false;\n        };\n    }\n\n    function isValid(m) {\n        if (m._isValid == null) {\n            var flags = getParsingFlags(m);\n            var parsedParts = some.call(flags.parsedDateParts, function (i) {\n                return i != null;\n            });\n            var isNowValid = !isNaN(m._d.getTime()) &&\n                flags.overflow < 0 &&\n                !flags.empty &&\n                !flags.invalidMonth &&\n                !flags.invalidWeekday &&\n                !flags.weekdayMismatch &&\n                !flags.nullInput &&\n                !flags.invalidFormat &&\n                !flags.userInvalidated &&\n                (!flags.meridiem || (flags.meridiem && parsedParts));\n\n            if (m._strict) {\n                isNowValid = isNowValid &&\n                    flags.charsLeftOver === 0 &&\n                    flags.unusedTokens.length === 0 &&\n                    flags.bigHour === undefined;\n            }\n\n            if (Object.isFrozen == null || !Object.isFrozen(m)) {\n                m._isValid = isNowValid;\n            }\n            else {\n                return isNowValid;\n            }\n        }\n        return m._isValid;\n    }\n\n    function createInvalid (flags) {\n        var m = createUTC(NaN);\n        if (flags != null) {\n            extend(getParsingFlags(m), flags);\n        }\n        else {\n            getParsingFlags(m).userInvalidated = true;\n        }\n\n        return m;\n    }\n\n    // Plugins that add properties should also add the key here (null value),\n    // so we can properly clone ourselves.\n    var momentProperties = hooks.momentProperties = [];\n\n    function copyConfig(to, from) {\n        var i, prop, val;\n\n        if (!isUndefined(from._isAMomentObject)) {\n            to._isAMomentObject = from._isAMomentObject;\n        }\n        if (!isUndefined(from._i)) {\n            to._i = from._i;\n        }\n        if (!isUndefined(from._f)) {\n            to._f = from._f;\n        }\n        if (!isUndefined(from._l)) {\n            to._l = from._l;\n        }\n        if (!isUndefined(from._strict)) {\n            to._strict = from._strict;\n        }\n        if (!isUndefined(from._tzm)) {\n            to._tzm = from._tzm;\n        }\n        if (!isUndefined(from._isUTC)) {\n            to._isUTC = from._isUTC;\n        }\n        if (!isUndefined(from._offset)) {\n            to._offset = from._offset;\n        }\n        if (!isUndefined(from._pf)) {\n            to._pf = getParsingFlags(from);\n        }\n        if (!isUndefined(from._locale)) {\n            to._locale = from._locale;\n        }\n\n        if (momentProperties.length > 0) {\n            for (i = 0; i < momentProperties.length; i++) {\n                prop = momentProperties[i];\n                val = from[prop];\n                if (!isUndefined(val)) {\n                    to[prop] = val;\n                }\n            }\n        }\n\n        return to;\n    }\n\n    var updateInProgress = false;\n\n    // Moment prototype object\n    function Moment(config) {\n        copyConfig(this, config);\n        this._d = new Date(config._d != null ? config._d.getTime() : NaN);\n        if (!this.isValid()) {\n            this._d = new Date(NaN);\n        }\n        // Prevent infinite loop in case updateOffset creates new moment\n        // objects.\n        if (updateInProgress === false) {\n            updateInProgress = true;\n            hooks.updateOffset(this);\n            updateInProgress = false;\n        }\n    }\n\n    function isMoment (obj) {\n        return obj instanceof Moment || (obj != null && obj._isAMomentObject != null);\n    }\n\n    function absFloor (number) {\n        if (number < 0) {\n            // -0 -> 0\n            return Math.ceil(number) || 0;\n        } else {\n            return Math.floor(number);\n        }\n    }\n\n    function toInt(argumentForCoercion) {\n        var coercedNumber = +argumentForCoercion,\n            value = 0;\n\n        if (coercedNumber !== 0 && isFinite(coercedNumber)) {\n            value = absFloor(coercedNumber);\n        }\n\n        return value;\n    }\n\n    // compare two arrays, return the number of differences\n    function compareArrays(array1, array2, dontConvert) {\n        var len = Math.min(array1.length, array2.length),\n            lengthDiff = Math.abs(array1.length - array2.length),\n            diffs = 0,\n            i;\n        for (i = 0; i < len; i++) {\n            if ((dontConvert && array1[i] !== array2[i]) ||\n                (!dontConvert && toInt(array1[i]) !== toInt(array2[i]))) {\n                diffs++;\n            }\n        }\n        return diffs + lengthDiff;\n    }\n\n    function warn(msg) {\n        if (hooks.suppressDeprecationWarnings === false &&\n                (typeof console !==  'undefined') && console.warn) {\n            console.warn('Deprecation warning: ' + msg);\n        }\n    }\n\n    function deprecate(msg, fn) {\n        var firstTime = true;\n\n        return extend(function () {\n            if (hooks.deprecationHandler != null) {\n                hooks.deprecationHandler(null, msg);\n            }\n            if (firstTime) {\n                var args = [];\n                var arg;\n                for (var i = 0; i < arguments.length; i++) {\n                    arg = '';\n                    if (typeof arguments[i] === 'object') {\n                        arg += '\\n[' + i + '] ';\n                        for (var key in arguments[0]) {\n                            arg += key + ': ' + arguments[0][key] + ', ';\n                        }\n                        arg = arg.slice(0, -2); // Remove trailing comma and space\n                    } else {\n                        arg = arguments[i];\n                    }\n                    args.push(arg);\n                }\n                warn(msg + '\\nArguments: ' + Array.prototype.slice.call(args).join('') + '\\n' + (new Error()).stack);\n                firstTime = false;\n            }\n            return fn.apply(this, arguments);\n        }, fn);\n    }\n\n    var deprecations = {};\n\n    function deprecateSimple(name, msg) {\n        if (hooks.deprecationHandler != null) {\n            hooks.deprecationHandler(name, msg);\n        }\n        if (!deprecations[name]) {\n            warn(msg);\n            deprecations[name] = true;\n        }\n    }\n\n    hooks.suppressDeprecationWarnings = false;\n    hooks.deprecationHandler = null;\n\n    function isFunction(input) {\n        return input instanceof Function || Object.prototype.toString.call(input) === '[object Function]';\n    }\n\n    function set (config) {\n        var prop, i;\n        for (i in config) {\n            prop = config[i];\n            if (isFunction(prop)) {\n                this[i] = prop;\n            } else {\n                this['_' + i] = prop;\n            }\n        }\n        this._config = config;\n        // Lenient ordinal parsing accepts just a number in addition to\n        // number + (possibly) stuff coming from _dayOfMonthOrdinalParse.\n        // TODO: Remove \"ordinalParse\" fallback in next major release.\n        this._dayOfMonthOrdinalParseLenient = new RegExp(\n            (this._dayOfMonthOrdinalParse.source || this._ordinalParse.source) +\n                '|' + (/\\d{1,2}/).source);\n    }\n\n    function mergeConfigs(parentConfig, childConfig) {\n        var res = extend({}, parentConfig), prop;\n        for (prop in childConfig) {\n            if (hasOwnProp(childConfig, prop)) {\n                if (isObject(parentConfig[prop]) && isObject(childConfig[prop])) {\n                    res[prop] = {};\n                    extend(res[prop], parentConfig[prop]);\n                    extend(res[prop], childConfig[prop]);\n                } else if (childConfig[prop] != null) {\n                    res[prop] = childConfig[prop];\n                } else {\n                    delete res[prop];\n                }\n            }\n        }\n        for (prop in parentConfig) {\n            if (hasOwnProp(parentConfig, prop) &&\n                    !hasOwnProp(childConfig, prop) &&\n                    isObject(parentConfig[prop])) {\n                // make sure changes to properties don't modify parent config\n                res[prop] = extend({}, res[prop]);\n            }\n        }\n        return res;\n    }\n\n    function Locale(config) {\n        if (config != null) {\n            this.set(config);\n        }\n    }\n\n    var keys;\n\n    if (Object.keys) {\n        keys = Object.keys;\n    } else {\n        keys = function (obj) {\n            var i, res = [];\n            for (i in obj) {\n                if (hasOwnProp(obj, i)) {\n                    res.push(i);\n                }\n            }\n            return res;\n        };\n    }\n\n    var defaultCalendar = {\n        sameDay : '[Today at] LT',\n        nextDay : '[Tomorrow at] LT',\n        nextWeek : 'dddd [at] LT',\n        lastDay : '[Yesterday at] LT',\n        lastWeek : '[Last] dddd [at] LT',\n        sameElse : 'L'\n    };\n\n    function calendar (key, mom, now) {\n        var output = this._calendar[key] || this._calendar['sameElse'];\n        return isFunction(output) ? output.call(mom, now) : output;\n    }\n\n    var defaultLongDateFormat = {\n        LTS  : 'h:mm:ss A',\n        LT   : 'h:mm A',\n        L    : 'MM/DD/YYYY',\n        LL   : 'MMMM D, YYYY',\n        LLL  : 'MMMM D, YYYY h:mm A',\n        LLLL : 'dddd, MMMM D, YYYY h:mm A'\n    };\n\n    function longDateFormat (key) {\n        var format = this._longDateFormat[key],\n            formatUpper = this._longDateFormat[key.toUpperCase()];\n\n        if (format || !formatUpper) {\n            return format;\n        }\n\n        this._longDateFormat[key] = formatUpper.replace(/MMMM|MM|DD|dddd/g, function (val) {\n            return val.slice(1);\n        });\n\n        return this._longDateFormat[key];\n    }\n\n    var defaultInvalidDate = 'Invalid date';\n\n    function invalidDate () {\n        return this._invalidDate;\n    }\n\n    var defaultOrdinal = '%d';\n    var defaultDayOfMonthOrdinalParse = /\\d{1,2}/;\n\n    function ordinal (number) {\n        return this._ordinal.replace('%d', number);\n    }\n\n    var defaultRelativeTime = {\n        future : 'in %s',\n        past   : '%s ago',\n        s  : 'a few seconds',\n        ss : '%d seconds',\n        m  : 'a minute',\n        mm : '%d minutes',\n        h  : 'an hour',\n        hh : '%d hours',\n        d  : 'a day',\n        dd : '%d days',\n        M  : 'a month',\n        MM : '%d months',\n        y  : 'a year',\n        yy : '%d years'\n    };\n\n    function relativeTime (number, withoutSuffix, string, isFuture) {\n        var output = this._relativeTime[string];\n        return (isFunction(output)) ?\n            output(number, withoutSuffix, string, isFuture) :\n            output.replace(/%d/i, number);\n    }\n\n    function pastFuture (diff, output) {\n        var format = this._relativeTime[diff > 0 ? 'future' : 'past'];\n        return isFunction(format) ? format(output) : format.replace(/%s/i, output);\n    }\n\n    var aliases = {};\n\n    function addUnitAlias (unit, shorthand) {\n        var lowerCase = unit.toLowerCase();\n        aliases[lowerCase] = aliases[lowerCase + 's'] = aliases[shorthand] = unit;\n    }\n\n    function normalizeUnits(units) {\n        return typeof units === 'string' ? aliases[units] || aliases[units.toLowerCase()] : undefined;\n    }\n\n    function normalizeObjectUnits(inputObject) {\n        var normalizedInput = {},\n            normalizedProp,\n            prop;\n\n        for (prop in inputObject) {\n            if (hasOwnProp(inputObject, prop)) {\n                normalizedProp = normalizeUnits(prop);\n                if (normalizedProp) {\n                    normalizedInput[normalizedProp] = inputObject[prop];\n                }\n            }\n        }\n\n        return normalizedInput;\n    }\n\n    var priorities = {};\n\n    function addUnitPriority(unit, priority) {\n        priorities[unit] = priority;\n    }\n\n    function getPrioritizedUnits(unitsObj) {\n        var units = [];\n        for (var u in unitsObj) {\n            units.push({unit: u, priority: priorities[u]});\n        }\n        units.sort(function (a, b) {\n            return a.priority - b.priority;\n        });\n        return units;\n    }\n\n    function zeroFill(number, targetLength, forceSign) {\n        var absNumber = '' + Math.abs(number),\n            zerosToFill = targetLength - absNumber.length,\n            sign = number >= 0;\n        return (sign ? (forceSign ? '+' : '') : '-') +\n            Math.pow(10, Math.max(0, zerosToFill)).toString().substr(1) + absNumber;\n    }\n\n    var formattingTokens = /(\\[[^\\[]*\\])|(\\\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;\n\n    var localFormattingTokens = /(\\[[^\\[]*\\])|(\\\\)?(LTS|LT|LL?L?L?|l{1,4})/g;\n\n    var formatFunctions = {};\n\n    var formatTokenFunctions = {};\n\n    // token:    'M'\n    // padded:   ['MM', 2]\n    // ordinal:  'Mo'\n    // callback: function () { this.month() + 1 }\n    function addFormatToken (token, padded, ordinal, callback) {\n        var func = callback;\n        if (typeof callback === 'string') {\n            func = function () {\n                return this[callback]();\n            };\n        }\n        if (token) {\n            formatTokenFunctions[token] = func;\n        }\n        if (padded) {\n            formatTokenFunctions[padded[0]] = function () {\n                return zeroFill(func.apply(this, arguments), padded[1], padded[2]);\n            };\n        }\n        if (ordinal) {\n            formatTokenFunctions[ordinal] = function () {\n                return this.localeData().ordinal(func.apply(this, arguments), token);\n            };\n        }\n    }\n\n    function removeFormattingTokens(input) {\n        if (input.match(/\\[[\\s\\S]/)) {\n            return input.replace(/^\\[|\\]$/g, '');\n        }\n        return input.replace(/\\\\/g, '');\n    }\n\n    function makeFormatFunction(format) {\n        var array = format.match(formattingTokens), i, length;\n\n        for (i = 0, length = array.length; i < length; i++) {\n            if (formatTokenFunctions[array[i]]) {\n                array[i] = formatTokenFunctions[array[i]];\n            } else {\n                array[i] = removeFormattingTokens(array[i]);\n            }\n        }\n\n        return function (mom) {\n            var output = '', i;\n            for (i = 0; i < length; i++) {\n                output += isFunction(array[i]) ? array[i].call(mom, format) : array[i];\n            }\n            return output;\n        };\n    }\n\n    // format date using native date object\n    function formatMoment(m, format) {\n        if (!m.isValid()) {\n            return m.localeData().invalidDate();\n        }\n\n        format = expandFormat(format, m.localeData());\n        formatFunctions[format] = formatFunctions[format] || makeFormatFunction(format);\n\n        return formatFunctions[format](m);\n    }\n\n    function expandFormat(format, locale) {\n        var i = 5;\n\n        function replaceLongDateFormatTokens(input) {\n            return locale.longDateFormat(input) || input;\n        }\n\n        localFormattingTokens.lastIndex = 0;\n        while (i >= 0 && localFormattingTokens.test(format)) {\n            format = format.replace(localFormattingTokens, replaceLongDateFormatTokens);\n            localFormattingTokens.lastIndex = 0;\n            i -= 1;\n        }\n\n        return format;\n    }\n\n    var match1         = /\\d/;            //       0 - 9\n    var match2         = /\\d\\d/;          //      00 - 99\n    var match3         = /\\d{3}/;         //     000 - 999\n    var match4         = /\\d{4}/;         //    0000 - 9999\n    var match6         = /[+-]?\\d{6}/;    // -999999 - 999999\n    var match1to2      = /\\d\\d?/;         //       0 - 99\n    var match3to4      = /\\d\\d\\d\\d?/;     //     999 - 9999\n    var match5to6      = /\\d\\d\\d\\d\\d\\d?/; //   99999 - 999999\n    var match1to3      = /\\d{1,3}/;       //       0 - 999\n    var match1to4      = /\\d{1,4}/;       //       0 - 9999\n    var match1to6      = /[+-]?\\d{1,6}/;  // -999999 - 999999\n\n    var matchUnsigned  = /\\d+/;           //       0 - inf\n    var matchSigned    = /[+-]?\\d+/;      //    -inf - inf\n\n    var matchOffset    = /Z|[+-]\\d\\d:?\\d\\d/gi; // +00:00 -00:00 +0000 -0000 or Z\n    var matchShortOffset = /Z|[+-]\\d\\d(?::?\\d\\d)?/gi; // +00 -00 +00:00 -00:00 +0000 -0000 or Z\n\n    var matchTimestamp = /[+-]?\\d+(\\.\\d{1,3})?/; // 123456789 123456789.123\n\n    // any word (or two) characters or numbers including two/three word month in arabic.\n    // includes scottish gaelic two word and hyphenated months\n    var matchWord = /[0-9]{0,256}['a-z\\u00A0-\\u05FF\\u0700-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFF07\\uFF10-\\uFFEF]{1,256}|[\\u0600-\\u06FF\\/]{1,256}(\\s*?[\\u0600-\\u06FF]{1,256}){1,2}/i;\n\n    var regexes = {};\n\n    function addRegexToken (token, regex, strictRegex) {\n        regexes[token] = isFunction(regex) ? regex : function (isStrict, localeData) {\n            return (isStrict && strictRegex) ? strictRegex : regex;\n        };\n    }\n\n    function getParseRegexForToken (token, config) {\n        if (!hasOwnProp(regexes, token)) {\n            return new RegExp(unescapeFormat(token));\n        }\n\n        return regexes[token](config._strict, config._locale);\n    }\n\n    // Code from http://stackoverflow.com/questions/3561493/is-there-a-regexp-escape-function-in-javascript\n    function unescapeFormat(s) {\n        return regexEscape(s.replace('\\\\', '').replace(/\\\\(\\[)|\\\\(\\])|\\[([^\\]\\[]*)\\]|\\\\(.)/g, function (matched, p1, p2, p3, p4) {\n            return p1 || p2 || p3 || p4;\n        }));\n    }\n\n    function regexEscape(s) {\n        return s.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n    }\n\n    var tokens = {};\n\n    function addParseToken (token, callback) {\n        var i, func = callback;\n        if (typeof token === 'string') {\n            token = [token];\n        }\n        if (isNumber(callback)) {\n            func = function (input, array) {\n                array[callback] = toInt(input);\n            };\n        }\n        for (i = 0; i < token.length; i++) {\n            tokens[token[i]] = func;\n        }\n    }\n\n    function addWeekParseToken (token, callback) {\n        addParseToken(token, function (input, array, config, token) {\n            config._w = config._w || {};\n            callback(input, config._w, config, token);\n        });\n    }\n\n    function addTimeToArrayFromToken(token, input, config) {\n        if (input != null && hasOwnProp(tokens, token)) {\n            tokens[token](input, config._a, config, token);\n        }\n    }\n\n    var YEAR = 0;\n    var MONTH = 1;\n    var DATE = 2;\n    var HOUR = 3;\n    var MINUTE = 4;\n    var SECOND = 5;\n    var MILLISECOND = 6;\n    var WEEK = 7;\n    var WEEKDAY = 8;\n\n    // FORMATTING\n\n    addFormatToken('Y', 0, 0, function () {\n        var y = this.year();\n        return y <= 9999 ? '' + y : '+' + y;\n    });\n\n    addFormatToken(0, ['YY', 2], 0, function () {\n        return this.year() % 100;\n    });\n\n    addFormatToken(0, ['YYYY',   4],       0, 'year');\n    addFormatToken(0, ['YYYYY',  5],       0, 'year');\n    addFormatToken(0, ['YYYYYY', 6, true], 0, 'year');\n\n    // ALIASES\n\n    addUnitAlias('year', 'y');\n\n    // PRIORITIES\n\n    addUnitPriority('year', 1);\n\n    // PARSING\n\n    addRegexToken('Y',      matchSigned);\n    addRegexToken('YY',     match1to2, match2);\n    addRegexToken('YYYY',   match1to4, match4);\n    addRegexToken('YYYYY',  match1to6, match6);\n    addRegexToken('YYYYYY', match1to6, match6);\n\n    addParseToken(['YYYYY', 'YYYYYY'], YEAR);\n    addParseToken('YYYY', function (input, array) {\n        array[YEAR] = input.length === 2 ? hooks.parseTwoDigitYear(input) : toInt(input);\n    });\n    addParseToken('YY', function (input, array) {\n        array[YEAR] = hooks.parseTwoDigitYear(input);\n    });\n    addParseToken('Y', function (input, array) {\n        array[YEAR] = parseInt(input, 10);\n    });\n\n    // HELPERS\n\n    function daysInYear(year) {\n        return isLeapYear(year) ? 366 : 365;\n    }\n\n    function isLeapYear(year) {\n        return (year % 4 === 0 && year % 100 !== 0) || year % 400 === 0;\n    }\n\n    // HOOKS\n\n    hooks.parseTwoDigitYear = function (input) {\n        return toInt(input) + (toInt(input) > 68 ? 1900 : 2000);\n    };\n\n    // MOMENTS\n\n    var getSetYear = makeGetSet('FullYear', true);\n\n    function getIsLeapYear () {\n        return isLeapYear(this.year());\n    }\n\n    function makeGetSet (unit, keepTime) {\n        return function (value) {\n            if (value != null) {\n                set$1(this, unit, value);\n                hooks.updateOffset(this, keepTime);\n                return this;\n            } else {\n                return get(this, unit);\n            }\n        };\n    }\n\n    function get (mom, unit) {\n        return mom.isValid() ?\n            mom._d['get' + (mom._isUTC ? 'UTC' : '') + unit]() : NaN;\n    }\n\n    function set$1 (mom, unit, value) {\n        if (mom.isValid() && !isNaN(value)) {\n            if (unit === 'FullYear' && isLeapYear(mom.year()) && mom.month() === 1 && mom.date() === 29) {\n                mom._d['set' + (mom._isUTC ? 'UTC' : '') + unit](value, mom.month(), daysInMonth(value, mom.month()));\n            }\n            else {\n                mom._d['set' + (mom._isUTC ? 'UTC' : '') + unit](value);\n            }\n        }\n    }\n\n    // MOMENTS\n\n    function stringGet (units) {\n        units = normalizeUnits(units);\n        if (isFunction(this[units])) {\n            return this[units]();\n        }\n        return this;\n    }\n\n\n    function stringSet (units, value) {\n        if (typeof units === 'object') {\n            units = normalizeObjectUnits(units);\n            var prioritized = getPrioritizedUnits(units);\n            for (var i = 0; i < prioritized.length; i++) {\n                this[prioritized[i].unit](units[prioritized[i].unit]);\n            }\n        } else {\n            units = normalizeUnits(units);\n            if (isFunction(this[units])) {\n                return this[units](value);\n            }\n        }\n        return this;\n    }\n\n    function mod(n, x) {\n        return ((n % x) + x) % x;\n    }\n\n    var indexOf;\n\n    if (Array.prototype.indexOf) {\n        indexOf = Array.prototype.indexOf;\n    } else {\n        indexOf = function (o) {\n            // I know\n            var i;\n            for (i = 0; i < this.length; ++i) {\n                if (this[i] === o) {\n                    return i;\n                }\n            }\n            return -1;\n        };\n    }\n\n    function daysInMonth(year, month) {\n        if (isNaN(year) || isNaN(month)) {\n            return NaN;\n        }\n        var modMonth = mod(month, 12);\n        year += (month - modMonth) / 12;\n        return modMonth === 1 ? (isLeapYear(year) ? 29 : 28) : (31 - modMonth % 7 % 2);\n    }\n\n    // FORMATTING\n\n    addFormatToken('M', ['MM', 2], 'Mo', function () {\n        return this.month() + 1;\n    });\n\n    addFormatToken('MMM', 0, 0, function (format) {\n        return this.localeData().monthsShort(this, format);\n    });\n\n    addFormatToken('MMMM', 0, 0, function (format) {\n        return this.localeData().months(this, format);\n    });\n\n    // ALIASES\n\n    addUnitAlias('month', 'M');\n\n    // PRIORITY\n\n    addUnitPriority('month', 8);\n\n    // PARSING\n\n    addRegexToken('M',    match1to2);\n    addRegexToken('MM',   match1to2, match2);\n    addRegexToken('MMM',  function (isStrict, locale) {\n        return locale.monthsShortRegex(isStrict);\n    });\n    addRegexToken('MMMM', function (isStrict, locale) {\n        return locale.monthsRegex(isStrict);\n    });\n\n    addParseToken(['M', 'MM'], function (input, array) {\n        array[MONTH] = toInt(input) - 1;\n    });\n\n    addParseToken(['MMM', 'MMMM'], function (input, array, config, token) {\n        var month = config._locale.monthsParse(input, token, config._strict);\n        // if we didn't find a month name, mark the date as invalid.\n        if (month != null) {\n            array[MONTH] = month;\n        } else {\n            getParsingFlags(config).invalidMonth = input;\n        }\n    });\n\n    // LOCALES\n\n    var MONTHS_IN_FORMAT = /D[oD]?(\\[[^\\[\\]]*\\]|\\s)+MMMM?/;\n    var defaultLocaleMonths = 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_');\n    function localeMonths (m, format) {\n        if (!m) {\n            return isArray(this._months) ? this._months :\n                this._months['standalone'];\n        }\n        return isArray(this._months) ? this._months[m.month()] :\n            this._months[(this._months.isFormat || MONTHS_IN_FORMAT).test(format) ? 'format' : 'standalone'][m.month()];\n    }\n\n    var defaultLocaleMonthsShort = 'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_');\n    function localeMonthsShort (m, format) {\n        if (!m) {\n            return isArray(this._monthsShort) ? this._monthsShort :\n                this._monthsShort['standalone'];\n        }\n        return isArray(this._monthsShort) ? this._monthsShort[m.month()] :\n            this._monthsShort[MONTHS_IN_FORMAT.test(format) ? 'format' : 'standalone'][m.month()];\n    }\n\n    function handleStrictParse(monthName, format, strict) {\n        var i, ii, mom, llc = monthName.toLocaleLowerCase();\n        if (!this._monthsParse) {\n            // this is not used\n            this._monthsParse = [];\n            this._longMonthsParse = [];\n            this._shortMonthsParse = [];\n            for (i = 0; i < 12; ++i) {\n                mom = createUTC([2000, i]);\n                this._shortMonthsParse[i] = this.monthsShort(mom, '').toLocaleLowerCase();\n                this._longMonthsParse[i] = this.months(mom, '').toLocaleLowerCase();\n            }\n        }\n\n        if (strict) {\n            if (format === 'MMM') {\n                ii = indexOf.call(this._shortMonthsParse, llc);\n                return ii !== -1 ? ii : null;\n            } else {\n                ii = indexOf.call(this._longMonthsParse, llc);\n                return ii !== -1 ? ii : null;\n            }\n        } else {\n            if (format === 'MMM') {\n                ii = indexOf.call(this._shortMonthsParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._longMonthsParse, llc);\n                return ii !== -1 ? ii : null;\n            } else {\n                ii = indexOf.call(this._longMonthsParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._shortMonthsParse, llc);\n                return ii !== -1 ? ii : null;\n            }\n        }\n    }\n\n    function localeMonthsParse (monthName, format, strict) {\n        var i, mom, regex;\n\n        if (this._monthsParseExact) {\n            return handleStrictParse.call(this, monthName, format, strict);\n        }\n\n        if (!this._monthsParse) {\n            this._monthsParse = [];\n            this._longMonthsParse = [];\n            this._shortMonthsParse = [];\n        }\n\n        // TODO: add sorting\n        // Sorting makes sure if one month (or abbr) is a prefix of another\n        // see sorting in computeMonthsParse\n        for (i = 0; i < 12; i++) {\n            // make the regex if we don't have it already\n            mom = createUTC([2000, i]);\n            if (strict && !this._longMonthsParse[i]) {\n                this._longMonthsParse[i] = new RegExp('^' + this.months(mom, '').replace('.', '') + '$', 'i');\n                this._shortMonthsParse[i] = new RegExp('^' + this.monthsShort(mom, '').replace('.', '') + '$', 'i');\n            }\n            if (!strict && !this._monthsParse[i]) {\n                regex = '^' + this.months(mom, '') + '|^' + this.monthsShort(mom, '');\n                this._monthsParse[i] = new RegExp(regex.replace('.', ''), 'i');\n            }\n            // test the regex\n            if (strict && format === 'MMMM' && this._longMonthsParse[i].test(monthName)) {\n                return i;\n            } else if (strict && format === 'MMM' && this._shortMonthsParse[i].test(monthName)) {\n                return i;\n            } else if (!strict && this._monthsParse[i].test(monthName)) {\n                return i;\n            }\n        }\n    }\n\n    // MOMENTS\n\n    function setMonth (mom, value) {\n        var dayOfMonth;\n\n        if (!mom.isValid()) {\n            // No op\n            return mom;\n        }\n\n        if (typeof value === 'string') {\n            if (/^\\d+$/.test(value)) {\n                value = toInt(value);\n            } else {\n                value = mom.localeData().monthsParse(value);\n                // TODO: Another silent failure?\n                if (!isNumber(value)) {\n                    return mom;\n                }\n            }\n        }\n\n        dayOfMonth = Math.min(mom.date(), daysInMonth(mom.year(), value));\n        mom._d['set' + (mom._isUTC ? 'UTC' : '') + 'Month'](value, dayOfMonth);\n        return mom;\n    }\n\n    function getSetMonth (value) {\n        if (value != null) {\n            setMonth(this, value);\n            hooks.updateOffset(this, true);\n            return this;\n        } else {\n            return get(this, 'Month');\n        }\n    }\n\n    function getDaysInMonth () {\n        return daysInMonth(this.year(), this.month());\n    }\n\n    var defaultMonthsShortRegex = matchWord;\n    function monthsShortRegex (isStrict) {\n        if (this._monthsParseExact) {\n            if (!hasOwnProp(this, '_monthsRegex')) {\n                computeMonthsParse.call(this);\n            }\n            if (isStrict) {\n                return this._monthsShortStrictRegex;\n            } else {\n                return this._monthsShortRegex;\n            }\n        } else {\n            if (!hasOwnProp(this, '_monthsShortRegex')) {\n                this._monthsShortRegex = defaultMonthsShortRegex;\n            }\n            return this._monthsShortStrictRegex && isStrict ?\n                this._monthsShortStrictRegex : this._monthsShortRegex;\n        }\n    }\n\n    var defaultMonthsRegex = matchWord;\n    function monthsRegex (isStrict) {\n        if (this._monthsParseExact) {\n            if (!hasOwnProp(this, '_monthsRegex')) {\n                computeMonthsParse.call(this);\n            }\n            if (isStrict) {\n                return this._monthsStrictRegex;\n            } else {\n                return this._monthsRegex;\n            }\n        } else {\n            if (!hasOwnProp(this, '_monthsRegex')) {\n                this._monthsRegex = defaultMonthsRegex;\n            }\n            return this._monthsStrictRegex && isStrict ?\n                this._monthsStrictRegex : this._monthsRegex;\n        }\n    }\n\n    function computeMonthsParse () {\n        function cmpLenRev(a, b) {\n            return b.length - a.length;\n        }\n\n        var shortPieces = [], longPieces = [], mixedPieces = [],\n            i, mom;\n        for (i = 0; i < 12; i++) {\n            // make the regex if we don't have it already\n            mom = createUTC([2000, i]);\n            shortPieces.push(this.monthsShort(mom, ''));\n            longPieces.push(this.months(mom, ''));\n            mixedPieces.push(this.months(mom, ''));\n            mixedPieces.push(this.monthsShort(mom, ''));\n        }\n        // Sorting makes sure if one month (or abbr) is a prefix of another it\n        // will match the longer piece.\n        shortPieces.sort(cmpLenRev);\n        longPieces.sort(cmpLenRev);\n        mixedPieces.sort(cmpLenRev);\n        for (i = 0; i < 12; i++) {\n            shortPieces[i] = regexEscape(shortPieces[i]);\n            longPieces[i] = regexEscape(longPieces[i]);\n        }\n        for (i = 0; i < 24; i++) {\n            mixedPieces[i] = regexEscape(mixedPieces[i]);\n        }\n\n        this._monthsRegex = new RegExp('^(' + mixedPieces.join('|') + ')', 'i');\n        this._monthsShortRegex = this._monthsRegex;\n        this._monthsStrictRegex = new RegExp('^(' + longPieces.join('|') + ')', 'i');\n        this._monthsShortStrictRegex = new RegExp('^(' + shortPieces.join('|') + ')', 'i');\n    }\n\n    function createDate (y, m, d, h, M, s, ms) {\n        // can't just apply() to create a date:\n        // https://stackoverflow.com/q/181348\n        var date = new Date(y, m, d, h, M, s, ms);\n\n        // the date constructor remaps years 0-99 to 1900-1999\n        if (y < 100 && y >= 0 && isFinite(date.getFullYear())) {\n            date.setFullYear(y);\n        }\n        return date;\n    }\n\n    function createUTCDate (y) {\n        var date = new Date(Date.UTC.apply(null, arguments));\n\n        // the Date.UTC function remaps years 0-99 to 1900-1999\n        if (y < 100 && y >= 0 && isFinite(date.getUTCFullYear())) {\n            date.setUTCFullYear(y);\n        }\n        return date;\n    }\n\n    // start-of-first-week - start-of-year\n    function firstWeekOffset(year, dow, doy) {\n        var // first-week day -- which january is always in the first week (4 for iso, 1 for other)\n            fwd = 7 + dow - doy,\n            // first-week day local weekday -- which local weekday is fwd\n            fwdlw = (7 + createUTCDate(year, 0, fwd).getUTCDay() - dow) % 7;\n\n        return -fwdlw + fwd - 1;\n    }\n\n    // https://en.wikipedia.org/wiki/ISO_week_date#Calculating_a_date_given_the_year.2C_week_number_and_weekday\n    function dayOfYearFromWeeks(year, week, weekday, dow, doy) {\n        var localWeekday = (7 + weekday - dow) % 7,\n            weekOffset = firstWeekOffset(year, dow, doy),\n            dayOfYear = 1 + 7 * (week - 1) + localWeekday + weekOffset,\n            resYear, resDayOfYear;\n\n        if (dayOfYear <= 0) {\n            resYear = year - 1;\n            resDayOfYear = daysInYear(resYear) + dayOfYear;\n        } else if (dayOfYear > daysInYear(year)) {\n            resYear = year + 1;\n            resDayOfYear = dayOfYear - daysInYear(year);\n        } else {\n            resYear = year;\n            resDayOfYear = dayOfYear;\n        }\n\n        return {\n            year: resYear,\n            dayOfYear: resDayOfYear\n        };\n    }\n\n    function weekOfYear(mom, dow, doy) {\n        var weekOffset = firstWeekOffset(mom.year(), dow, doy),\n            week = Math.floor((mom.dayOfYear() - weekOffset - 1) / 7) + 1,\n            resWeek, resYear;\n\n        if (week < 1) {\n            resYear = mom.year() - 1;\n            resWeek = week + weeksInYear(resYear, dow, doy);\n        } else if (week > weeksInYear(mom.year(), dow, doy)) {\n            resWeek = week - weeksInYear(mom.year(), dow, doy);\n            resYear = mom.year() + 1;\n        } else {\n            resYear = mom.year();\n            resWeek = week;\n        }\n\n        return {\n            week: resWeek,\n            year: resYear\n        };\n    }\n\n    function weeksInYear(year, dow, doy) {\n        var weekOffset = firstWeekOffset(year, dow, doy),\n            weekOffsetNext = firstWeekOffset(year + 1, dow, doy);\n        return (daysInYear(year) - weekOffset + weekOffsetNext) / 7;\n    }\n\n    // FORMATTING\n\n    addFormatToken('w', ['ww', 2], 'wo', 'week');\n    addFormatToken('W', ['WW', 2], 'Wo', 'isoWeek');\n\n    // ALIASES\n\n    addUnitAlias('week', 'w');\n    addUnitAlias('isoWeek', 'W');\n\n    // PRIORITIES\n\n    addUnitPriority('week', 5);\n    addUnitPriority('isoWeek', 5);\n\n    // PARSING\n\n    addRegexToken('w',  match1to2);\n    addRegexToken('ww', match1to2, match2);\n    addRegexToken('W',  match1to2);\n    addRegexToken('WW', match1to2, match2);\n\n    addWeekParseToken(['w', 'ww', 'W', 'WW'], function (input, week, config, token) {\n        week[token.substr(0, 1)] = toInt(input);\n    });\n\n    // HELPERS\n\n    // LOCALES\n\n    function localeWeek (mom) {\n        return weekOfYear(mom, this._week.dow, this._week.doy).week;\n    }\n\n    var defaultLocaleWeek = {\n        dow : 0, // Sunday is the first day of the week.\n        doy : 6  // The week that contains Jan 1st is the first week of the year.\n    };\n\n    function localeFirstDayOfWeek () {\n        return this._week.dow;\n    }\n\n    function localeFirstDayOfYear () {\n        return this._week.doy;\n    }\n\n    // MOMENTS\n\n    function getSetWeek (input) {\n        var week = this.localeData().week(this);\n        return input == null ? week : this.add((input - week) * 7, 'd');\n    }\n\n    function getSetISOWeek (input) {\n        var week = weekOfYear(this, 1, 4).week;\n        return input == null ? week : this.add((input - week) * 7, 'd');\n    }\n\n    // FORMATTING\n\n    addFormatToken('d', 0, 'do', 'day');\n\n    addFormatToken('dd', 0, 0, function (format) {\n        return this.localeData().weekdaysMin(this, format);\n    });\n\n    addFormatToken('ddd', 0, 0, function (format) {\n        return this.localeData().weekdaysShort(this, format);\n    });\n\n    addFormatToken('dddd', 0, 0, function (format) {\n        return this.localeData().weekdays(this, format);\n    });\n\n    addFormatToken('e', 0, 0, 'weekday');\n    addFormatToken('E', 0, 0, 'isoWeekday');\n\n    // ALIASES\n\n    addUnitAlias('day', 'd');\n    addUnitAlias('weekday', 'e');\n    addUnitAlias('isoWeekday', 'E');\n\n    // PRIORITY\n    addUnitPriority('day', 11);\n    addUnitPriority('weekday', 11);\n    addUnitPriority('isoWeekday', 11);\n\n    // PARSING\n\n    addRegexToken('d',    match1to2);\n    addRegexToken('e',    match1to2);\n    addRegexToken('E',    match1to2);\n    addRegexToken('dd',   function (isStrict, locale) {\n        return locale.weekdaysMinRegex(isStrict);\n    });\n    addRegexToken('ddd',   function (isStrict, locale) {\n        return locale.weekdaysShortRegex(isStrict);\n    });\n    addRegexToken('dddd',   function (isStrict, locale) {\n        return locale.weekdaysRegex(isStrict);\n    });\n\n    addWeekParseToken(['dd', 'ddd', 'dddd'], function (input, week, config, token) {\n        var weekday = config._locale.weekdaysParse(input, token, config._strict);\n        // if we didn't get a weekday name, mark the date as invalid\n        if (weekday != null) {\n            week.d = weekday;\n        } else {\n            getParsingFlags(config).invalidWeekday = input;\n        }\n    });\n\n    addWeekParseToken(['d', 'e', 'E'], function (input, week, config, token) {\n        week[token] = toInt(input);\n    });\n\n    // HELPERS\n\n    function parseWeekday(input, locale) {\n        if (typeof input !== 'string') {\n            return input;\n        }\n\n        if (!isNaN(input)) {\n            return parseInt(input, 10);\n        }\n\n        input = locale.weekdaysParse(input);\n        if (typeof input === 'number') {\n            return input;\n        }\n\n        return null;\n    }\n\n    function parseIsoWeekday(input, locale) {\n        if (typeof input === 'string') {\n            return locale.weekdaysParse(input) % 7 || 7;\n        }\n        return isNaN(input) ? null : input;\n    }\n\n    // LOCALES\n\n    var defaultLocaleWeekdays = 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_');\n    function localeWeekdays (m, format) {\n        if (!m) {\n            return isArray(this._weekdays) ? this._weekdays :\n                this._weekdays['standalone'];\n        }\n        return isArray(this._weekdays) ? this._weekdays[m.day()] :\n            this._weekdays[this._weekdays.isFormat.test(format) ? 'format' : 'standalone'][m.day()];\n    }\n\n    var defaultLocaleWeekdaysShort = 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_');\n    function localeWeekdaysShort (m) {\n        return (m) ? this._weekdaysShort[m.day()] : this._weekdaysShort;\n    }\n\n    var defaultLocaleWeekdaysMin = 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_');\n    function localeWeekdaysMin (m) {\n        return (m) ? this._weekdaysMin[m.day()] : this._weekdaysMin;\n    }\n\n    function handleStrictParse$1(weekdayName, format, strict) {\n        var i, ii, mom, llc = weekdayName.toLocaleLowerCase();\n        if (!this._weekdaysParse) {\n            this._weekdaysParse = [];\n            this._shortWeekdaysParse = [];\n            this._minWeekdaysParse = [];\n\n            for (i = 0; i < 7; ++i) {\n                mom = createUTC([2000, 1]).day(i);\n                this._minWeekdaysParse[i] = this.weekdaysMin(mom, '').toLocaleLowerCase();\n                this._shortWeekdaysParse[i] = this.weekdaysShort(mom, '').toLocaleLowerCase();\n                this._weekdaysParse[i] = this.weekdays(mom, '').toLocaleLowerCase();\n            }\n        }\n\n        if (strict) {\n            if (format === 'dddd') {\n                ii = indexOf.call(this._weekdaysParse, llc);\n                return ii !== -1 ? ii : null;\n            } else if (format === 'ddd') {\n                ii = indexOf.call(this._shortWeekdaysParse, llc);\n                return ii !== -1 ? ii : null;\n            } else {\n                ii = indexOf.call(this._minWeekdaysParse, llc);\n                return ii !== -1 ? ii : null;\n            }\n        } else {\n            if (format === 'dddd') {\n                ii = indexOf.call(this._weekdaysParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._shortWeekdaysParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._minWeekdaysParse, llc);\n                return ii !== -1 ? ii : null;\n            } else if (format === 'ddd') {\n                ii = indexOf.call(this._shortWeekdaysParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._weekdaysParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._minWeekdaysParse, llc);\n                return ii !== -1 ? ii : null;\n            } else {\n                ii = indexOf.call(this._minWeekdaysParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._weekdaysParse, llc);\n                if (ii !== -1) {\n                    return ii;\n                }\n                ii = indexOf.call(this._shortWeekdaysParse, llc);\n                return ii !== -1 ? ii : null;\n            }\n        }\n    }\n\n    function localeWeekdaysParse (weekdayName, format, strict) {\n        var i, mom, regex;\n\n        if (this._weekdaysParseExact) {\n            return handleStrictParse$1.call(this, weekdayName, format, strict);\n        }\n\n        if (!this._weekdaysParse) {\n            this._weekdaysParse = [];\n            this._minWeekdaysParse = [];\n            this._shortWeekdaysParse = [];\n            this._fullWeekdaysParse = [];\n        }\n\n        for (i = 0; i < 7; i++) {\n            // make the regex if we don't have it already\n\n            mom = createUTC([2000, 1]).day(i);\n            if (strict && !this._fullWeekdaysParse[i]) {\n                this._fullWeekdaysParse[i] = new RegExp('^' + this.weekdays(mom, '').replace('.', '\\\\.?') + '$', 'i');\n                this._shortWeekdaysParse[i] = new RegExp('^' + this.weekdaysShort(mom, '').replace('.', '\\\\.?') + '$', 'i');\n                this._minWeekdaysParse[i] = new RegExp('^' + this.weekdaysMin(mom, '').replace('.', '\\\\.?') + '$', 'i');\n            }\n            if (!this._weekdaysParse[i]) {\n                regex = '^' + this.weekdays(mom, '') + '|^' + this.weekdaysShort(mom, '') + '|^' + this.weekdaysMin(mom, '');\n                this._weekdaysParse[i] = new RegExp(regex.replace('.', ''), 'i');\n            }\n            // test the regex\n            if (strict && format === 'dddd' && this._fullWeekdaysParse[i].test(weekdayName)) {\n                return i;\n            } else if (strict && format === 'ddd' && this._shortWeekdaysParse[i].test(weekdayName)) {\n                return i;\n            } else if (strict && format === 'dd' && this._minWeekdaysParse[i].test(weekdayName)) {\n                return i;\n            } else if (!strict && this._weekdaysParse[i].test(weekdayName)) {\n                return i;\n            }\n        }\n    }\n\n    // MOMENTS\n\n    function getSetDayOfWeek (input) {\n        if (!this.isValid()) {\n            return input != null ? this : NaN;\n        }\n        var day = this._isUTC ? this._d.getUTCDay() : this._d.getDay();\n        if (input != null) {\n            input = parseWeekday(input, this.localeData());\n            return this.add(input - day, 'd');\n        } else {\n            return day;\n        }\n    }\n\n    function getSetLocaleDayOfWeek (input) {\n        if (!this.isValid()) {\n            return input != null ? this : NaN;\n        }\n        var weekday = (this.day() + 7 - this.localeData()._week.dow) % 7;\n        return input == null ? weekday : this.add(input - weekday, 'd');\n    }\n\n    function getSetISODayOfWeek (input) {\n        if (!this.isValid()) {\n            return input != null ? this : NaN;\n        }\n\n        // behaves the same as moment#day except\n        // as a getter, returns 7 instead of 0 (1-7 range instead of 0-6)\n        // as a setter, sunday should belong to the previous week.\n\n        if (input != null) {\n            var weekday = parseIsoWeekday(input, this.localeData());\n            return this.day(this.day() % 7 ? weekday : weekday - 7);\n        } else {\n            return this.day() || 7;\n        }\n    }\n\n    var defaultWeekdaysRegex = matchWord;\n    function weekdaysRegex (isStrict) {\n        if (this._weekdaysParseExact) {\n            if (!hasOwnProp(this, '_weekdaysRegex')) {\n                computeWeekdaysParse.call(this);\n            }\n            if (isStrict) {\n                return this._weekdaysStrictRegex;\n            } else {\n                return this._weekdaysRegex;\n            }\n        } else {\n            if (!hasOwnProp(this, '_weekdaysRegex')) {\n                this._weekdaysRegex = defaultWeekdaysRegex;\n            }\n            return this._weekdaysStrictRegex && isStrict ?\n                this._weekdaysStrictRegex : this._weekdaysRegex;\n        }\n    }\n\n    var defaultWeekdaysShortRegex = matchWord;\n    function weekdaysShortRegex (isStrict) {\n        if (this._weekdaysParseExact) {\n            if (!hasOwnProp(this, '_weekdaysRegex')) {\n                computeWeekdaysParse.call(this);\n            }\n            if (isStrict) {\n                return this._weekdaysShortStrictRegex;\n            } else {\n                return this._weekdaysShortRegex;\n            }\n        } else {\n            if (!hasOwnProp(this, '_weekdaysShortRegex')) {\n                this._weekdaysShortRegex = defaultWeekdaysShortRegex;\n            }\n            return this._weekdaysShortStrictRegex && isStrict ?\n                this._weekdaysShortStrictRegex : this._weekdaysShortRegex;\n        }\n    }\n\n    var defaultWeekdaysMinRegex = matchWord;\n    function weekdaysMinRegex (isStrict) {\n        if (this._weekdaysParseExact) {\n            if (!hasOwnProp(this, '_weekdaysRegex')) {\n                computeWeekdaysParse.call(this);\n            }\n            if (isStrict) {\n                return this._weekdaysMinStrictRegex;\n            } else {\n                return this._weekdaysMinRegex;\n            }\n        } else {\n            if (!hasOwnProp(this, '_weekdaysMinRegex')) {\n                this._weekdaysMinRegex = defaultWeekdaysMinRegex;\n            }\n            return this._weekdaysMinStrictRegex && isStrict ?\n                this._weekdaysMinStrictRegex : this._weekdaysMinRegex;\n        }\n    }\n\n\n    function computeWeekdaysParse () {\n        function cmpLenRev(a, b) {\n            return b.length - a.length;\n        }\n\n        var minPieces = [], shortPieces = [], longPieces = [], mixedPieces = [],\n            i, mom, minp, shortp, longp;\n        for (i = 0; i < 7; i++) {\n            // make the regex if we don't have it already\n            mom = createUTC([2000, 1]).day(i);\n            minp = this.weekdaysMin(mom, '');\n            shortp = this.weekdaysShort(mom, '');\n            longp = this.weekdays(mom, '');\n            minPieces.push(minp);\n            shortPieces.push(shortp);\n            longPieces.push(longp);\n            mixedPieces.push(minp);\n            mixedPieces.push(shortp);\n            mixedPieces.push(longp);\n        }\n        // Sorting makes sure if one weekday (or abbr) is a prefix of another it\n        // will match the longer piece.\n        minPieces.sort(cmpLenRev);\n        shortPieces.sort(cmpLenRev);\n        longPieces.sort(cmpLenRev);\n        mixedPieces.sort(cmpLenRev);\n        for (i = 0; i < 7; i++) {\n            shortPieces[i] = regexEscape(shortPieces[i]);\n            longPieces[i] = regexEscape(longPieces[i]);\n            mixedPieces[i] = regexEscape(mixedPieces[i]);\n        }\n\n        this._weekdaysRegex = new RegExp('^(' + mixedPieces.join('|') + ')', 'i');\n        this._weekdaysShortRegex = this._weekdaysRegex;\n        this._weekdaysMinRegex = this._weekdaysRegex;\n\n        this._weekdaysStrictRegex = new RegExp('^(' + longPieces.join('|') + ')', 'i');\n        this._weekdaysShortStrictRegex = new RegExp('^(' + shortPieces.join('|') + ')', 'i');\n        this._weekdaysMinStrictRegex = new RegExp('^(' + minPieces.join('|') + ')', 'i');\n    }\n\n    // FORMATTING\n\n    function hFormat() {\n        return this.hours() % 12 || 12;\n    }\n\n    function kFormat() {\n        return this.hours() || 24;\n    }\n\n    addFormatToken('H', ['HH', 2], 0, 'hour');\n    addFormatToken('h', ['hh', 2], 0, hFormat);\n    addFormatToken('k', ['kk', 2], 0, kFormat);\n\n    addFormatToken('hmm', 0, 0, function () {\n        return '' + hFormat.apply(this) + zeroFill(this.minutes(), 2);\n    });\n\n    addFormatToken('hmmss', 0, 0, function () {\n        return '' + hFormat.apply(this) + zeroFill(this.minutes(), 2) +\n            zeroFill(this.seconds(), 2);\n    });\n\n    addFormatToken('Hmm', 0, 0, function () {\n        return '' + this.hours() + zeroFill(this.minutes(), 2);\n    });\n\n    addFormatToken('Hmmss', 0, 0, function () {\n        return '' + this.hours() + zeroFill(this.minutes(), 2) +\n            zeroFill(this.seconds(), 2);\n    });\n\n    function meridiem (token, lowercase) {\n        addFormatToken(token, 0, 0, function () {\n            return this.localeData().meridiem(this.hours(), this.minutes(), lowercase);\n        });\n    }\n\n    meridiem('a', true);\n    meridiem('A', false);\n\n    // ALIASES\n\n    addUnitAlias('hour', 'h');\n\n    // PRIORITY\n    addUnitPriority('hour', 13);\n\n    // PARSING\n\n    function matchMeridiem (isStrict, locale) {\n        return locale._meridiemParse;\n    }\n\n    addRegexToken('a',  matchMeridiem);\n    addRegexToken('A',  matchMeridiem);\n    addRegexToken('H',  match1to2);\n    addRegexToken('h',  match1to2);\n    addRegexToken('k',  match1to2);\n    addRegexToken('HH', match1to2, match2);\n    addRegexToken('hh', match1to2, match2);\n    addRegexToken('kk', match1to2, match2);\n\n    addRegexToken('hmm', match3to4);\n    addRegexToken('hmmss', match5to6);\n    addRegexToken('Hmm', match3to4);\n    addRegexToken('Hmmss', match5to6);\n\n    addParseToken(['H', 'HH'], HOUR);\n    addParseToken(['k', 'kk'], function (input, array, config) {\n        var kInput = toInt(input);\n        array[HOUR] = kInput === 24 ? 0 : kInput;\n    });\n    addParseToken(['a', 'A'], function (input, array, config) {\n        config._isPm = config._locale.isPM(input);\n        config._meridiem = input;\n    });\n    addParseToken(['h', 'hh'], function (input, array, config) {\n        array[HOUR] = toInt(input);\n        getParsingFlags(config).bigHour = true;\n    });\n    addParseToken('hmm', function (input, array, config) {\n        var pos = input.length - 2;\n        array[HOUR] = toInt(input.substr(0, pos));\n        array[MINUTE] = toInt(input.substr(pos));\n        getParsingFlags(config).bigHour = true;\n    });\n    addParseToken('hmmss', function (input, array, config) {\n        var pos1 = input.length - 4;\n        var pos2 = input.length - 2;\n        array[HOUR] = toInt(input.substr(0, pos1));\n        array[MINUTE] = toInt(input.substr(pos1, 2));\n        array[SECOND] = toInt(input.substr(pos2));\n        getParsingFlags(config).bigHour = true;\n    });\n    addParseToken('Hmm', function (input, array, config) {\n        var pos = input.length - 2;\n        array[HOUR] = toInt(input.substr(0, pos));\n        array[MINUTE] = toInt(input.substr(pos));\n    });\n    addParseToken('Hmmss', function (input, array, config) {\n        var pos1 = input.length - 4;\n        var pos2 = input.length - 2;\n        array[HOUR] = toInt(input.substr(0, pos1));\n        array[MINUTE] = toInt(input.substr(pos1, 2));\n        array[SECOND] = toInt(input.substr(pos2));\n    });\n\n    // LOCALES\n\n    function localeIsPM (input) {\n        // IE8 Quirks Mode & IE7 Standards Mode do not allow accessing strings like arrays\n        // Using charAt should be more compatible.\n        return ((input + '').toLowerCase().charAt(0) === 'p');\n    }\n\n    var defaultLocaleMeridiemParse = /[ap]\\.?m?\\.?/i;\n    function localeMeridiem (hours, minutes, isLower) {\n        if (hours > 11) {\n            return isLower ? 'pm' : 'PM';\n        } else {\n            return isLower ? 'am' : 'AM';\n        }\n    }\n\n\n    // MOMENTS\n\n    // Setting the hour should keep the time, because the user explicitly\n    // specified which hour they want. So trying to maintain the same hour (in\n    // a new timezone) makes sense. Adding/subtracting hours does not follow\n    // this rule.\n    var getSetHour = makeGetSet('Hours', true);\n\n    var baseConfig = {\n        calendar: defaultCalendar,\n        longDateFormat: defaultLongDateFormat,\n        invalidDate: defaultInvalidDate,\n        ordinal: defaultOrdinal,\n        dayOfMonthOrdinalParse: defaultDayOfMonthOrdinalParse,\n        relativeTime: defaultRelativeTime,\n\n        months: defaultLocaleMonths,\n        monthsShort: defaultLocaleMonthsShort,\n\n        week: defaultLocaleWeek,\n\n        weekdays: defaultLocaleWeekdays,\n        weekdaysMin: defaultLocaleWeekdaysMin,\n        weekdaysShort: defaultLocaleWeekdaysShort,\n\n        meridiemParse: defaultLocaleMeridiemParse\n    };\n\n    // internal storage for locale config files\n    var locales = {};\n    var localeFamilies = {};\n    var globalLocale;\n\n    function normalizeLocale(key) {\n        return key ? key.toLowerCase().replace('_', '-') : key;\n    }\n\n    // pick the locale from the array\n    // try ['en-au', 'en-gb'] as 'en-au', 'en-gb', 'en', as in move through the list trying each\n    // substring from most specific to least, but move to the next array item if it's a more specific variant than the current root\n    function chooseLocale(names) {\n        var i = 0, j, next, locale, split;\n\n        while (i < names.length) {\n            split = normalizeLocale(names[i]).split('-');\n            j = split.length;\n            next = normalizeLocale(names[i + 1]);\n            next = next ? next.split('-') : null;\n            while (j > 0) {\n                locale = loadLocale(split.slice(0, j).join('-'));\n                if (locale) {\n                    return locale;\n                }\n                if (next && next.length >= j && compareArrays(split, next, true) >= j - 1) {\n                    //the next array item is better than a shallower substring of this one\n                    break;\n                }\n                j--;\n            }\n            i++;\n        }\n        return globalLocale;\n    }\n\n    function loadLocale(name) {\n        var oldLocale = null;\n        // TODO: Find a better way to register and load all the locales in Node\n        if (!locales[name] && (typeof module !== 'undefined') &&\n                module && module.exports) {\n            try {\n                oldLocale = globalLocale._abbr;\n                var aliasedRequire = require;\n                aliasedRequire('./locale/' + name);\n                getSetGlobalLocale(oldLocale);\n            } catch (e) {}\n        }\n        return locales[name];\n    }\n\n    // This function will load locale and then set the global locale.  If\n    // no arguments are passed in, it will simply return the current global\n    // locale key.\n    function getSetGlobalLocale (key, values) {\n        var data;\n        if (key) {\n            if (isUndefined(values)) {\n                data = getLocale(key);\n            }\n            else {\n                data = defineLocale(key, values);\n            }\n\n            if (data) {\n                // moment.duration._locale = moment._locale = data;\n                globalLocale = data;\n            }\n            else {\n                if ((typeof console !==  'undefined') && console.warn) {\n                    //warn user if arguments are passed but the locale could not be set\n                    console.warn('Locale ' + key +  ' not found. Did you forget to load it?');\n                }\n            }\n        }\n\n        return globalLocale._abbr;\n    }\n\n    function defineLocale (name, config) {\n        if (config !== null) {\n            var locale, parentConfig = baseConfig;\n            config.abbr = name;\n            if (locales[name] != null) {\n                deprecateSimple('defineLocaleOverride',\n                        'use moment.updateLocale(localeName, config) to change ' +\n                        'an existing locale. moment.defineLocale(localeName, ' +\n                        'config) should only be used for creating a new locale ' +\n                        'See http://momentjs.com/guides/#/warnings/define-locale/ for more info.');\n                parentConfig = locales[name]._config;\n            } else if (config.parentLocale != null) {\n                if (locales[config.parentLocale] != null) {\n                    parentConfig = locales[config.parentLocale]._config;\n                } else {\n                    locale = loadLocale(config.parentLocale);\n                    if (locale != null) {\n                        parentConfig = locale._config;\n                    } else {\n                        if (!localeFamilies[config.parentLocale]) {\n                            localeFamilies[config.parentLocale] = [];\n                        }\n                        localeFamilies[config.parentLocale].push({\n                            name: name,\n                            config: config\n                        });\n                        return null;\n                    }\n                }\n            }\n            locales[name] = new Locale(mergeConfigs(parentConfig, config));\n\n            if (localeFamilies[name]) {\n                localeFamilies[name].forEach(function (x) {\n                    defineLocale(x.name, x.config);\n                });\n            }\n\n            // backwards compat for now: also set the locale\n            // make sure we set the locale AFTER all child locales have been\n            // created, so we won't end up with the child locale set.\n            getSetGlobalLocale(name);\n\n\n            return locales[name];\n        } else {\n            // useful for testing\n            delete locales[name];\n            return null;\n        }\n    }\n\n    function updateLocale(name, config) {\n        if (config != null) {\n            var locale, tmpLocale, parentConfig = baseConfig;\n            // MERGE\n            tmpLocale = loadLocale(name);\n            if (tmpLocale != null) {\n                parentConfig = tmpLocale._config;\n            }\n            config = mergeConfigs(parentConfig, config);\n            locale = new Locale(config);\n            locale.parentLocale = locales[name];\n            locales[name] = locale;\n\n            // backwards compat for now: also set the locale\n            getSetGlobalLocale(name);\n        } else {\n            // pass null for config to unupdate, useful for tests\n            if (locales[name] != null) {\n                if (locales[name].parentLocale != null) {\n                    locales[name] = locales[name].parentLocale;\n                } else if (locales[name] != null) {\n                    delete locales[name];\n                }\n            }\n        }\n        return locales[name];\n    }\n\n    // returns locale data\n    function getLocale (key) {\n        var locale;\n\n        if (key && key._locale && key._locale._abbr) {\n            key = key._locale._abbr;\n        }\n\n        if (!key) {\n            return globalLocale;\n        }\n\n        if (!isArray(key)) {\n            //short-circuit everything else\n            locale = loadLocale(key);\n            if (locale) {\n                return locale;\n            }\n            key = [key];\n        }\n\n        return chooseLocale(key);\n    }\n\n    function listLocales() {\n        return keys(locales);\n    }\n\n    function checkOverflow (m) {\n        var overflow;\n        var a = m._a;\n\n        if (a && getParsingFlags(m).overflow === -2) {\n            overflow =\n                a[MONTH]       < 0 || a[MONTH]       > 11  ? MONTH :\n                a[DATE]        < 1 || a[DATE]        > daysInMonth(a[YEAR], a[MONTH]) ? DATE :\n                a[HOUR]        < 0 || a[HOUR]        > 24 || (a[HOUR] === 24 && (a[MINUTE] !== 0 || a[SECOND] !== 0 || a[MILLISECOND] !== 0)) ? HOUR :\n                a[MINUTE]      < 0 || a[MINUTE]      > 59  ? MINUTE :\n                a[SECOND]      < 0 || a[SECOND]      > 59  ? SECOND :\n                a[MILLISECOND] < 0 || a[MILLISECOND] > 999 ? MILLISECOND :\n                -1;\n\n            if (getParsingFlags(m)._overflowDayOfYear && (overflow < YEAR || overflow > DATE)) {\n                overflow = DATE;\n            }\n            if (getParsingFlags(m)._overflowWeeks && overflow === -1) {\n                overflow = WEEK;\n            }\n            if (getParsingFlags(m)._overflowWeekday && overflow === -1) {\n                overflow = WEEKDAY;\n            }\n\n            getParsingFlags(m).overflow = overflow;\n        }\n\n        return m;\n    }\n\n    // Pick the first defined of two or three arguments.\n    function defaults(a, b, c) {\n        if (a != null) {\n            return a;\n        }\n        if (b != null) {\n            return b;\n        }\n        return c;\n    }\n\n    function currentDateArray(config) {\n        // hooks is actually the exported moment object\n        var nowValue = new Date(hooks.now());\n        if (config._useUTC) {\n            return [nowValue.getUTCFullYear(), nowValue.getUTCMonth(), nowValue.getUTCDate()];\n        }\n        return [nowValue.getFullYear(), nowValue.getMonth(), nowValue.getDate()];\n    }\n\n    // convert an array to a date.\n    // the array should mirror the parameters below\n    // note: all values past the year are optional and will default to the lowest possible value.\n    // [year, month, day , hour, minute, second, millisecond]\n    function configFromArray (config) {\n        var i, date, input = [], currentDate, expectedWeekday, yearToUse;\n\n        if (config._d) {\n            return;\n        }\n\n        currentDate = currentDateArray(config);\n\n        //compute day of the year from weeks and weekdays\n        if (config._w && config._a[DATE] == null && config._a[MONTH] == null) {\n            dayOfYearFromWeekInfo(config);\n        }\n\n        //if the day of the year is set, figure out what it is\n        if (config._dayOfYear != null) {\n            yearToUse = defaults(config._a[YEAR], currentDate[YEAR]);\n\n            if (config._dayOfYear > daysInYear(yearToUse) || config._dayOfYear === 0) {\n                getParsingFlags(config)._overflowDayOfYear = true;\n            }\n\n            date = createUTCDate(yearToUse, 0, config._dayOfYear);\n            config._a[MONTH] = date.getUTCMonth();\n            config._a[DATE] = date.getUTCDate();\n        }\n\n        // Default to current date.\n        // * if no year, month, day of month are given, default to today\n        // * if day of month is given, default month and year\n        // * if month is given, default only year\n        // * if year is given, don't default anything\n        for (i = 0; i < 3 && config._a[i] == null; ++i) {\n            config._a[i] = input[i] = currentDate[i];\n        }\n\n        // Zero out whatever was not defaulted, including time\n        for (; i < 7; i++) {\n            config._a[i] = input[i] = (config._a[i] == null) ? (i === 2 ? 1 : 0) : config._a[i];\n        }\n\n        // Check for 24:00:00.000\n        if (config._a[HOUR] === 24 &&\n                config._a[MINUTE] === 0 &&\n                config._a[SECOND] === 0 &&\n                config._a[MILLISECOND] === 0) {\n            config._nextDay = true;\n            config._a[HOUR] = 0;\n        }\n\n        config._d = (config._useUTC ? createUTCDate : createDate).apply(null, input);\n        expectedWeekday = config._useUTC ? config._d.getUTCDay() : config._d.getDay();\n\n        // Apply timezone offset from input. The actual utcOffset can be changed\n        // with parseZone.\n        if (config._tzm != null) {\n            config._d.setUTCMinutes(config._d.getUTCMinutes() - config._tzm);\n        }\n\n        if (config._nextDay) {\n            config._a[HOUR] = 24;\n        }\n\n        // check for mismatching day of week\n        if (config._w && typeof config._w.d !== 'undefined' && config._w.d !== expectedWeekday) {\n            getParsingFlags(config).weekdayMismatch = true;\n        }\n    }\n\n    function dayOfYearFromWeekInfo(config) {\n        var w, weekYear, week, weekday, dow, doy, temp, weekdayOverflow;\n\n        w = config._w;\n        if (w.GG != null || w.W != null || w.E != null) {\n            dow = 1;\n            doy = 4;\n\n            // TODO: We need to take the current isoWeekYear, but that depends on\n            // how we interpret now (local, utc, fixed offset). So create\n            // a now version of current config (take local/utc/offset flags, and\n            // create now).\n            weekYear = defaults(w.GG, config._a[YEAR], weekOfYear(createLocal(), 1, 4).year);\n            week = defaults(w.W, 1);\n            weekday = defaults(w.E, 1);\n            if (weekday < 1 || weekday > 7) {\n                weekdayOverflow = true;\n            }\n        } else {\n            dow = config._locale._week.dow;\n            doy = config._locale._week.doy;\n\n            var curWeek = weekOfYear(createLocal(), dow, doy);\n\n            weekYear = defaults(w.gg, config._a[YEAR], curWeek.year);\n\n            // Default to current week.\n            week = defaults(w.w, curWeek.week);\n\n            if (w.d != null) {\n                // weekday -- low day numbers are considered next week\n                weekday = w.d;\n                if (weekday < 0 || weekday > 6) {\n                    weekdayOverflow = true;\n                }\n            } else if (w.e != null) {\n                // local weekday -- counting starts from begining of week\n                weekday = w.e + dow;\n                if (w.e < 0 || w.e > 6) {\n                    weekdayOverflow = true;\n                }\n            } else {\n                // default to begining of week\n                weekday = dow;\n            }\n        }\n        if (week < 1 || week > weeksInYear(weekYear, dow, doy)) {\n            getParsingFlags(config)._overflowWeeks = true;\n        } else if (weekdayOverflow != null) {\n            getParsingFlags(config)._overflowWeekday = true;\n        } else {\n            temp = dayOfYearFromWeeks(weekYear, week, weekday, dow, doy);\n            config._a[YEAR] = temp.year;\n            config._dayOfYear = temp.dayOfYear;\n        }\n    }\n\n    // iso 8601 regex\n    // 0000-00-00 0000-W00 or 0000-W00-0 + T + 00 or 00:00 or 00:00:00 or 00:00:00.000 + +00:00 or +0000 or +00)\n    var extendedIsoRegex = /^\\s*((?:[+-]\\d{6}|\\d{4})-(?:\\d\\d-\\d\\d|W\\d\\d-\\d|W\\d\\d|\\d\\d\\d|\\d\\d))(?:(T| )(\\d\\d(?::\\d\\d(?::\\d\\d(?:[.,]\\d+)?)?)?)([\\+\\-]\\d\\d(?::?\\d\\d)?|\\s*Z)?)?$/;\n    var basicIsoRegex = /^\\s*((?:[+-]\\d{6}|\\d{4})(?:\\d\\d\\d\\d|W\\d\\d\\d|W\\d\\d|\\d\\d\\d|\\d\\d))(?:(T| )(\\d\\d(?:\\d\\d(?:\\d\\d(?:[.,]\\d+)?)?)?)([\\+\\-]\\d\\d(?::?\\d\\d)?|\\s*Z)?)?$/;\n\n    var tzRegex = /Z|[+-]\\d\\d(?::?\\d\\d)?/;\n\n    var isoDates = [\n        ['YYYYYY-MM-DD', /[+-]\\d{6}-\\d\\d-\\d\\d/],\n        ['YYYY-MM-DD', /\\d{4}-\\d\\d-\\d\\d/],\n        ['GGGG-[W]WW-E', /\\d{4}-W\\d\\d-\\d/],\n        ['GGGG-[W]WW', /\\d{4}-W\\d\\d/, false],\n        ['YYYY-DDD', /\\d{4}-\\d{3}/],\n        ['YYYY-MM', /\\d{4}-\\d\\d/, false],\n        ['YYYYYYMMDD', /[+-]\\d{10}/],\n        ['YYYYMMDD', /\\d{8}/],\n        // YYYYMM is NOT allowed by the standard\n        ['GGGG[W]WWE', /\\d{4}W\\d{3}/],\n        ['GGGG[W]WW', /\\d{4}W\\d{2}/, false],\n        ['YYYYDDD', /\\d{7}/]\n    ];\n\n    // iso time formats and regexes\n    var isoTimes = [\n        ['HH:mm:ss.SSSS', /\\d\\d:\\d\\d:\\d\\d\\.\\d+/],\n        ['HH:mm:ss,SSSS', /\\d\\d:\\d\\d:\\d\\d,\\d+/],\n        ['HH:mm:ss', /\\d\\d:\\d\\d:\\d\\d/],\n        ['HH:mm', /\\d\\d:\\d\\d/],\n        ['HHmmss.SSSS', /\\d\\d\\d\\d\\d\\d\\.\\d+/],\n        ['HHmmss,SSSS', /\\d\\d\\d\\d\\d\\d,\\d+/],\n        ['HHmmss', /\\d\\d\\d\\d\\d\\d/],\n        ['HHmm', /\\d\\d\\d\\d/],\n        ['HH', /\\d\\d/]\n    ];\n\n    var aspNetJsonRegex = /^\\/?Date\\((\\-?\\d+)/i;\n\n    // date from iso format\n    function configFromISO(config) {\n        var i, l,\n            string = config._i,\n            match = extendedIsoRegex.exec(string) || basicIsoRegex.exec(string),\n            allowTime, dateFormat, timeFormat, tzFormat;\n\n        if (match) {\n            getParsingFlags(config).iso = true;\n\n            for (i = 0, l = isoDates.length; i < l; i++) {\n                if (isoDates[i][1].exec(match[1])) {\n                    dateFormat = isoDates[i][0];\n                    allowTime = isoDates[i][2] !== false;\n                    break;\n                }\n            }\n            if (dateFormat == null) {\n                config._isValid = false;\n                return;\n            }\n            if (match[3]) {\n                for (i = 0, l = isoTimes.length; i < l; i++) {\n                    if (isoTimes[i][1].exec(match[3])) {\n                        // match[2] should be 'T' or space\n                        timeFormat = (match[2] || ' ') + isoTimes[i][0];\n                        break;\n                    }\n                }\n                if (timeFormat == null) {\n                    config._isValid = false;\n                    return;\n                }\n            }\n            if (!allowTime && timeFormat != null) {\n                config._isValid = false;\n                return;\n            }\n            if (match[4]) {\n                if (tzRegex.exec(match[4])) {\n                    tzFormat = 'Z';\n                } else {\n                    config._isValid = false;\n                    return;\n                }\n            }\n            config._f = dateFormat + (timeFormat || '') + (tzFormat || '');\n            configFromStringAndFormat(config);\n        } else {\n            config._isValid = false;\n        }\n    }\n\n    // RFC 2822 regex: For details see https://tools.ietf.org/html/rfc2822#section-3.3\n    var rfc2822 = /^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\\s)?(\\d{1,2})\\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\\s(\\d{2,4})\\s(\\d\\d):(\\d\\d)(?::(\\d\\d))?\\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\\d{4}))$/;\n\n    function extractFromRFC2822Strings(yearStr, monthStr, dayStr, hourStr, minuteStr, secondStr) {\n        var result = [\n            untruncateYear(yearStr),\n            defaultLocaleMonthsShort.indexOf(monthStr),\n            parseInt(dayStr, 10),\n            parseInt(hourStr, 10),\n            parseInt(minuteStr, 10)\n        ];\n\n        if (secondStr) {\n            result.push(parseInt(secondStr, 10));\n        }\n\n        return result;\n    }\n\n    function untruncateYear(yearStr) {\n        var year = parseInt(yearStr, 10);\n        if (year <= 49) {\n            return 2000 + year;\n        } else if (year <= 999) {\n            return 1900 + year;\n        }\n        return year;\n    }\n\n    function preprocessRFC2822(s) {\n        // Remove comments and folding whitespace and replace multiple-spaces with a single space\n        return s.replace(/\\([^)]*\\)|[\\n\\t]/g, ' ').replace(/(\\s\\s+)/g, ' ').replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n    }\n\n    function checkWeekday(weekdayStr, parsedInput, config) {\n        if (weekdayStr) {\n            // TODO: Replace the vanilla JS Date object with an indepentent day-of-week check.\n            var weekdayProvided = defaultLocaleWeekdaysShort.indexOf(weekdayStr),\n                weekdayActual = new Date(parsedInput[0], parsedInput[1], parsedInput[2]).getDay();\n            if (weekdayProvided !== weekdayActual) {\n                getParsingFlags(config).weekdayMismatch = true;\n                config._isValid = false;\n                return false;\n            }\n        }\n        return true;\n    }\n\n    var obsOffsets = {\n        UT: 0,\n        GMT: 0,\n        EDT: -4 * 60,\n        EST: -5 * 60,\n        CDT: -5 * 60,\n        CST: -6 * 60,\n        MDT: -6 * 60,\n        MST: -7 * 60,\n        PDT: -7 * 60,\n        PST: -8 * 60\n    };\n\n    function calculateOffset(obsOffset, militaryOffset, numOffset) {\n        if (obsOffset) {\n            return obsOffsets[obsOffset];\n        } else if (militaryOffset) {\n            // the only allowed military tz is Z\n            return 0;\n        } else {\n            var hm = parseInt(numOffset, 10);\n            var m = hm % 100, h = (hm - m) / 100;\n            return h * 60 + m;\n        }\n    }\n\n    // date and time from ref 2822 format\n    function configFromRFC2822(config) {\n        var match = rfc2822.exec(preprocessRFC2822(config._i));\n        if (match) {\n            var parsedArray = extractFromRFC2822Strings(match[4], match[3], match[2], match[5], match[6], match[7]);\n            if (!checkWeekday(match[1], parsedArray, config)) {\n                return;\n            }\n\n            config._a = parsedArray;\n            config._tzm = calculateOffset(match[8], match[9], match[10]);\n\n            config._d = createUTCDate.apply(null, config._a);\n            config._d.setUTCMinutes(config._d.getUTCMinutes() - config._tzm);\n\n            getParsingFlags(config).rfc2822 = true;\n        } else {\n            config._isValid = false;\n        }\n    }\n\n    // date from iso format or fallback\n    function configFromString(config) {\n        var matched = aspNetJsonRegex.exec(config._i);\n\n        if (matched !== null) {\n            config._d = new Date(+matched[1]);\n            return;\n        }\n\n        configFromISO(config);\n        if (config._isValid === false) {\n            delete config._isValid;\n        } else {\n            return;\n        }\n\n        configFromRFC2822(config);\n        if (config._isValid === false) {\n            delete config._isValid;\n        } else {\n            return;\n        }\n\n        // Final attempt, use Input Fallback\n        hooks.createFromInputFallback(config);\n    }\n\n    hooks.createFromInputFallback = deprecate(\n        'value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), ' +\n        'which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are ' +\n        'discouraged and will be removed in an upcoming major release. Please refer to ' +\n        'http://momentjs.com/guides/#/warnings/js-date/ for more info.',\n        function (config) {\n            config._d = new Date(config._i + (config._useUTC ? ' UTC' : ''));\n        }\n    );\n\n    // constant that refers to the ISO standard\n    hooks.ISO_8601 = function () {};\n\n    // constant that refers to the RFC 2822 form\n    hooks.RFC_2822 = function () {};\n\n    // date from string and format string\n    function configFromStringAndFormat(config) {\n        // TODO: Move this to another part of the creation flow to prevent circular deps\n        if (config._f === hooks.ISO_8601) {\n            configFromISO(config);\n            return;\n        }\n        if (config._f === hooks.RFC_2822) {\n            configFromRFC2822(config);\n            return;\n        }\n        config._a = [];\n        getParsingFlags(config).empty = true;\n\n        // This array is used to make a Date, either with `new Date` or `Date.UTC`\n        var string = '' + config._i,\n            i, parsedInput, tokens, token, skipped,\n            stringLength = string.length,\n            totalParsedInputLength = 0;\n\n        tokens = expandFormat(config._f, config._locale).match(formattingTokens) || [];\n\n        for (i = 0; i < tokens.length; i++) {\n            token = tokens[i];\n            parsedInput = (string.match(getParseRegexForToken(token, config)) || [])[0];\n            // console.log('token', token, 'parsedInput', parsedInput,\n            //         'regex', getParseRegexForToken(token, config));\n            if (parsedInput) {\n                skipped = string.substr(0, string.indexOf(parsedInput));\n                if (skipped.length > 0) {\n                    getParsingFlags(config).unusedInput.push(skipped);\n                }\n                string = string.slice(string.indexOf(parsedInput) + parsedInput.length);\n                totalParsedInputLength += parsedInput.length;\n            }\n            // don't parse if it's not a known token\n            if (formatTokenFunctions[token]) {\n                if (parsedInput) {\n                    getParsingFlags(config).empty = false;\n                }\n                else {\n                    getParsingFlags(config).unusedTokens.push(token);\n                }\n                addTimeToArrayFromToken(token, parsedInput, config);\n            }\n            else if (config._strict && !parsedInput) {\n                getParsingFlags(config).unusedTokens.push(token);\n            }\n        }\n\n        // add remaining unparsed input length to the string\n        getParsingFlags(config).charsLeftOver = stringLength - totalParsedInputLength;\n        if (string.length > 0) {\n            getParsingFlags(config).unusedInput.push(string);\n        }\n\n        // clear _12h flag if hour is <= 12\n        if (config._a[HOUR] <= 12 &&\n            getParsingFlags(config).bigHour === true &&\n            config._a[HOUR] > 0) {\n            getParsingFlags(config).bigHour = undefined;\n        }\n\n        getParsingFlags(config).parsedDateParts = config._a.slice(0);\n        getParsingFlags(config).meridiem = config._meridiem;\n        // handle meridiem\n        config._a[HOUR] = meridiemFixWrap(config._locale, config._a[HOUR], config._meridiem);\n\n        configFromArray(config);\n        checkOverflow(config);\n    }\n\n\n    function meridiemFixWrap (locale, hour, meridiem) {\n        var isPm;\n\n        if (meridiem == null) {\n            // nothing to do\n            return hour;\n        }\n        if (locale.meridiemHour != null) {\n            return locale.meridiemHour(hour, meridiem);\n        } else if (locale.isPM != null) {\n            // Fallback\n            isPm = locale.isPM(meridiem);\n            if (isPm && hour < 12) {\n                hour += 12;\n            }\n            if (!isPm && hour === 12) {\n                hour = 0;\n            }\n            return hour;\n        } else {\n            // this is not supposed to happen\n            return hour;\n        }\n    }\n\n    // date from string and array of format strings\n    function configFromStringAndArray(config) {\n        var tempConfig,\n            bestMoment,\n\n            scoreToBeat,\n            i,\n            currentScore;\n\n        if (config._f.length === 0) {\n            getParsingFlags(config).invalidFormat = true;\n            config._d = new Date(NaN);\n            return;\n        }\n\n        for (i = 0; i < config._f.length; i++) {\n            currentScore = 0;\n            tempConfig = copyConfig({}, config);\n            if (config._useUTC != null) {\n                tempConfig._useUTC = config._useUTC;\n            }\n            tempConfig._f = config._f[i];\n            configFromStringAndFormat(tempConfig);\n\n            if (!isValid(tempConfig)) {\n                continue;\n            }\n\n            // if there is any input that was not parsed add a penalty for that format\n            currentScore += getParsingFlags(tempConfig).charsLeftOver;\n\n            //or tokens\n            currentScore += getParsingFlags(tempConfig).unusedTokens.length * 10;\n\n            getParsingFlags(tempConfig).score = currentScore;\n\n            if (scoreToBeat == null || currentScore < scoreToBeat) {\n                scoreToBeat = currentScore;\n                bestMoment = tempConfig;\n            }\n        }\n\n        extend(config, bestMoment || tempConfig);\n    }\n\n    function configFromObject(config) {\n        if (config._d) {\n            return;\n        }\n\n        var i = normalizeObjectUnits(config._i);\n        config._a = map([i.year, i.month, i.day || i.date, i.hour, i.minute, i.second, i.millisecond], function (obj) {\n            return obj && parseInt(obj, 10);\n        });\n\n        configFromArray(config);\n    }\n\n    function createFromConfig (config) {\n        var res = new Moment(checkOverflow(prepareConfig(config)));\n        if (res._nextDay) {\n            // Adding is smart enough around DST\n            res.add(1, 'd');\n            res._nextDay = undefined;\n        }\n\n        return res;\n    }\n\n    function prepareConfig (config) {\n        var input = config._i,\n            format = config._f;\n\n        config._locale = config._locale || getLocale(config._l);\n\n        if (input === null || (format === undefined && input === '')) {\n            return createInvalid({nullInput: true});\n        }\n\n        if (typeof input === 'string') {\n            config._i = input = config._locale.preparse(input);\n        }\n\n        if (isMoment(input)) {\n            return new Moment(checkOverflow(input));\n        } else if (isDate(input)) {\n            config._d = input;\n        } else if (isArray(format)) {\n            configFromStringAndArray(config);\n        } else if (format) {\n            configFromStringAndFormat(config);\n        }  else {\n            configFromInput(config);\n        }\n\n        if (!isValid(config)) {\n            config._d = null;\n        }\n\n        return config;\n    }\n\n    function configFromInput(config) {\n        var input = config._i;\n        if (isUndefined(input)) {\n            config._d = new Date(hooks.now());\n        } else if (isDate(input)) {\n            config._d = new Date(input.valueOf());\n        } else if (typeof input === 'string') {\n            configFromString(config);\n        } else if (isArray(input)) {\n            config._a = map(input.slice(0), function (obj) {\n                return parseInt(obj, 10);\n            });\n            configFromArray(config);\n        } else if (isObject(input)) {\n            configFromObject(config);\n        } else if (isNumber(input)) {\n            // from milliseconds\n            config._d = new Date(input);\n        } else {\n            hooks.createFromInputFallback(config);\n        }\n    }\n\n    function createLocalOrUTC (input, format, locale, strict, isUTC) {\n        var c = {};\n\n        if (locale === true || locale === false) {\n            strict = locale;\n            locale = undefined;\n        }\n\n        if ((isObject(input) && isObjectEmpty(input)) ||\n                (isArray(input) && input.length === 0)) {\n            input = undefined;\n        }\n        // object construction must be done this way.\n        // https://github.com/moment/moment/issues/1423\n        c._isAMomentObject = true;\n        c._useUTC = c._isUTC = isUTC;\n        c._l = locale;\n        c._i = input;\n        c._f = format;\n        c._strict = strict;\n\n        return createFromConfig(c);\n    }\n\n    function createLocal (input, format, locale, strict) {\n        return createLocalOrUTC(input, format, locale, strict, false);\n    }\n\n    var prototypeMin = deprecate(\n        'moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/',\n        function () {\n            var other = createLocal.apply(null, arguments);\n            if (this.isValid() && other.isValid()) {\n                return other < this ? this : other;\n            } else {\n                return createInvalid();\n            }\n        }\n    );\n\n    var prototypeMax = deprecate(\n        'moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/',\n        function () {\n            var other = createLocal.apply(null, arguments);\n            if (this.isValid() && other.isValid()) {\n                return other > this ? this : other;\n            } else {\n                return createInvalid();\n            }\n        }\n    );\n\n    // Pick a moment m from moments so that m[fn](other) is true for all\n    // other. This relies on the function fn to be transitive.\n    //\n    // moments should either be an array of moment objects or an array, whose\n    // first element is an array of moment objects.\n    function pickBy(fn, moments) {\n        var res, i;\n        if (moments.length === 1 && isArray(moments[0])) {\n            moments = moments[0];\n        }\n        if (!moments.length) {\n            return createLocal();\n        }\n        res = moments[0];\n        for (i = 1; i < moments.length; ++i) {\n            if (!moments[i].isValid() || moments[i][fn](res)) {\n                res = moments[i];\n            }\n        }\n        return res;\n    }\n\n    // TODO: Use [].sort instead?\n    function min () {\n        var args = [].slice.call(arguments, 0);\n\n        return pickBy('isBefore', args);\n    }\n\n    function max () {\n        var args = [].slice.call(arguments, 0);\n\n        return pickBy('isAfter', args);\n    }\n\n    var now = function () {\n        return Date.now ? Date.now() : +(new Date());\n    };\n\n    var ordering = ['year', 'quarter', 'month', 'week', 'day', 'hour', 'minute', 'second', 'millisecond'];\n\n    function isDurationValid(m) {\n        for (var key in m) {\n            if (!(indexOf.call(ordering, key) !== -1 && (m[key] == null || !isNaN(m[key])))) {\n                return false;\n            }\n        }\n\n        var unitHasDecimal = false;\n        for (var i = 0; i < ordering.length; ++i) {\n            if (m[ordering[i]]) {\n                if (unitHasDecimal) {\n                    return false; // only allow non-integers for smallest unit\n                }\n                if (parseFloat(m[ordering[i]]) !== toInt(m[ordering[i]])) {\n                    unitHasDecimal = true;\n                }\n            }\n        }\n\n        return true;\n    }\n\n    function isValid$1() {\n        return this._isValid;\n    }\n\n    function createInvalid$1() {\n        return createDuration(NaN);\n    }\n\n    function Duration (duration) {\n        var normalizedInput = normalizeObjectUnits(duration),\n            years = normalizedInput.year || 0,\n            quarters = normalizedInput.quarter || 0,\n            months = normalizedInput.month || 0,\n            weeks = normalizedInput.week || 0,\n            days = normalizedInput.day || 0,\n            hours = normalizedInput.hour || 0,\n            minutes = normalizedInput.minute || 0,\n            seconds = normalizedInput.second || 0,\n            milliseconds = normalizedInput.millisecond || 0;\n\n        this._isValid = isDurationValid(normalizedInput);\n\n        // representation for dateAddRemove\n        this._milliseconds = +milliseconds +\n            seconds * 1e3 + // 1000\n            minutes * 6e4 + // 1000 * 60\n            hours * 1000 * 60 * 60; //using 1000 * 60 * 60 instead of 36e5 to avoid floating point rounding errors https://github.com/moment/moment/issues/2978\n        // Because of dateAddRemove treats 24 hours as different from a\n        // day when working around DST, we need to store them separately\n        this._days = +days +\n            weeks * 7;\n        // It is impossible to translate months into days without knowing\n        // which months you are are talking about, so we have to store\n        // it separately.\n        this._months = +months +\n            quarters * 3 +\n            years * 12;\n\n        this._data = {};\n\n        this._locale = getLocale();\n\n        this._bubble();\n    }\n\n    function isDuration (obj) {\n        return obj instanceof Duration;\n    }\n\n    function absRound (number) {\n        if (number < 0) {\n            return Math.round(-1 * number) * -1;\n        } else {\n            return Math.round(number);\n        }\n    }\n\n    // FORMATTING\n\n    function offset (token, separator) {\n        addFormatToken(token, 0, 0, function () {\n            var offset = this.utcOffset();\n            var sign = '+';\n            if (offset < 0) {\n                offset = -offset;\n                sign = '-';\n            }\n            return sign + zeroFill(~~(offset / 60), 2) + separator + zeroFill(~~(offset) % 60, 2);\n        });\n    }\n\n    offset('Z', ':');\n    offset('ZZ', '');\n\n    // PARSING\n\n    addRegexToken('Z',  matchShortOffset);\n    addRegexToken('ZZ', matchShortOffset);\n    addParseToken(['Z', 'ZZ'], function (input, array, config) {\n        config._useUTC = true;\n        config._tzm = offsetFromString(matchShortOffset, input);\n    });\n\n    // HELPERS\n\n    // timezone chunker\n    // '+10:00' > ['10',  '00']\n    // '-1530'  > ['-15', '30']\n    var chunkOffset = /([\\+\\-]|\\d\\d)/gi;\n\n    function offsetFromString(matcher, string) {\n        var matches = (string || '').match(matcher);\n\n        if (matches === null) {\n            return null;\n        }\n\n        var chunk   = matches[matches.length - 1] || [];\n        var parts   = (chunk + '').match(chunkOffset) || ['-', 0, 0];\n        var minutes = +(parts[1] * 60) + toInt(parts[2]);\n\n        return minutes === 0 ?\n          0 :\n          parts[0] === '+' ? minutes : -minutes;\n    }\n\n    // Return a moment from input, that is local/utc/zone equivalent to model.\n    function cloneWithOffset(input, model) {\n        var res, diff;\n        if (model._isUTC) {\n            res = model.clone();\n            diff = (isMoment(input) || isDate(input) ? input.valueOf() : createLocal(input).valueOf()) - res.valueOf();\n            // Use low-level api, because this fn is low-level api.\n            res._d.setTime(res._d.valueOf() + diff);\n            hooks.updateOffset(res, false);\n            return res;\n        } else {\n            return createLocal(input).local();\n        }\n    }\n\n    function getDateOffset (m) {\n        // On Firefox.24 Date#getTimezoneOffset returns a floating point.\n        // https://github.com/moment/moment/pull/1871\n        return -Math.round(m._d.getTimezoneOffset() / 15) * 15;\n    }\n\n    // HOOKS\n\n    // This function will be called whenever a moment is mutated.\n    // It is intended to keep the offset in sync with the timezone.\n    hooks.updateOffset = function () {};\n\n    // MOMENTS\n\n    // keepLocalTime = true means only change the timezone, without\n    // affecting the local hour. So 5:31:26 +0300 --[utcOffset(2, true)]-->\n    // 5:31:26 +0200 It is possible that 5:31:26 doesn't exist with offset\n    // +0200, so we adjust the time as needed, to be valid.\n    //\n    // Keeping the time actually adds/subtracts (one hour)\n    // from the actual represented time. That is why we call updateOffset\n    // a second time. In case it wants us to change the offset again\n    // _changeInProgress == true case, then we have to adjust, because\n    // there is no such time in the given timezone.\n    function getSetOffset (input, keepLocalTime, keepMinutes) {\n        var offset = this._offset || 0,\n            localAdjust;\n        if (!this.isValid()) {\n            return input != null ? this : NaN;\n        }\n        if (input != null) {\n            if (typeof input === 'string') {\n                input = offsetFromString(matchShortOffset, input);\n                if (input === null) {\n                    return this;\n                }\n            } else if (Math.abs(input) < 16 && !keepMinutes) {\n                input = input * 60;\n            }\n            if (!this._isUTC && keepLocalTime) {\n                localAdjust = getDateOffset(this);\n            }\n            this._offset = input;\n            this._isUTC = true;\n            if (localAdjust != null) {\n                this.add(localAdjust, 'm');\n            }\n            if (offset !== input) {\n                if (!keepLocalTime || this._changeInProgress) {\n                    addSubtract(this, createDuration(input - offset, 'm'), 1, false);\n                } else if (!this._changeInProgress) {\n                    this._changeInProgress = true;\n                    hooks.updateOffset(this, true);\n                    this._changeInProgress = null;\n                }\n            }\n            return this;\n        } else {\n            return this._isUTC ? offset : getDateOffset(this);\n        }\n    }\n\n    function getSetZone (input, keepLocalTime) {\n        if (input != null) {\n            if (typeof input !== 'string') {\n                input = -input;\n            }\n\n            this.utcOffset(input, keepLocalTime);\n\n            return this;\n        } else {\n            return -this.utcOffset();\n        }\n    }\n\n    function setOffsetToUTC (keepLocalTime) {\n        return this.utcOffset(0, keepLocalTime);\n    }\n\n    function setOffsetToLocal (keepLocalTime) {\n        if (this._isUTC) {\n            this.utcOffset(0, keepLocalTime);\n            this._isUTC = false;\n\n            if (keepLocalTime) {\n                this.subtract(getDateOffset(this), 'm');\n            }\n        }\n        return this;\n    }\n\n    function setOffsetToParsedOffset () {\n        if (this._tzm != null) {\n            this.utcOffset(this._tzm, false, true);\n        } else if (typeof this._i === 'string') {\n            var tZone = offsetFromString(matchOffset, this._i);\n            if (tZone != null) {\n                this.utcOffset(tZone);\n            }\n            else {\n                this.utcOffset(0, true);\n            }\n        }\n        return this;\n    }\n\n    function hasAlignedHourOffset (input) {\n        if (!this.isValid()) {\n            return false;\n        }\n        input = input ? createLocal(input).utcOffset() : 0;\n\n        return (this.utcOffset() - input) % 60 === 0;\n    }\n\n    function isDaylightSavingTime () {\n        return (\n            this.utcOffset() > this.clone().month(0).utcOffset() ||\n            this.utcOffset() > this.clone().month(5).utcOffset()\n        );\n    }\n\n    function isDaylightSavingTimeShifted () {\n        if (!isUndefined(this._isDSTShifted)) {\n            return this._isDSTShifted;\n        }\n\n        var c = {};\n\n        copyConfig(c, this);\n        c = prepareConfig(c);\n\n        if (c._a) {\n            var other = c._isUTC ? createUTC(c._a) : createLocal(c._a);\n            this._isDSTShifted = this.isValid() &&\n                compareArrays(c._a, other.toArray()) > 0;\n        } else {\n            this._isDSTShifted = false;\n        }\n\n        return this._isDSTShifted;\n    }\n\n    function isLocal () {\n        return this.isValid() ? !this._isUTC : false;\n    }\n\n    function isUtcOffset () {\n        return this.isValid() ? this._isUTC : false;\n    }\n\n    function isUtc () {\n        return this.isValid() ? this._isUTC && this._offset === 0 : false;\n    }\n\n    // ASP.NET json date format regex\n    var aspNetRegex = /^(\\-|\\+)?(?:(\\d*)[. ])?(\\d+)\\:(\\d+)(?:\\:(\\d+)(\\.\\d*)?)?$/;\n\n    // from http://docs.closure-library.googlecode.com/git/closure_goog_date_date.js.source.html\n    // somewhat more in line with 4.4.3.2 2004 spec, but allows decimal anywhere\n    // and further modified to allow for strings containing both week and day\n    var isoRegex = /^(-|\\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;\n\n    function createDuration (input, key) {\n        var duration = input,\n            // matching against regexp is expensive, do it on demand\n            match = null,\n            sign,\n            ret,\n            diffRes;\n\n        if (isDuration(input)) {\n            duration = {\n                ms : input._milliseconds,\n                d  : input._days,\n                M  : input._months\n            };\n        } else if (isNumber(input)) {\n            duration = {};\n            if (key) {\n                duration[key] = input;\n            } else {\n                duration.milliseconds = input;\n            }\n        } else if (!!(match = aspNetRegex.exec(input))) {\n            sign = (match[1] === '-') ? -1 : 1;\n            duration = {\n                y  : 0,\n                d  : toInt(match[DATE])                         * sign,\n                h  : toInt(match[HOUR])                         * sign,\n                m  : toInt(match[MINUTE])                       * sign,\n                s  : toInt(match[SECOND])                       * sign,\n                ms : toInt(absRound(match[MILLISECOND] * 1000)) * sign // the millisecond decimal point is included in the match\n            };\n        } else if (!!(match = isoRegex.exec(input))) {\n            sign = (match[1] === '-') ? -1 : (match[1] === '+') ? 1 : 1;\n            duration = {\n                y : parseIso(match[2], sign),\n                M : parseIso(match[3], sign),\n                w : parseIso(match[4], sign),\n                d : parseIso(match[5], sign),\n                h : parseIso(match[6], sign),\n                m : parseIso(match[7], sign),\n                s : parseIso(match[8], sign)\n            };\n        } else if (duration == null) {// checks for null or undefined\n            duration = {};\n        } else if (typeof duration === 'object' && ('from' in duration || 'to' in duration)) {\n            diffRes = momentsDifference(createLocal(duration.from), createLocal(duration.to));\n\n            duration = {};\n            duration.ms = diffRes.milliseconds;\n            duration.M = diffRes.months;\n        }\n\n        ret = new Duration(duration);\n\n        if (isDuration(input) && hasOwnProp(input, '_locale')) {\n            ret._locale = input._locale;\n        }\n\n        return ret;\n    }\n\n    createDuration.fn = Duration.prototype;\n    createDuration.invalid = createInvalid$1;\n\n    function parseIso (inp, sign) {\n        // We'd normally use ~~inp for this, but unfortunately it also\n        // converts floats to ints.\n        // inp may be undefined, so careful calling replace on it.\n        var res = inp && parseFloat(inp.replace(',', '.'));\n        // apply sign while we're at it\n        return (isNaN(res) ? 0 : res) * sign;\n    }\n\n    function positiveMomentsDifference(base, other) {\n        var res = {milliseconds: 0, months: 0};\n\n        res.months = other.month() - base.month() +\n            (other.year() - base.year()) * 12;\n        if (base.clone().add(res.months, 'M').isAfter(other)) {\n            --res.months;\n        }\n\n        res.milliseconds = +other - +(base.clone().add(res.months, 'M'));\n\n        return res;\n    }\n\n    function momentsDifference(base, other) {\n        var res;\n        if (!(base.isValid() && other.isValid())) {\n            return {milliseconds: 0, months: 0};\n        }\n\n        other = cloneWithOffset(other, base);\n        if (base.isBefore(other)) {\n            res = positiveMomentsDifference(base, other);\n        } else {\n            res = positiveMomentsDifference(other, base);\n            res.milliseconds = -res.milliseconds;\n            res.months = -res.months;\n        }\n\n        return res;\n    }\n\n    // TODO: remove 'name' arg after deprecation is removed\n    function createAdder(direction, name) {\n        return function (val, period) {\n            var dur, tmp;\n            //invert the arguments, but complain about it\n            if (period !== null && !isNaN(+period)) {\n                deprecateSimple(name, 'moment().' + name  + '(period, number) is deprecated. Please use moment().' + name + '(number, period). ' +\n                'See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.');\n                tmp = val; val = period; period = tmp;\n            }\n\n            val = typeof val === 'string' ? +val : val;\n            dur = createDuration(val, period);\n            addSubtract(this, dur, direction);\n            return this;\n        };\n    }\n\n    function addSubtract (mom, duration, isAdding, updateOffset) {\n        var milliseconds = duration._milliseconds,\n            days = absRound(duration._days),\n            months = absRound(duration._months);\n\n        if (!mom.isValid()) {\n            // No op\n            return;\n        }\n\n        updateOffset = updateOffset == null ? true : updateOffset;\n\n        if (months) {\n            setMonth(mom, get(mom, 'Month') + months * isAdding);\n        }\n        if (days) {\n            set$1(mom, 'Date', get(mom, 'Date') + days * isAdding);\n        }\n        if (milliseconds) {\n            mom._d.setTime(mom._d.valueOf() + milliseconds * isAdding);\n        }\n        if (updateOffset) {\n            hooks.updateOffset(mom, days || months);\n        }\n    }\n\n    var add      = createAdder(1, 'add');\n    var subtract = createAdder(-1, 'subtract');\n\n    function getCalendarFormat(myMoment, now) {\n        var diff = myMoment.diff(now, 'days', true);\n        return diff < -6 ? 'sameElse' :\n                diff < -1 ? 'lastWeek' :\n                diff < 0 ? 'lastDay' :\n                diff < 1 ? 'sameDay' :\n                diff < 2 ? 'nextDay' :\n                diff < 7 ? 'nextWeek' : 'sameElse';\n    }\n\n    function calendar$1 (time, formats) {\n        // We want to compare the start of today, vs this.\n        // Getting start-of-today depends on whether we're local/utc/offset or not.\n        var now = time || createLocal(),\n            sod = cloneWithOffset(now, this).startOf('day'),\n            format = hooks.calendarFormat(this, sod) || 'sameElse';\n\n        var output = formats && (isFunction(formats[format]) ? formats[format].call(this, now) : formats[format]);\n\n        return this.format(output || this.localeData().calendar(format, this, createLocal(now)));\n    }\n\n    function clone () {\n        return new Moment(this);\n    }\n\n    function isAfter (input, units) {\n        var localInput = isMoment(input) ? input : createLocal(input);\n        if (!(this.isValid() && localInput.isValid())) {\n            return false;\n        }\n        units = normalizeUnits(!isUndefined(units) ? units : 'millisecond');\n        if (units === 'millisecond') {\n            return this.valueOf() > localInput.valueOf();\n        } else {\n            return localInput.valueOf() < this.clone().startOf(units).valueOf();\n        }\n    }\n\n    function isBefore (input, units) {\n        var localInput = isMoment(input) ? input : createLocal(input);\n        if (!(this.isValid() && localInput.isValid())) {\n            return false;\n        }\n        units = normalizeUnits(!isUndefined(units) ? units : 'millisecond');\n        if (units === 'millisecond') {\n            return this.valueOf() < localInput.valueOf();\n        } else {\n            return this.clone().endOf(units).valueOf() < localInput.valueOf();\n        }\n    }\n\n    function isBetween (from, to, units, inclusivity) {\n        inclusivity = inclusivity || '()';\n        return (inclusivity[0] === '(' ? this.isAfter(from, units) : !this.isBefore(from, units)) &&\n            (inclusivity[1] === ')' ? this.isBefore(to, units) : !this.isAfter(to, units));\n    }\n\n    function isSame (input, units) {\n        var localInput = isMoment(input) ? input : createLocal(input),\n            inputMs;\n        if (!(this.isValid() && localInput.isValid())) {\n            return false;\n        }\n        units = normalizeUnits(units || 'millisecond');\n        if (units === 'millisecond') {\n            return this.valueOf() === localInput.valueOf();\n        } else {\n            inputMs = localInput.valueOf();\n            return this.clone().startOf(units).valueOf() <= inputMs && inputMs <= this.clone().endOf(units).valueOf();\n        }\n    }\n\n    function isSameOrAfter (input, units) {\n        return this.isSame(input, units) || this.isAfter(input,units);\n    }\n\n    function isSameOrBefore (input, units) {\n        return this.isSame(input, units) || this.isBefore(input,units);\n    }\n\n    function diff (input, units, asFloat) {\n        var that,\n            zoneDelta,\n            output;\n\n        if (!this.isValid()) {\n            return NaN;\n        }\n\n        that = cloneWithOffset(input, this);\n\n        if (!that.isValid()) {\n            return NaN;\n        }\n\n        zoneDelta = (that.utcOffset() - this.utcOffset()) * 6e4;\n\n        units = normalizeUnits(units);\n\n        switch (units) {\n            case 'year': output = monthDiff(this, that) / 12; break;\n            case 'month': output = monthDiff(this, that); break;\n            case 'quarter': output = monthDiff(this, that) / 3; break;\n            case 'second': output = (this - that) / 1e3; break; // 1000\n            case 'minute': output = (this - that) / 6e4; break; // 1000 * 60\n            case 'hour': output = (this - that) / 36e5; break; // 1000 * 60 * 60\n            case 'day': output = (this - that - zoneDelta) / 864e5; break; // 1000 * 60 * 60 * 24, negate dst\n            case 'week': output = (this - that - zoneDelta) / 6048e5; break; // 1000 * 60 * 60 * 24 * 7, negate dst\n            default: output = this - that;\n        }\n\n        return asFloat ? output : absFloor(output);\n    }\n\n    function monthDiff (a, b) {\n        // difference in months\n        var wholeMonthDiff = ((b.year() - a.year()) * 12) + (b.month() - a.month()),\n            // b is in (anchor - 1 month, anchor + 1 month)\n            anchor = a.clone().add(wholeMonthDiff, 'months'),\n            anchor2, adjust;\n\n        if (b - anchor < 0) {\n            anchor2 = a.clone().add(wholeMonthDiff - 1, 'months');\n            // linear across the month\n            adjust = (b - anchor) / (anchor - anchor2);\n        } else {\n            anchor2 = a.clone().add(wholeMonthDiff + 1, 'months');\n            // linear across the month\n            adjust = (b - anchor) / (anchor2 - anchor);\n        }\n\n        //check for negative zero, return zero if negative zero\n        return -(wholeMonthDiff + adjust) || 0;\n    }\n\n    hooks.defaultFormat = 'YYYY-MM-DDTHH:mm:ssZ';\n    hooks.defaultFormatUtc = 'YYYY-MM-DDTHH:mm:ss[Z]';\n\n    function toString () {\n        return this.clone().locale('en').format('ddd MMM DD YYYY HH:mm:ss [GMT]ZZ');\n    }\n\n    function toISOString(keepOffset) {\n        if (!this.isValid()) {\n            return null;\n        }\n        var utc = keepOffset !== true;\n        var m = utc ? this.clone().utc() : this;\n        if (m.year() < 0 || m.year() > 9999) {\n            return formatMoment(m, utc ? 'YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]' : 'YYYYYY-MM-DD[T]HH:mm:ss.SSSZ');\n        }\n        if (isFunction(Date.prototype.toISOString)) {\n            // native implementation is ~50x faster, use it when we can\n            if (utc) {\n                return this.toDate().toISOString();\n            } else {\n                return new Date(this.valueOf() + this.utcOffset() * 60 * 1000).toISOString().replace('Z', formatMoment(m, 'Z'));\n            }\n        }\n        return formatMoment(m, utc ? 'YYYY-MM-DD[T]HH:mm:ss.SSS[Z]' : 'YYYY-MM-DD[T]HH:mm:ss.SSSZ');\n    }\n\n    /**\n     * Return a human readable representation of a moment that can\n     * also be evaluated to get a new moment which is the same\n     *\n     * @link https://nodejs.org/dist/latest/docs/api/util.html#util_custom_inspect_function_on_objects\n     */\n    function inspect () {\n        if (!this.isValid()) {\n            return 'moment.invalid(/* ' + this._i + ' */)';\n        }\n        var func = 'moment';\n        var zone = '';\n        if (!this.isLocal()) {\n            func = this.utcOffset() === 0 ? 'moment.utc' : 'moment.parseZone';\n            zone = 'Z';\n        }\n        var prefix = '[' + func + '(\"]';\n        var year = (0 <= this.year() && this.year() <= 9999) ? 'YYYY' : 'YYYYYY';\n        var datetime = '-MM-DD[T]HH:mm:ss.SSS';\n        var suffix = zone + '[\")]';\n\n        return this.format(prefix + year + datetime + suffix);\n    }\n\n    function format (inputString) {\n        if (!inputString) {\n            inputString = this.isUtc() ? hooks.defaultFormatUtc : hooks.defaultFormat;\n        }\n        var output = formatMoment(this, inputString);\n        return this.localeData().postformat(output);\n    }\n\n    function from (time, withoutSuffix) {\n        if (this.isValid() &&\n                ((isMoment(time) && time.isValid()) ||\n                 createLocal(time).isValid())) {\n            return createDuration({to: this, from: time}).locale(this.locale()).humanize(!withoutSuffix);\n        } else {\n            return this.localeData().invalidDate();\n        }\n    }\n\n    function fromNow (withoutSuffix) {\n        return this.from(createLocal(), withoutSuffix);\n    }\n\n    function to (time, withoutSuffix) {\n        if (this.isValid() &&\n                ((isMoment(time) && time.isValid()) ||\n                 createLocal(time).isValid())) {\n            return createDuration({from: this, to: time}).locale(this.locale()).humanize(!withoutSuffix);\n        } else {\n            return this.localeData().invalidDate();\n        }\n    }\n\n    function toNow (withoutSuffix) {\n        return this.to(createLocal(), withoutSuffix);\n    }\n\n    // If passed a locale key, it will set the locale for this\n    // instance.  Otherwise, it will return the locale configuration\n    // variables for this instance.\n    function locale (key) {\n        var newLocaleData;\n\n        if (key === undefined) {\n            return this._locale._abbr;\n        } else {\n            newLocaleData = getLocale(key);\n            if (newLocaleData != null) {\n                this._locale = newLocaleData;\n            }\n            return this;\n        }\n    }\n\n    var lang = deprecate(\n        'moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.',\n        function (key) {\n            if (key === undefined) {\n                return this.localeData();\n            } else {\n                return this.locale(key);\n            }\n        }\n    );\n\n    function localeData () {\n        return this._locale;\n    }\n\n    function startOf (units) {\n        units = normalizeUnits(units);\n        // the following switch intentionally omits break keywords\n        // to utilize falling through the cases.\n        switch (units) {\n            case 'year':\n                this.month(0);\n                /* falls through */\n            case 'quarter':\n            case 'month':\n                this.date(1);\n                /* falls through */\n            case 'week':\n            case 'isoWeek':\n            case 'day':\n            case 'date':\n                this.hours(0);\n                /* falls through */\n            case 'hour':\n                this.minutes(0);\n                /* falls through */\n            case 'minute':\n                this.seconds(0);\n                /* falls through */\n            case 'second':\n                this.milliseconds(0);\n        }\n\n        // weeks are a special case\n        if (units === 'week') {\n            this.weekday(0);\n        }\n        if (units === 'isoWeek') {\n            this.isoWeekday(1);\n        }\n\n        // quarters are also special\n        if (units === 'quarter') {\n            this.month(Math.floor(this.month() / 3) * 3);\n        }\n\n        return this;\n    }\n\n    function endOf (units) {\n        units = normalizeUnits(units);\n        if (units === undefined || units === 'millisecond') {\n            return this;\n        }\n\n        // 'date' is an alias for 'day', so it should be considered as such.\n        if (units === 'date') {\n            units = 'day';\n        }\n\n        return this.startOf(units).add(1, (units === 'isoWeek' ? 'week' : units)).subtract(1, 'ms');\n    }\n\n    function valueOf () {\n        return this._d.valueOf() - ((this._offset || 0) * 60000);\n    }\n\n    function unix () {\n        return Math.floor(this.valueOf() / 1000);\n    }\n\n    function toDate () {\n        return new Date(this.valueOf());\n    }\n\n    function toArray () {\n        var m = this;\n        return [m.year(), m.month(), m.date(), m.hour(), m.minute(), m.second(), m.millisecond()];\n    }\n\n    function toObject () {\n        var m = this;\n        return {\n            years: m.year(),\n            months: m.month(),\n            date: m.date(),\n            hours: m.hours(),\n            minutes: m.minutes(),\n            seconds: m.seconds(),\n            milliseconds: m.milliseconds()\n        };\n    }\n\n    function toJSON () {\n        // new Date(NaN).toJSON() === null\n        return this.isValid() ? this.toISOString() : null;\n    }\n\n    function isValid$2 () {\n        return isValid(this);\n    }\n\n    function parsingFlags () {\n        return extend({}, getParsingFlags(this));\n    }\n\n    function invalidAt () {\n        return getParsingFlags(this).overflow;\n    }\n\n    function creationData() {\n        return {\n            input: this._i,\n            format: this._f,\n            locale: this._locale,\n            isUTC: this._isUTC,\n            strict: this._strict\n        };\n    }\n\n    // FORMATTING\n\n    addFormatToken(0, ['gg', 2], 0, function () {\n        return this.weekYear() % 100;\n    });\n\n    addFormatToken(0, ['GG', 2], 0, function () {\n        return this.isoWeekYear() % 100;\n    });\n\n    function addWeekYearFormatToken (token, getter) {\n        addFormatToken(0, [token, token.length], 0, getter);\n    }\n\n    addWeekYearFormatToken('gggg',     'weekYear');\n    addWeekYearFormatToken('ggggg',    'weekYear');\n    addWeekYearFormatToken('GGGG',  'isoWeekYear');\n    addWeekYearFormatToken('GGGGG', 'isoWeekYear');\n\n    // ALIASES\n\n    addUnitAlias('weekYear', 'gg');\n    addUnitAlias('isoWeekYear', 'GG');\n\n    // PRIORITY\n\n    addUnitPriority('weekYear', 1);\n    addUnitPriority('isoWeekYear', 1);\n\n\n    // PARSING\n\n    addRegexToken('G',      matchSigned);\n    addRegexToken('g',      matchSigned);\n    addRegexToken('GG',     match1to2, match2);\n    addRegexToken('gg',     match1to2, match2);\n    addRegexToken('GGGG',   match1to4, match4);\n    addRegexToken('gggg',   match1to4, match4);\n    addRegexToken('GGGGG',  match1to6, match6);\n    addRegexToken('ggggg',  match1to6, match6);\n\n    addWeekParseToken(['gggg', 'ggggg', 'GGGG', 'GGGGG'], function (input, week, config, token) {\n        week[token.substr(0, 2)] = toInt(input);\n    });\n\n    addWeekParseToken(['gg', 'GG'], function (input, week, config, token) {\n        week[token] = hooks.parseTwoDigitYear(input);\n    });\n\n    // MOMENTS\n\n    function getSetWeekYear (input) {\n        return getSetWeekYearHelper.call(this,\n                input,\n                this.week(),\n                this.weekday(),\n                this.localeData()._week.dow,\n                this.localeData()._week.doy);\n    }\n\n    function getSetISOWeekYear (input) {\n        return getSetWeekYearHelper.call(this,\n                input, this.isoWeek(), this.isoWeekday(), 1, 4);\n    }\n\n    function getISOWeeksInYear () {\n        return weeksInYear(this.year(), 1, 4);\n    }\n\n    function getWeeksInYear () {\n        var weekInfo = this.localeData()._week;\n        return weeksInYear(this.year(), weekInfo.dow, weekInfo.doy);\n    }\n\n    function getSetWeekYearHelper(input, week, weekday, dow, doy) {\n        var weeksTarget;\n        if (input == null) {\n            return weekOfYear(this, dow, doy).year;\n        } else {\n            weeksTarget = weeksInYear(input, dow, doy);\n            if (week > weeksTarget) {\n                week = weeksTarget;\n            }\n            return setWeekAll.call(this, input, week, weekday, dow, doy);\n        }\n    }\n\n    function setWeekAll(weekYear, week, weekday, dow, doy) {\n        var dayOfYearData = dayOfYearFromWeeks(weekYear, week, weekday, dow, doy),\n            date = createUTCDate(dayOfYearData.year, 0, dayOfYearData.dayOfYear);\n\n        this.year(date.getUTCFullYear());\n        this.month(date.getUTCMonth());\n        this.date(date.getUTCDate());\n        return this;\n    }\n\n    // FORMATTING\n\n    addFormatToken('Q', 0, 'Qo', 'quarter');\n\n    // ALIASES\n\n    addUnitAlias('quarter', 'Q');\n\n    // PRIORITY\n\n    addUnitPriority('quarter', 7);\n\n    // PARSING\n\n    addRegexToken('Q', match1);\n    addParseToken('Q', function (input, array) {\n        array[MONTH] = (toInt(input) - 1) * 3;\n    });\n\n    // MOMENTS\n\n    function getSetQuarter (input) {\n        return input == null ? Math.ceil((this.month() + 1) / 3) : this.month((input - 1) * 3 + this.month() % 3);\n    }\n\n    // FORMATTING\n\n    addFormatToken('D', ['DD', 2], 'Do', 'date');\n\n    // ALIASES\n\n    addUnitAlias('date', 'D');\n\n    // PRIORITY\n    addUnitPriority('date', 9);\n\n    // PARSING\n\n    addRegexToken('D',  match1to2);\n    addRegexToken('DD', match1to2, match2);\n    addRegexToken('Do', function (isStrict, locale) {\n        // TODO: Remove \"ordinalParse\" fallback in next major release.\n        return isStrict ?\n          (locale._dayOfMonthOrdinalParse || locale._ordinalParse) :\n          locale._dayOfMonthOrdinalParseLenient;\n    });\n\n    addParseToken(['D', 'DD'], DATE);\n    addParseToken('Do', function (input, array) {\n        array[DATE] = toInt(input.match(match1to2)[0]);\n    });\n\n    // MOMENTS\n\n    var getSetDayOfMonth = makeGetSet('Date', true);\n\n    // FORMATTING\n\n    addFormatToken('DDD', ['DDDD', 3], 'DDDo', 'dayOfYear');\n\n    // ALIASES\n\n    addUnitAlias('dayOfYear', 'DDD');\n\n    // PRIORITY\n    addUnitPriority('dayOfYear', 4);\n\n    // PARSING\n\n    addRegexToken('DDD',  match1to3);\n    addRegexToken('DDDD', match3);\n    addParseToken(['DDD', 'DDDD'], function (input, array, config) {\n        config._dayOfYear = toInt(input);\n    });\n\n    // HELPERS\n\n    // MOMENTS\n\n    function getSetDayOfYear (input) {\n        var dayOfYear = Math.round((this.clone().startOf('day') - this.clone().startOf('year')) / 864e5) + 1;\n        return input == null ? dayOfYear : this.add((input - dayOfYear), 'd');\n    }\n\n    // FORMATTING\n\n    addFormatToken('m', ['mm', 2], 0, 'minute');\n\n    // ALIASES\n\n    addUnitAlias('minute', 'm');\n\n    // PRIORITY\n\n    addUnitPriority('minute', 14);\n\n    // PARSING\n\n    addRegexToken('m',  match1to2);\n    addRegexToken('mm', match1to2, match2);\n    addParseToken(['m', 'mm'], MINUTE);\n\n    // MOMENTS\n\n    var getSetMinute = makeGetSet('Minutes', false);\n\n    // FORMATTING\n\n    addFormatToken('s', ['ss', 2], 0, 'second');\n\n    // ALIASES\n\n    addUnitAlias('second', 's');\n\n    // PRIORITY\n\n    addUnitPriority('second', 15);\n\n    // PARSING\n\n    addRegexToken('s',  match1to2);\n    addRegexToken('ss', match1to2, match2);\n    addParseToken(['s', 'ss'], SECOND);\n\n    // MOMENTS\n\n    var getSetSecond = makeGetSet('Seconds', false);\n\n    // FORMATTING\n\n    addFormatToken('S', 0, 0, function () {\n        return ~~(this.millisecond() / 100);\n    });\n\n    addFormatToken(0, ['SS', 2], 0, function () {\n        return ~~(this.millisecond() / 10);\n    });\n\n    addFormatToken(0, ['SSS', 3], 0, 'millisecond');\n    addFormatToken(0, ['SSSS', 4], 0, function () {\n        return this.millisecond() * 10;\n    });\n    addFormatToken(0, ['SSSSS', 5], 0, function () {\n        return this.millisecond() * 100;\n    });\n    addFormatToken(0, ['SSSSSS', 6], 0, function () {\n        return this.millisecond() * 1000;\n    });\n    addFormatToken(0, ['SSSSSSS', 7], 0, function () {\n        return this.millisecond() * 10000;\n    });\n    addFormatToken(0, ['SSSSSSSS', 8], 0, function () {\n        return this.millisecond() * 100000;\n    });\n    addFormatToken(0, ['SSSSSSSSS', 9], 0, function () {\n        return this.millisecond() * 1000000;\n    });\n\n\n    // ALIASES\n\n    addUnitAlias('millisecond', 'ms');\n\n    // PRIORITY\n\n    addUnitPriority('millisecond', 16);\n\n    // PARSING\n\n    addRegexToken('S',    match1to3, match1);\n    addRegexToken('SS',   match1to3, match2);\n    addRegexToken('SSS',  match1to3, match3);\n\n    var token;\n    for (token = 'SSSS'; token.length <= 9; token += 'S') {\n        addRegexToken(token, matchUnsigned);\n    }\n\n    function parseMs(input, array) {\n        array[MILLISECOND] = toInt(('0.' + input) * 1000);\n    }\n\n    for (token = 'S'; token.length <= 9; token += 'S') {\n        addParseToken(token, parseMs);\n    }\n    // MOMENTS\n\n    var getSetMillisecond = makeGetSet('Milliseconds', false);\n\n    // FORMATTING\n\n    addFormatToken('z',  0, 0, 'zoneAbbr');\n    addFormatToken('zz', 0, 0, 'zoneName');\n\n    // MOMENTS\n\n    function getZoneAbbr () {\n        return this._isUTC ? 'UTC' : '';\n    }\n\n    function getZoneName () {\n        return this._isUTC ? 'Coordinated Universal Time' : '';\n    }\n\n    var proto = Moment.prototype;\n\n    proto.add               = add;\n    proto.calendar          = calendar$1;\n    proto.clone             = clone;\n    proto.diff              = diff;\n    proto.endOf             = endOf;\n    proto.format            = format;\n    proto.from              = from;\n    proto.fromNow           = fromNow;\n    proto.to                = to;\n    proto.toNow             = toNow;\n    proto.get               = stringGet;\n    proto.invalidAt         = invalidAt;\n    proto.isAfter           = isAfter;\n    proto.isBefore          = isBefore;\n    proto.isBetween         = isBetween;\n    proto.isSame            = isSame;\n    proto.isSameOrAfter     = isSameOrAfter;\n    proto.isSameOrBefore    = isSameOrBefore;\n    proto.isValid           = isValid$2;\n    proto.lang              = lang;\n    proto.locale            = locale;\n    proto.localeData        = localeData;\n    proto.max               = prototypeMax;\n    proto.min               = prototypeMin;\n    proto.parsingFlags      = parsingFlags;\n    proto.set               = stringSet;\n    proto.startOf           = startOf;\n    proto.subtract          = subtract;\n    proto.toArray           = toArray;\n    proto.toObject          = toObject;\n    proto.toDate            = toDate;\n    proto.toISOString       = toISOString;\n    proto.inspect           = inspect;\n    proto.toJSON            = toJSON;\n    proto.toString          = toString;\n    proto.unix              = unix;\n    proto.valueOf           = valueOf;\n    proto.creationData      = creationData;\n    proto.year       = getSetYear;\n    proto.isLeapYear = getIsLeapYear;\n    proto.weekYear    = getSetWeekYear;\n    proto.isoWeekYear = getSetISOWeekYear;\n    proto.quarter = proto.quarters = getSetQuarter;\n    proto.month       = getSetMonth;\n    proto.daysInMonth = getDaysInMonth;\n    proto.week           = proto.weeks        = getSetWeek;\n    proto.isoWeek        = proto.isoWeeks     = getSetISOWeek;\n    proto.weeksInYear    = getWeeksInYear;\n    proto.isoWeeksInYear = getISOWeeksInYear;\n    proto.date       = getSetDayOfMonth;\n    proto.day        = proto.days             = getSetDayOfWeek;\n    proto.weekday    = getSetLocaleDayOfWeek;\n    proto.isoWeekday = getSetISODayOfWeek;\n    proto.dayOfYear  = getSetDayOfYear;\n    proto.hour = proto.hours = getSetHour;\n    proto.minute = proto.minutes = getSetMinute;\n    proto.second = proto.seconds = getSetSecond;\n    proto.millisecond = proto.milliseconds = getSetMillisecond;\n    proto.utcOffset            = getSetOffset;\n    proto.utc                  = setOffsetToUTC;\n    proto.local                = setOffsetToLocal;\n    proto.parseZone            = setOffsetToParsedOffset;\n    proto.hasAlignedHourOffset = hasAlignedHourOffset;\n    proto.isDST                = isDaylightSavingTime;\n    proto.isLocal              = isLocal;\n    proto.isUtcOffset          = isUtcOffset;\n    proto.isUtc                = isUtc;\n    proto.isUTC                = isUtc;\n    proto.zoneAbbr = getZoneAbbr;\n    proto.zoneName = getZoneName;\n    proto.dates  = deprecate('dates accessor is deprecated. Use date instead.', getSetDayOfMonth);\n    proto.months = deprecate('months accessor is deprecated. Use month instead', getSetMonth);\n    proto.years  = deprecate('years accessor is deprecated. Use year instead', getSetYear);\n    proto.zone   = deprecate('moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/', getSetZone);\n    proto.isDSTShifted = deprecate('isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information', isDaylightSavingTimeShifted);\n\n    function createUnix (input) {\n        return createLocal(input * 1000);\n    }\n\n    function createInZone () {\n        return createLocal.apply(null, arguments).parseZone();\n    }\n\n    function preParsePostFormat (string) {\n        return string;\n    }\n\n    var proto$1 = Locale.prototype;\n\n    proto$1.calendar        = calendar;\n    proto$1.longDateFormat  = longDateFormat;\n    proto$1.invalidDate     = invalidDate;\n    proto$1.ordinal         = ordinal;\n    proto$1.preparse        = preParsePostFormat;\n    proto$1.postformat      = preParsePostFormat;\n    proto$1.relativeTime    = relativeTime;\n    proto$1.pastFuture      = pastFuture;\n    proto$1.set             = set;\n\n    proto$1.months            =        localeMonths;\n    proto$1.monthsShort       =        localeMonthsShort;\n    proto$1.monthsParse       =        localeMonthsParse;\n    proto$1.monthsRegex       = monthsRegex;\n    proto$1.monthsShortRegex  = monthsShortRegex;\n    proto$1.week = localeWeek;\n    proto$1.firstDayOfYear = localeFirstDayOfYear;\n    proto$1.firstDayOfWeek = localeFirstDayOfWeek;\n\n    proto$1.weekdays       =        localeWeekdays;\n    proto$1.weekdaysMin    =        localeWeekdaysMin;\n    proto$1.weekdaysShort  =        localeWeekdaysShort;\n    proto$1.weekdaysParse  =        localeWeekdaysParse;\n\n    proto$1.weekdaysRegex       =        weekdaysRegex;\n    proto$1.weekdaysShortRegex  =        weekdaysShortRegex;\n    proto$1.weekdaysMinRegex    =        weekdaysMinRegex;\n\n    proto$1.isPM = localeIsPM;\n    proto$1.meridiem = localeMeridiem;\n\n    function get$1 (format, index, field, setter) {\n        var locale = getLocale();\n        var utc = createUTC().set(setter, index);\n        return locale[field](utc, format);\n    }\n\n    function listMonthsImpl (format, index, field) {\n        if (isNumber(format)) {\n            index = format;\n            format = undefined;\n        }\n\n        format = format || '';\n\n        if (index != null) {\n            return get$1(format, index, field, 'month');\n        }\n\n        var i;\n        var out = [];\n        for (i = 0; i < 12; i++) {\n            out[i] = get$1(format, i, field, 'month');\n        }\n        return out;\n    }\n\n    // ()\n    // (5)\n    // (fmt, 5)\n    // (fmt)\n    // (true)\n    // (true, 5)\n    // (true, fmt, 5)\n    // (true, fmt)\n    function listWeekdaysImpl (localeSorted, format, index, field) {\n        if (typeof localeSorted === 'boolean') {\n            if (isNumber(format)) {\n                index = format;\n                format = undefined;\n            }\n\n            format = format || '';\n        } else {\n            format = localeSorted;\n            index = format;\n            localeSorted = false;\n\n            if (isNumber(format)) {\n                index = format;\n                format = undefined;\n            }\n\n            format = format || '';\n        }\n\n        var locale = getLocale(),\n            shift = localeSorted ? locale._week.dow : 0;\n\n        if (index != null) {\n            return get$1(format, (index + shift) % 7, field, 'day');\n        }\n\n        var i;\n        var out = [];\n        for (i = 0; i < 7; i++) {\n            out[i] = get$1(format, (i + shift) % 7, field, 'day');\n        }\n        return out;\n    }\n\n    function listMonths (format, index) {\n        return listMonthsImpl(format, index, 'months');\n    }\n\n    function listMonthsShort (format, index) {\n        return listMonthsImpl(format, index, 'monthsShort');\n    }\n\n    function listWeekdays (localeSorted, format, index) {\n        return listWeekdaysImpl(localeSorted, format, index, 'weekdays');\n    }\n\n    function listWeekdaysShort (localeSorted, format, index) {\n        return listWeekdaysImpl(localeSorted, format, index, 'weekdaysShort');\n    }\n\n    function listWeekdaysMin (localeSorted, format, index) {\n        return listWeekdaysImpl(localeSorted, format, index, 'weekdaysMin');\n    }\n\n    getSetGlobalLocale('en', {\n        dayOfMonthOrdinalParse: /\\d{1,2}(th|st|nd|rd)/,\n        ordinal : function (number) {\n            var b = number % 10,\n                output = (toInt(number % 100 / 10) === 1) ? 'th' :\n                (b === 1) ? 'st' :\n                (b === 2) ? 'nd' :\n                (b === 3) ? 'rd' : 'th';\n            return number + output;\n        }\n    });\n\n    // Side effect imports\n\n    hooks.lang = deprecate('moment.lang is deprecated. Use moment.locale instead.', getSetGlobalLocale);\n    hooks.langData = deprecate('moment.langData is deprecated. Use moment.localeData instead.', getLocale);\n\n    var mathAbs = Math.abs;\n\n    function abs () {\n        var data           = this._data;\n\n        this._milliseconds = mathAbs(this._milliseconds);\n        this._days         = mathAbs(this._days);\n        this._months       = mathAbs(this._months);\n\n        data.milliseconds  = mathAbs(data.milliseconds);\n        data.seconds       = mathAbs(data.seconds);\n        data.minutes       = mathAbs(data.minutes);\n        data.hours         = mathAbs(data.hours);\n        data.months        = mathAbs(data.months);\n        data.years         = mathAbs(data.years);\n\n        return this;\n    }\n\n    function addSubtract$1 (duration, input, value, direction) {\n        var other = createDuration(input, value);\n\n        duration._milliseconds += direction * other._milliseconds;\n        duration._days         += direction * other._days;\n        duration._months       += direction * other._months;\n\n        return duration._bubble();\n    }\n\n    // supports only 2.0-style add(1, 's') or add(duration)\n    function add$1 (input, value) {\n        return addSubtract$1(this, input, value, 1);\n    }\n\n    // supports only 2.0-style subtract(1, 's') or subtract(duration)\n    function subtract$1 (input, value) {\n        return addSubtract$1(this, input, value, -1);\n    }\n\n    function absCeil (number) {\n        if (number < 0) {\n            return Math.floor(number);\n        } else {\n            return Math.ceil(number);\n        }\n    }\n\n    function bubble () {\n        var milliseconds = this._milliseconds;\n        var days         = this._days;\n        var months       = this._months;\n        var data         = this._data;\n        var seconds, minutes, hours, years, monthsFromDays;\n\n        // if we have a mix of positive and negative values, bubble down first\n        // check: https://github.com/moment/moment/issues/2166\n        if (!((milliseconds >= 0 && days >= 0 && months >= 0) ||\n                (milliseconds <= 0 && days <= 0 && months <= 0))) {\n            milliseconds += absCeil(monthsToDays(months) + days) * 864e5;\n            days = 0;\n            months = 0;\n        }\n\n        // The following code bubbles up values, see the tests for\n        // examples of what that means.\n        data.milliseconds = milliseconds % 1000;\n\n        seconds           = absFloor(milliseconds / 1000);\n        data.seconds      = seconds % 60;\n\n        minutes           = absFloor(seconds / 60);\n        data.minutes      = minutes % 60;\n\n        hours             = absFloor(minutes / 60);\n        data.hours        = hours % 24;\n\n        days += absFloor(hours / 24);\n\n        // convert days to months\n        monthsFromDays = absFloor(daysToMonths(days));\n        months += monthsFromDays;\n        days -= absCeil(monthsToDays(monthsFromDays));\n\n        // 12 months -> 1 year\n        years = absFloor(months / 12);\n        months %= 12;\n\n        data.days   = days;\n        data.months = months;\n        data.years  = years;\n\n        return this;\n    }\n\n    function daysToMonths (days) {\n        // 400 years have 146097 days (taking into account leap year rules)\n        // 400 years have 12 months === 4800\n        return days * 4800 / 146097;\n    }\n\n    function monthsToDays (months) {\n        // the reverse of daysToMonths\n        return months * 146097 / 4800;\n    }\n\n    function as (units) {\n        if (!this.isValid()) {\n            return NaN;\n        }\n        var days;\n        var months;\n        var milliseconds = this._milliseconds;\n\n        units = normalizeUnits(units);\n\n        if (units === 'month' || units === 'year') {\n            days   = this._days   + milliseconds / 864e5;\n            months = this._months + daysToMonths(days);\n            return units === 'month' ? months : months / 12;\n        } else {\n            // handle milliseconds separately because of floating point math errors (issue #1867)\n            days = this._days + Math.round(monthsToDays(this._months));\n            switch (units) {\n                case 'week'   : return days / 7     + milliseconds / 6048e5;\n                case 'day'    : return days         + milliseconds / 864e5;\n                case 'hour'   : return days * 24    + milliseconds / 36e5;\n                case 'minute' : return days * 1440  + milliseconds / 6e4;\n                case 'second' : return days * 86400 + milliseconds / 1000;\n                // Math.floor prevents floating point math errors here\n                case 'millisecond': return Math.floor(days * 864e5) + milliseconds;\n                default: throw new Error('Unknown unit ' + units);\n            }\n        }\n    }\n\n    // TODO: Use this.as('ms')?\n    function valueOf$1 () {\n        if (!this.isValid()) {\n            return NaN;\n        }\n        return (\n            this._milliseconds +\n            this._days * 864e5 +\n            (this._months % 12) * 2592e6 +\n            toInt(this._months / 12) * 31536e6\n        );\n    }\n\n    function makeAs (alias) {\n        return function () {\n            return this.as(alias);\n        };\n    }\n\n    var asMilliseconds = makeAs('ms');\n    var asSeconds      = makeAs('s');\n    var asMinutes      = makeAs('m');\n    var asHours        = makeAs('h');\n    var asDays         = makeAs('d');\n    var asWeeks        = makeAs('w');\n    var asMonths       = makeAs('M');\n    var asYears        = makeAs('y');\n\n    function clone$1 () {\n        return createDuration(this);\n    }\n\n    function get$2 (units) {\n        units = normalizeUnits(units);\n        return this.isValid() ? this[units + 's']() : NaN;\n    }\n\n    function makeGetter(name) {\n        return function () {\n            return this.isValid() ? this._data[name] : NaN;\n        };\n    }\n\n    var milliseconds = makeGetter('milliseconds');\n    var seconds      = makeGetter('seconds');\n    var minutes      = makeGetter('minutes');\n    var hours        = makeGetter('hours');\n    var days         = makeGetter('days');\n    var months       = makeGetter('months');\n    var years        = makeGetter('years');\n\n    function weeks () {\n        return absFloor(this.days() / 7);\n    }\n\n    var round = Math.round;\n    var thresholds = {\n        ss: 44,         // a few seconds to seconds\n        s : 45,         // seconds to minute\n        m : 45,         // minutes to hour\n        h : 22,         // hours to day\n        d : 26,         // days to month\n        M : 11          // months to year\n    };\n\n    // helper function for moment.fn.from, moment.fn.fromNow, and moment.duration.fn.humanize\n    function substituteTimeAgo(string, number, withoutSuffix, isFuture, locale) {\n        return locale.relativeTime(number || 1, !!withoutSuffix, string, isFuture);\n    }\n\n    function relativeTime$1 (posNegDuration, withoutSuffix, locale) {\n        var duration = createDuration(posNegDuration).abs();\n        var seconds  = round(duration.as('s'));\n        var minutes  = round(duration.as('m'));\n        var hours    = round(duration.as('h'));\n        var days     = round(duration.as('d'));\n        var months   = round(duration.as('M'));\n        var years    = round(duration.as('y'));\n\n        var a = seconds <= thresholds.ss && ['s', seconds]  ||\n                seconds < thresholds.s   && ['ss', seconds] ||\n                minutes <= 1             && ['m']           ||\n                minutes < thresholds.m   && ['mm', minutes] ||\n                hours   <= 1             && ['h']           ||\n                hours   < thresholds.h   && ['hh', hours]   ||\n                days    <= 1             && ['d']           ||\n                days    < thresholds.d   && ['dd', days]    ||\n                months  <= 1             && ['M']           ||\n                months  < thresholds.M   && ['MM', months]  ||\n                years   <= 1             && ['y']           || ['yy', years];\n\n        a[2] = withoutSuffix;\n        a[3] = +posNegDuration > 0;\n        a[4] = locale;\n        return substituteTimeAgo.apply(null, a);\n    }\n\n    // This function allows you to set the rounding function for relative time strings\n    function getSetRelativeTimeRounding (roundingFunction) {\n        if (roundingFunction === undefined) {\n            return round;\n        }\n        if (typeof(roundingFunction) === 'function') {\n            round = roundingFunction;\n            return true;\n        }\n        return false;\n    }\n\n    // This function allows you to set a threshold for relative time strings\n    function getSetRelativeTimeThreshold (threshold, limit) {\n        if (thresholds[threshold] === undefined) {\n            return false;\n        }\n        if (limit === undefined) {\n            return thresholds[threshold];\n        }\n        thresholds[threshold] = limit;\n        if (threshold === 's') {\n            thresholds.ss = limit - 1;\n        }\n        return true;\n    }\n\n    function humanize (withSuffix) {\n        if (!this.isValid()) {\n            return this.localeData().invalidDate();\n        }\n\n        var locale = this.localeData();\n        var output = relativeTime$1(this, !withSuffix, locale);\n\n        if (withSuffix) {\n            output = locale.pastFuture(+this, output);\n        }\n\n        return locale.postformat(output);\n    }\n\n    var abs$1 = Math.abs;\n\n    function sign(x) {\n        return ((x > 0) - (x < 0)) || +x;\n    }\n\n    function toISOString$1() {\n        // for ISO strings we do not use the normal bubbling rules:\n        //  * milliseconds bubble up until they become hours\n        //  * days do not bubble at all\n        //  * months bubble up until they become years\n        // This is because there is no context-free conversion between hours and days\n        // (think of clock changes)\n        // and also not between days and months (28-31 days per month)\n        if (!this.isValid()) {\n            return this.localeData().invalidDate();\n        }\n\n        var seconds = abs$1(this._milliseconds) / 1000;\n        var days         = abs$1(this._days);\n        var months       = abs$1(this._months);\n        var minutes, hours, years;\n\n        // 3600 seconds -> 60 minutes -> 1 hour\n        minutes           = absFloor(seconds / 60);\n        hours             = absFloor(minutes / 60);\n        seconds %= 60;\n        minutes %= 60;\n\n        // 12 months -> 1 year\n        years  = absFloor(months / 12);\n        months %= 12;\n\n\n        // inspired by https://github.com/dordille/moment-isoduration/blob/master/moment.isoduration.js\n        var Y = years;\n        var M = months;\n        var D = days;\n        var h = hours;\n        var m = minutes;\n        var s = seconds ? seconds.toFixed(3).replace(/\\.?0+$/, '') : '';\n        var total = this.asSeconds();\n\n        if (!total) {\n            // this is the same as C#'s (Noda) and python (isodate)...\n            // but not other JS (goog.date)\n            return 'P0D';\n        }\n\n        var totalSign = total < 0 ? '-' : '';\n        var ymSign = sign(this._months) !== sign(total) ? '-' : '';\n        var daysSign = sign(this._days) !== sign(total) ? '-' : '';\n        var hmsSign = sign(this._milliseconds) !== sign(total) ? '-' : '';\n\n        return totalSign + 'P' +\n            (Y ? ymSign + Y + 'Y' : '') +\n            (M ? ymSign + M + 'M' : '') +\n            (D ? daysSign + D + 'D' : '') +\n            ((h || m || s) ? 'T' : '') +\n            (h ? hmsSign + h + 'H' : '') +\n            (m ? hmsSign + m + 'M' : '') +\n            (s ? hmsSign + s + 'S' : '');\n    }\n\n    var proto$2 = Duration.prototype;\n\n    proto$2.isValid        = isValid$1;\n    proto$2.abs            = abs;\n    proto$2.add            = add$1;\n    proto$2.subtract       = subtract$1;\n    proto$2.as             = as;\n    proto$2.asMilliseconds = asMilliseconds;\n    proto$2.asSeconds      = asSeconds;\n    proto$2.asMinutes      = asMinutes;\n    proto$2.asHours        = asHours;\n    proto$2.asDays         = asDays;\n    proto$2.asWeeks        = asWeeks;\n    proto$2.asMonths       = asMonths;\n    proto$2.asYears        = asYears;\n    proto$2.valueOf        = valueOf$1;\n    proto$2._bubble        = bubble;\n    proto$2.clone          = clone$1;\n    proto$2.get            = get$2;\n    proto$2.milliseconds   = milliseconds;\n    proto$2.seconds        = seconds;\n    proto$2.minutes        = minutes;\n    proto$2.hours          = hours;\n    proto$2.days           = days;\n    proto$2.weeks          = weeks;\n    proto$2.months         = months;\n    proto$2.years          = years;\n    proto$2.humanize       = humanize;\n    proto$2.toISOString    = toISOString$1;\n    proto$2.toString       = toISOString$1;\n    proto$2.toJSON         = toISOString$1;\n    proto$2.locale         = locale;\n    proto$2.localeData     = localeData;\n\n    proto$2.toIsoString = deprecate('toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)', toISOString$1);\n    proto$2.lang = lang;\n\n    // Side effect imports\n\n    // FORMATTING\n\n    addFormatToken('X', 0, 0, 'unix');\n    addFormatToken('x', 0, 0, 'valueOf');\n\n    // PARSING\n\n    addRegexToken('x', matchSigned);\n    addRegexToken('X', matchTimestamp);\n    addParseToken('X', function (input, array, config) {\n        config._d = new Date(parseFloat(input, 10) * 1000);\n    });\n    addParseToken('x', function (input, array, config) {\n        config._d = new Date(toInt(input));\n    });\n\n    // Side effect imports\n\n\n    hooks.version = '2.22.2';\n\n    setHookCallback(createLocal);\n\n    hooks.fn                    = proto;\n    hooks.min                   = min;\n    hooks.max                   = max;\n    hooks.now                   = now;\n    hooks.utc                   = createUTC;\n    hooks.unix                  = createUnix;\n    hooks.months                = listMonths;\n    hooks.isDate                = isDate;\n    hooks.locale                = getSetGlobalLocale;\n    hooks.invalid               = createInvalid;\n    hooks.duration              = createDuration;\n    hooks.isMoment              = isMoment;\n    hooks.weekdays              = listWeekdays;\n    hooks.parseZone             = createInZone;\n    hooks.localeData            = getLocale;\n    hooks.isDuration            = isDuration;\n    hooks.monthsShort           = listMonthsShort;\n    hooks.weekdaysMin           = listWeekdaysMin;\n    hooks.defineLocale          = defineLocale;\n    hooks.updateLocale          = updateLocale;\n    hooks.locales               = listLocales;\n    hooks.weekdaysShort         = listWeekdaysShort;\n    hooks.normalizeUnits        = normalizeUnits;\n    hooks.relativeTimeRounding  = getSetRelativeTimeRounding;\n    hooks.relativeTimeThreshold = getSetRelativeTimeThreshold;\n    hooks.calendarFormat        = getCalendarFormat;\n    hooks.prototype             = proto;\n\n    // currently HTML5 input type only supports 24-hour formats\n    hooks.HTML5_FMT = {\n        DATETIME_LOCAL: 'YYYY-MM-DDTHH:mm',             // <input type=\"datetime-local\" />\n        DATETIME_LOCAL_SECONDS: 'YYYY-MM-DDTHH:mm:ss',  // <input type=\"datetime-local\" step=\"1\" />\n        DATETIME_LOCAL_MS: 'YYYY-MM-DDTHH:mm:ss.SSS',   // <input type=\"datetime-local\" step=\"0.001\" />\n        DATE: 'YYYY-MM-DD',                             // <input type=\"date\" />\n        TIME: 'HH:mm',                                  // <input type=\"time\" />\n        TIME_SECONDS: 'HH:mm:ss',                       // <input type=\"time\" step=\"1\" />\n        TIME_MS: 'HH:mm:ss.SSS',                        // <input type=\"time\" step=\"0.001\" />\n        WEEK: 'YYYY-[W]WW',                             // <input type=\"week\" />\n        MONTH: 'YYYY-MM'                                // <input type=\"month\" />\n    };\n\n    return hooks;\n\n})));\n","import pdfreader from 'pdfreader';\nimport moment from 'moment';\nconst parser = new pdfreader.PdfReader();\n\nconst parse = pdf => new Promise((resolve, reject) => {\n  var columnTitles = [\n    { title: '', x: 0  }, \n    { title: '', x: 0 }, \n    { title: '', x: 0 },\n    { title: '', x: 0 },\n    { title: '', x: 0 },\n    { title: '', x: 0 }, \n    { title: '', x: 0 },\n    { title: '', x: 0 }];\n\n  var items = [];\n  var list = [];\n  var fileReader = new FileReader();\n  fileReader.onload = function(event) {\n    parser.parseBuffer(event.target.result, (err, obj) => {\n      if (err) {\n        reject(err);\n      } else if (!obj) {\n        let state = 'checking';\n        let isGoodRow = false;\n        let checksum = 0;\n        items.forEach(item => {\n          if (item.text.indexOf('') > -1) {\n            state = 'done';\n          }\n          switch (state) {\n            case 'checking':\n              if (item.text === '+') {\n                state = 'checked';\n              }\n              break;\n            case 'checked':\n              checksum = parseInt(item.text.replace(/,/,''));\n              if (isNaN(checksum)) {\n                console.error('Failed to find checksum.');\n              }\n              state = 'collectColumn';\n              break;\n            case 'collectColumn':\n              columnTitles.forEach(function(column) {\n                if (item.text === column.title) {\n                  column.x = item.x;\n                }\n              });\n              if (item.text === '') {\n                state = 'collectList';\n              }\n              break;\n            case 'collectList':\n              if (item.x < columnTitles[0].x) {\n                // Encounter a new line -> check whether the text is formatted date\n                var ad = parseInt(item.text.substr(0,3)) + 1911;\n                if (isNaN(ad)) {\n                  isGoodRow = false;\n                } else {\n                  isGoodRow = true;\n                  list.push({'':'','':'','':'','':0,\n                    '':'','':'','':'','':0 });\n                  let date = ad + item.text.substr(3);\n                  list[list.length-1][''] += date;\n                  //list[list.length-1]['ts'] = moment.utc(date, 'YYYY/MM/DD').subtract(8, 'hours'); // Assume GMT+8\n                }\n              } else if (isGoodRow) {\n                for (var i = columnTitles.length-1; i > 0; i--) {\n                  if (columnTitles[i].x <= item.x) {\n                    if (i === 3 || i === 7) {\n                      var value = parseInt(item.text.replace(/,/,''));\n                      if (isNaN(value)) console.error('Not a number: ' + item.text);\n                      else list[list.length-1][columnTitles[i].title] += value;\n                    } else {\n                      list[list.length-1][columnTitles[i].title] += item.text;\n                    }\n                    break;\n                  }\n                }\n              }\n              break;\n          } // end of switch\n        });\n        const isValid = columnTitles.reduce((acc, cur) => acc + cur.x, 0);\n        if (isValid === 0) {\n          return reject('No a valid pdf.');\n        }\n        const payment = list.shift(); // remove \n        const sum = list.reduce((acc, current) => acc + current[''], 0);\n        console.log('Parsed billing sum: ' + sum);\n        console.log('Expected billing sum: ' + checksum);\n        resolve({payment: payment, items: list, checksum: checksum, sum: sum, name: pdf.name });\n      } else if (obj.text) {\n        items.push(obj);\n      };\n    });\n  }\n  fileReader.readAsArrayBuffer(pdf);\n});\n\nexport { parse }\n"]}