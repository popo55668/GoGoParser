<html>
<head>
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
</head>
<body>
  <div id="root" style="margin: auto; width: 50%;text-align:center">
    <img id="pdf" style="width:10%;display:block;margin-left:auto;margin-right:auto">
    <input type="file" onchange="javascript:onChange(event)" class="text-center" accept="application/pdf" style="margin:auto;height:50px">
  </div>
  <script src="/GoGoParser/parse.d876dcce.js"></script>
  <script>
    function onChange(event) {
      var files = event.target.files;
      var pdf = files[0];
      lib.parse(pdf).then(result => {
        console.log(result);
        var csv = '';
        var columns = [];
        Object.keys(result.items[0]).forEach(key => { csv += key; csv += ','; columns.push(key); });
        csv += '\n';
        result.items.forEach(row => {
          columns.forEach(col => { csv += row[col]; csv += ','; })
          csv += '\n';
        });
        var a = document.createElement('a');
        if (a.download !== undefined) {
          var href = 'data:text/csv,' + csv.replace(/\n/g, '%0A');
          a.href = href;
          a.download = pdf.name.replace(/pdf/,'csv');
          a.text = 'Click to download'; 
          document.getElementById("root").appendChild(a);
        } else {
        }
      }).catch(err => {
        console.log(err);
      });
    }
  </script>
</body>
</html>
